<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LikeDokan</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"> </script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Hind+Siliguri:wght@400;500;600;700&display=swap" rel="stylesheet">

    <style>
        /* ‡¶´‡¶®‡ßç‡¶ü ‡¶ì ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï‡¶ó‡ßç‡¶∞‡¶æ‡¶â‡¶®‡ßç‡¶° ‡¶ï‡¶æ‡¶∏‡ßç‡¶ü‡¶Æ‡¶æ‡¶á‡¶ú‡ßá‡¶∂‡¶® */
        body {
    font-family: 'Hind Siliguri', Inter, sans-serif;
    background-color: #f7f9fc;
    min-height: 100vh;
}

        /* ‡¶¨‡ßç‡¶∞‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶°‡¶ø‡¶Ç ‡¶ï‡¶æ‡¶≤‡¶æ‡¶∞ - ‡¶Ü‡¶ß‡ßÅ‡¶®‡¶ø‡¶ï ‡¶®‡ßÄ‡¶≤ */
        .brand-blue {
            background-color: #0d6efd; /* ‡¶¨‡ßÅ‡¶ü‡¶∏‡ßç‡¶ü‡ßç‡¶∞‡ßç‡¶Ø‡¶æ‡¶™ ‡¶™‡ßç‡¶∞‡¶æ‡¶á‡¶Æ‡¶æ‡¶∞‡¶ø ‡¶¨‡ßç‡¶≤‡ßÅ ‡¶è‡¶∞ ‡¶ï‡¶æ‡¶õ‡¶æ‡¶ï‡¶æ‡¶õ‡¶ø */
            transition: background-color 0.2s;
        }

        .brand-blue:hover {
            background-color: #0b5ed7;
        }

        .brand-blue-text {
            color: #0d6efd;
        }

        /* ‡¶ï‡¶æ‡¶∞‡ßç‡¶° ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤ - ‡¶è‡¶≤‡¶ø‡¶≠‡ßá‡¶ü‡ßá‡¶° ‡¶≤‡ßÅ‡¶ï */
        .app-card {
            background: white;
            border-radius: 12px; /* ‡¶è‡¶ï‡¶ü‡ßÅ ‡¶¨‡ßá‡¶∂‡¶ø ‡¶∞‡¶æ‡¶â‡¶®‡ßç‡¶°‡ßá‡¶° */
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05); /* ‡¶π‡¶æ‡¶≤‡¶ï‡¶æ ‡¶ï‡¶ø‡¶®‡ßç‡¶§‡ßÅ ‡¶¶‡ßÉ‡¶∂‡ßç‡¶Ø‡¶Æ‡¶æ‡¶® ‡¶∂‡ßç‡¶Ø‡¶æ‡¶°‡ßã */
            border: 1px solid #e9ecef;
            transition: box-shadow 0.3s, transform 0.2s;
        }

        .app-card:hover {
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.08);
            transform: translateY(-1px);
        }

        /* ‡¶´‡¶ø‡¶ï‡ßç‡¶∏‡¶° ‡¶π‡ßá‡¶°‡¶æ‡¶∞ */
        .fixed-header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 50;
            background: white;
            border-bottom: 1px solid #e9ecef;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }
        
        /* üî• ‡¶®‡¶§‡ßÅ‡¶®: ‡¶´‡¶ø‡¶ï‡ßç‡¶∏‡¶° ‡¶®‡ßã‡¶ü‡¶ø‡¶∂ ‡¶¨‡ßã‡¶∞‡ßç‡¶° ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤ */
        .fixed-notice-board {
            position: fixed;
            top: 64px; /* ‡¶π‡ßá‡¶°‡¶æ‡¶∞ ‡¶è‡¶∞ ‡¶â‡¶ö‡ßç‡¶ö‡¶§‡¶æ (h-16 = 64px) ‡¶è‡¶∞ ‡¶†‡¶ø‡¶ï ‡¶®‡¶ø‡¶ö‡ßá */
            left: 0;
            right: 0;
            z-index: 49; /* ‡¶π‡ßá‡¶°‡¶æ‡¶∞ (z-50) ‡¶è‡¶∞ ‡¶®‡¶ø‡¶ö‡ßá */
            background-color: #ffc107; /* ‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶®‡¶ø‡¶Ç ‡¶á‡¶Ø‡¶º‡ßá‡¶≤‡ßã */
            color: #343a40; /* ‡¶°‡¶æ‡¶∞‡ßç‡¶ï ‡¶ü‡ßá‡¶ï‡ßç‡¶∏‡¶ü */
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            /* ‡¶®‡ßã‡¶ü‡¶ø‡¶∂ ‡¶¨‡ßã‡¶∞‡ßç‡¶° ‡¶∏‡¶∞‡¶æ‡¶§‡ßá ‡¶ü‡ßç‡¶∞‡¶æ‡¶®‡¶ú‡¶ø‡¶∂‡¶® ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá */
            transition: top 0.3s ease-out, background-color 0.3s; 
        }

        /* ‡¶ï‡¶®‡ßç‡¶ü‡ßá‡¶®‡ßç‡¶ü ‡¶™‡ßç‡¶Ø‡¶æ‡¶°‡¶ø‡¶Ç (‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶®: ‡¶´‡¶ø‡¶ï‡ßç‡¶∏‡¶° padding-top ‡¶∏‡¶∞‡¶æ‡¶®‡ßã ‡¶π‡¶≤‡ßã, ‡¶è‡¶ñ‡¶® JS margin-top ‡¶∏‡ßá‡¶ü ‡¶ï‡¶∞‡¶¨‡ßá) */
        #main-content-container {
            padding-top: 1rem; /* ‡¶∏‡¶æ‡¶Æ‡¶æ‡¶®‡ßç‡¶Ø ‡¶™‡ßç‡¶Ø‡¶æ‡¶°‡¶ø‡¶Ç ‡¶Ø‡¶æ‡¶§‡ßá ‡¶Æ‡¶æ‡¶∞‡ßç‡¶ú‡¶ø‡¶® ‡¶®‡¶æ ‡¶™‡ßá‡¶≤‡ßá‡¶ì ‡¶ï‡¶®‡ßç‡¶ü‡ßá‡¶®‡ßç‡¶ü ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶® ‡¶ü‡¶™ ‡¶®‡¶æ ‡¶õ‡ßã‡¶Å‡ßü */
            transition: margin-top 0.3s ease-out; 
        }

        /* ‡¶á‡¶®‡¶™‡ßÅ‡¶ü ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤‡¶ø‡¶Ç */
        .app-input {
            border: 1px solid #ced4da;
            border-radius: 8px;
            padding: 12px;
            font-size: 16px;
            background-color: white;
            transition: border-color 0.2s, box-shadow 0.2s;
        }
        
        /* ... (‡¶¨‡¶æ‡¶ï‡¶ø ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤ ‡¶Ö‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶ø‡¶§) ... */
        /* ‡¶≤‡ßã‡¶°‡¶ø‡¶Ç ‡¶∏‡ßç‡¶™‡¶ø‡¶®‡¶æ‡¶∞ ‡¶ì ‡¶ì‡¶≠‡¶æ‡¶∞‡¶≤‡ßá ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤ (‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶ø‡¶§) */
        #loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(255, 255, 255, 0.95);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            flex-direction: column;
            gap: 1rem;
            color: #333;
            font-size: 1.25rem;
            font-weight: 600;
            opacity: 1; 
            pointer-events: all; 
            transition: opacity 0.5s ease-out; 
        }
        
        /* ‡¶ì‡¶≠‡¶æ‡¶∞‡¶≤‡ßá ‡¶Ö‡¶¶‡ßÉ‡¶∂‡ßç‡¶Ø ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶®‡¶§‡ßÅ‡¶® ‡¶ï‡ßç‡¶≤‡¶æ‡¶∏ */
        #loading-overlay.fade-out {
            opacity: 0;
            pointer-events: none; 
        }

        .spinner {
            border: 4px solid #e5e7eb;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            border-top-color: #0d6efd;
            animation: spin 1s ease infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* --- ‡¶õ‡ßã‡¶ü ‡¶∏‡ßç‡¶ü‡¶æ‡¶∞ ‡¶∞‡ßá‡¶ü‡¶ø‡¶Ç ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤ (‡¶ü‡¶æ‡¶∏‡ßç‡¶ï ‡¶ï‡¶æ‡¶∞‡ßç‡¶°‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø) --- */
        .small-rating-bar {
            display: flex;
            align-items: center;
            gap: 2px;
        }
        .small-star {
            font-size: 0.75rem; /* ‡¶õ‡ßã‡¶ü ‡¶Ü‡¶ï‡¶æ‡¶∞ */
        }
        .filled-star {
            color: #ffc107; /* ‡¶∏‡ßã‡¶®‡¶æ‡¶≤‡ßÄ ‡¶∞‡¶Ç */
        }

        .empty-star {
            color: #e9ecef; /* ‡¶ñ‡¶æ‡¶≤‡¶ø ‡¶§‡¶æ‡¶∞‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶π‡¶æ‡¶≤‡¶ï‡¶æ ‡¶ß‡ßÇ‡¶∏‡¶∞ */
        }
        
        .small-avatar {
            width: 28px;
            height: 28px;
            border-radius: 50%;
            background-color: #e5e7eb;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #4b5563;
            font-size: 0.7rem;
            font-weight: bold;
            overflow: hidden;
            flex-shrink: 0; /* ‡¶õ‡ßã‡¶ü ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶®‡ßá ‡¶∏‡¶ô‡ßç‡¶ï‡ßÅ‡¶ö‡¶ø‡¶§ ‡¶π‡¶ì‡¶Ø‡¶º‡¶æ ‡¶Ü‡¶ü‡¶ï‡¶æ‡¶¨‡ßá */
        }
        .small-avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        /* --- ‡¶õ‡ßã‡¶ü ‡¶∏‡ßç‡¶ü‡¶æ‡¶∞ ‡¶∞‡ßá‡¶ü‡¶ø‡¶Ç ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤ ‡¶∂‡ßá‡¶∑ --- */

        /* üî• ‡¶®‡¶§‡ßÅ‡¶®: ‡¶Æ‡ßã‡¶¨‡¶æ‡¶á‡¶≤ ‡¶Æ‡ßá‡¶®‡ßÅ ‡¶ì‡¶≠‡¶æ‡¶∞‡¶≤‡ßá ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤ */
        #mobile-menu-overlay {
            position: fixed;
            top: 64px; /* ‡¶π‡ßá‡¶°‡¶æ‡¶∞ ‡¶è‡¶∞ ‡¶â‡¶ö‡ßç‡¶ö‡¶§‡¶æ (h-16) */
            right: 0;
            width: 80%; /* ‡¶Æ‡ßã‡¶¨‡¶æ‡¶á‡¶≤ ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶®‡ßá‡¶∞ ‡ßÆ‡ß¶% ‡¶ú‡ßÅ‡¶°‡¶º‡ßá */
            max-width: 300px;
            height: calc(100vh - 64px); /* ‡¶π‡ßá‡¶°‡¶æ‡¶∞ ‡¶è‡¶∞ ‡¶®‡¶ø‡¶ö‡ßá ‡¶¨‡¶æ‡¶ï‡¶ø ‡¶Ö‡¶Ç‡¶∂ */
            z-index: 55; /* ‡¶π‡ßá‡¶°‡¶æ‡¶∞ (z-50) ‡¶è‡¶∞ ‡¶â‡¶™‡¶∞‡ßá */
            background-color: white;
            box-shadow: -4px 0 15px rgba(0, 0, 0, 0.1);
            transform: translateX(100%); /* ‡¶°‡¶ø‡¶´‡¶≤‡ßç‡¶ü‡¶≠‡¶æ‡¶¨‡ßá ‡¶°‡¶æ‡¶®‡¶¶‡¶ø‡¶ï‡ßá ‡¶≤‡ßÅ‡¶ï‡¶ø‡¶Ø‡¶º‡ßá ‡¶•‡¶æ‡¶ï‡¶¨‡ßá */
            transition: transform 0.3s ease-in-out;
        }

        #mobile-menu-overlay.open {
            transform: translateX(0); /* ‡¶Æ‡ßá‡¶®‡ßÅ ‡¶ñ‡ßã‡¶≤‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø */
        }

        /* ‡¶Æ‡ßá‡¶®‡ßÅ ‡¶¨‡ßç‡¶≤‡¶æ‡¶∞ ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï‡¶°‡ßç‡¶∞‡¶™ */
        #menu-backdrop {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 54;
            opacity: 0;
            transition: opacity 0.3s ease-in-out;
            pointer-events: none;
        }

        #menu-backdrop.open {
            opacity: 1;
            pointer-events: all;
        }
    </style>
</head>
<body>
    
    <!-- ‡¶∏‡¶æ‡¶∏‡¶™‡ßá‡¶®‡¶∂‡¶® ‡¶Æ‡¶°‡¶æ‡¶≤‡¶ü‡¶ø ‡¶∏‡¶Æ‡ßç‡¶™‡ßÇ‡¶∞‡ßç‡¶£ ‡¶Æ‡ßÅ‡¶õ‡ßá ‡¶´‡ßá‡¶≤‡¶æ ‡¶π‡¶≤‡ßã -->

    <!-- ‡¶≤‡ßã‡¶°‡¶ø‡¶Ç ‡¶ì‡¶≠‡¶æ‡¶∞‡¶≤‡ßá -->
    <div id="loading-overlay">
        <div class="spinner"></div>
        <p>‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...</p>
    </div>

    <!-- ‡¶π‡ßá‡¶°‡¶æ‡¶∞ -->
    <header class="fixed-header" id="app-header">
        <div class="container max-w-6xl mx-auto px-4 py-3 flex justify-between items-center h-16">
            
            <!-- ‡¶≤‡ßã‡¶ó‡ßã ‡¶è‡¶¨‡¶Ç ‡¶ü‡¶æ‡¶á‡¶ü‡ßá‡¶≤ -->
            <div class="text-xl font-extrabold brand-blue-text flex items-center">
                <span class="mr-2 text-3xl"></span> Like Dokan
            </div>
            
            <!-- ‡¶™‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶ü ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ú ‡¶ì ‡¶®‡ßá‡¶≠‡¶ø‡¶ó‡ßá‡¶∂‡¶® (‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶ø‡¶§) -->
            <div class="flex items-center gap-2">
                <!-- ‡¶™‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶ü ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ú -->
                <div class="bg-gradient-to-r from-blue-300 to-blue-600 text-white font-bold px-3 py-0.5 rounded-full text-sm flex items-center shadow-md">
                    <i class="fas fa-coins mr-2"></i>
                    <span id="user-points">0</span>
                </div>
                
                <!-- ‡¶°‡ßá‡¶∏‡ßç‡¶ï‡¶ü‡¶™ ‡¶®‡ßá‡¶≠‡¶ø‡¶ó‡ßá‡¶∂‡¶® ‡¶¨‡¶æ‡¶ü‡¶®‡¶∏ (‡¶õ‡ßã‡¶ü ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶®‡ßá ‡¶≤‡ßÅ‡¶ï‡¶æ‡¶®‡ßã) -->
                <div class="hidden sm:flex items-center gap-0">
                    <button class="w-10 h-10 rounded-full hover:bg-gray-100 transition duration-200 text-gray-600" title="‡¶∞‡¶ø‡¶™‡ßã‡¶∞‡ßç‡¶ü ‡¶ì ‡¶®‡¶ø‡¶∞‡ßç‡¶¶‡ßá‡¶∂‡¶ø‡¶ï‡¶æ" onclick="window.location.href='report.html'">
                        <i class="fas fa-info-circle text-lg"></i>
                    </button>
                    <button class="w-10 h-10 rounded-full hover:bg-gray-100 transition duration-200 text-gray-600" title="‡¶™‡ßç‡¶∞‡ßã‡¶´‡¶æ‡¶á‡¶≤" onclick="window.location.href='profile.html'">
                        <i class="fas fa-user text-lg"></i>
                    </button>
                    <button class="w-10 h-10 rounded-full hover:bg-gray-100 transition duration-200 text-gray-600" title="‡¶≤‡¶ó‡¶Ü‡¶â‡¶ü" onclick="window.logout()">
                        <i class="fas fa-sign-out-alt text-lg"></i>
                    </button>
                </div>
                
                <!-- ‡¶Æ‡ßã‡¶¨‡¶æ‡¶á‡¶≤ ‡¶Æ‡ßá‡¶®‡ßÅ ‡¶ü‡¶ó‡¶≤ ‡¶¨‡¶æ‡¶ü‡¶® (‡¶°‡ßá‡¶∏‡ßç‡¶ï‡¶ü‡¶™‡ßá ‡¶≤‡ßÅ‡¶ï‡¶æ‡¶®‡ßã) -->
                <button id="menu-toggle-button" class="sm:hidden w-10 h-10 rounded-full hover:bg-gray-100 transition duration-200 text-gray-600" title="‡¶Æ‡ßá‡¶®‡ßÅ" onclick="window.toggleMenu()">
                    <i class="fas fa-bars text-lg" id="menu-icon"></i>
                </button>
            </div>
        </div>
    </header>
    
    <!-- üî• ‡¶®‡¶§‡ßÅ‡¶®: ‡¶ó‡ßç‡¶≤‡ßã‡¶¨‡¶æ‡¶≤ ‡¶®‡ßã‡¶ü‡¶ø‡¶∂ ‡¶¨‡ßã‡¶∞‡ßç‡¶° (‡¶´‡¶ø‡¶ï‡ßç‡¶∏‡¶°) -->
    <!-- ‡¶ü‡ßá‡¶ï‡ßç‡¶∏‡¶ü ‡¶≤‡¶æ‡¶á‡¶®‡ßá‡¶∞ ‡¶â‡¶™‡¶∞ ‡¶≠‡¶ø‡¶§‡ßç‡¶§‡¶ø ‡¶ï‡¶∞‡ßá ‡¶â‡¶ö‡ßç‡¶ö‡¶§‡¶æ ‡¶®‡¶ø‡¶∞‡ßç‡¶ß‡¶æ‡¶∞‡¶£‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø p-2/p-4 ‡¶ï‡ßç‡¶≤‡¶æ‡¶∏ ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá -->
    <div id="global-notice-board" class="fixed-notice-board hidden" role="alert">
        <div class="container max-w-6xl mx-auto px-4 py-2 flex items-center justify-center">
            <i class="fas fa-bullhorn text-sm mr-3" id="notice-icon"></i>
            <p id="notice-text" class="text-sm font-medium text-center"></p>
        </div>
    </div>
    
    <!-- üî• ‡¶®‡¶§‡ßÅ‡¶®: ‡¶Æ‡ßã‡¶¨‡¶æ‡¶á‡¶≤ ‡¶Æ‡ßá‡¶®‡ßÅ ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï‡¶°‡ßç‡¶∞‡¶™ -->
    <div id="menu-backdrop" class="hidden" onclick="window.toggleMenu()"></div>

    <!-- üî• ‡¶®‡¶§‡ßÅ‡¶®: ‡¶Æ‡ßã‡¶¨‡¶æ‡¶á‡¶≤ ‡¶Æ‡ßá‡¶®‡ßÅ ‡¶ì‡¶≠‡¶æ‡¶∞‡¶≤‡ßá -->
    <div id="mobile-menu-overlay" class="app-card border-l-4 border-blue-500 overflow-y-auto hidden">
        <nav class="flex flex-col p-4 space-y-2">
            <h3 class="text-lg font-bold text-gray-700 mb-4 border-b pb-2">‡¶Æ‡ßá‡¶®‡ßÅ</h3>
            
            <a href="index.html" class="flex items-center p-3 text-gray-700 hover:bg-blue-50 rounded-lg transition duration-200 font-semibold">
                <i class="fas fa-home w-6"></i>
                <span class="ml-3">‡¶π‡ßã‡¶Æ (Home)</span>
            </a>
            <a href="order.html" class="flex items-center p-3 text-gray-700 hover:bg-blue-50 rounded-lg transition duration-200 font-semibold">
                <i class="fas fa-plus-circle w-6"></i>
                <span class="ml-3">‡¶®‡¶§‡ßÅ‡¶® ‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞</span>
            </a>
            <a href="profile.html" class="flex items-center p-3 text-gray-700 hover:bg-blue-50 rounded-lg transition duration-200 font-semibold">
                <i class="fas fa-user w-6"></i>
                <span class="ml-3">‡¶Ü‡¶Æ‡¶æ‡¶∞ ‡¶™‡ßç‡¶∞‡ßã‡¶´‡¶æ‡¶á‡¶≤</span>
            </a>
            <a href="leaderboard.html" class="flex items-center p-3 text-gray-700 hover:bg-blue-50 rounded-lg transition duration-200 font-semibold">
                <i class="fas fa-crown w-6"></i>
                <span class="ml-3">‡¶≤‡¶ø‡¶°‡¶æ‡¶∞‡¶¨‡ßã‡¶∞‡ßç‡¶°</span>
            </a>
            <a href="report.html" class="flex items-center p-3 text-gray-700 hover:bg-blue-50 rounded-lg transition duration-200 font-semibold">
                <i class="fas fa-info-circle w-6"></i>
                <span class="ml-3">‡¶∞‡¶ø‡¶™‡ßã‡¶∞‡ßç‡¶ü / ‡¶®‡¶ø‡¶∞‡ßç‡¶¶‡ßá‡¶∂‡¶ø‡¶ï‡¶æ</span>
            </a>
            
            <!-- ‡¶≤‡¶ó‡¶Ü‡¶â‡¶ü ‡¶¨‡¶æ‡¶ü‡¶® (‡¶Æ‡ßá‡¶®‡ßÅ‡¶∞ ‡¶®‡¶ø‡¶ö‡ßá) -->
            <div class="pt-4 border-t mt-4">
                <button onclick="window.logout(); window.toggleMenu();" class="flex items-center p-3 w-full text-left text-red-600 hover:bg-red-50 rounded-lg transition duration-200 font-semibold">
                    <i class="fas fa-sign-out-alt w-6"></i>
                    <span class="ml-3">‡¶≤‡¶ó‡¶Ü‡¶â‡¶ü</span>
                </button>
            </div>
            
        </nav>
    </div>

    <!-- ‡¶ü‡ßç‡¶∞‡¶æ‡¶∏‡ßç‡¶ü ‡¶∏‡ßç‡¶ï‡ßã‡¶∞ / ‡¶∏‡¶æ‡¶∏‡¶™‡ßá‡¶®‡¶∂‡¶® ‡¶®‡ßã‡¶ü‡¶ø‡¶∂ ‡¶¨‡ßã‡¶∞‡ßç‡¶° (‡¶è‡¶á ‡¶á‡¶≤‡¶ø‡¶Æ‡ßá‡¶®‡ßç‡¶ü‡¶ü‡¶ø ‡¶Æ‡ßÅ‡¶õ‡ßá ‡¶´‡ßá‡¶≤‡¶æ ‡¶π‡¶≤‡ßã) -->
    <!-- <div id="trust-notice-board" ...>...</div> -->
    
    <!-- ‡¶™‡ßç‡¶∞‡¶ß‡¶æ‡¶® ‡¶ï‡¶®‡ßç‡¶ü‡ßá‡¶®‡ßç‡¶ü (‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶®: mt-2 ‡¶ï‡ßç‡¶≤‡¶æ‡¶∏ ‡¶∏‡¶∞‡¶æ‡¶®‡ßã ‡¶π‡¶≤‡ßã, ‡¶è‡¶ñ‡¶® JS margin-top ‡¶∏‡ßá‡¶ü ‡¶ï‡¶∞‡¶¨‡ßá) -->
    <div class="container max-w-4xl mx-auto px-4 hidden" id="main-content-container">
        
        <main>
            <!-- ‡¶¶‡ßç‡¶∞‡ßÅ‡¶§ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶∂‡¶® ‡¶ï‡¶æ‡¶∞‡ßç‡¶° (Quick Actions Card) -->
            <div class="app-card p-6 mb-8">
                <h2 class="text-2xl font-bold text-gray-800 mb-6 text-center border-b pb-4">
                    ‚öôÔ∏è ‡¶¶‡ßç‡¶∞‡ßÅ‡¶§ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶∂‡¶®
                </h2>
                <!-- üî• ‡¶Ü‡¶™‡¶°‡ßá‡¶ü: ‡ß™‡¶ü‡¶ø ‡¶¨‡¶æ‡¶ü‡¶® ‡¶¶‡ßá‡¶ñ‡¶æ‡¶®‡ßã‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶ó‡ßç‡¶∞‡¶ø‡¶° ‡¶†‡¶ø‡¶ï ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá -->
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                    <a href="order.html" class="block brand-blue text-center py-3 px-2 text-xs md:text-sm font-bold rounded-xl text-white hover:shadow-xl hover:brightness-110 transform transition duration-300 shadow-md">
                        <i class="fas fa-plus-circle block md:hidden mb-1"></i> 
                        <span class="hidden md:inline"><i class="fas fa-plus-circle mr-1"></i></span> ‡¶®‡¶§‡ßÅ‡¶® ‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞
                    </a>
                    <a href="profile.html" class="block bg-gray-500 text-center py-3 px-2 text-xs md:text-sm font-bold rounded-xl text-white hover:bg-gray-600 hover:shadow-xl transform transition duration-300 shadow-md">
                         <i class="fas fa-user block md:hidden mb-1"></i>
                         <span class="hidden md:inline"><i class="fas fa-user mr-1"></i></span> ‡¶Ü‡¶Æ‡¶æ‡¶∞ ‡¶™‡ßç‡¶∞‡ßã‡¶´‡¶æ‡¶á‡¶≤
                    </a>
                    <a href="leaderboard.html" class="block bg-yellow-500 text-center py-3 px-2 text-xs md:text-sm font-bold rounded-xl text-white hover:bg-yellow-600 hover:shadow-xl transform transition duration-300 shadow-md">
                         <i class="fas fa-crown block md:hidden mb-1"></i>
                         <span class="hidden md:inline"><i class="fas fa-crown mr-1"></i></span> ‡¶≤‡¶ø‡¶°‡¶æ‡¶∞‡¶¨‡ßã‡¶∞‡ßç‡¶°
                    </a>
                    <a href="report.html" class="block bg-red-500 text-center py-3 px-2 text-xs md:text-sm font-bold rounded-xl text-white hover:bg-red-600 hover:shadow-xl transform transition duration-300 shadow-md">
                         <i class="fas fa-bug block md:hidden mb-1"></i>
                         <span class="hidden md:inline"><i class="fas fa-bug mr-1"></i></span> ‡¶∞‡¶ø‡¶™‡ßã‡¶∞‡ßç‡¶ü/‡¶®‡¶ø‡¶∞‡ßç‡¶¶‡ßá‡¶∂‡¶ø‡¶ï‡¶æ
                    </a>
                </div>
            </div>
            
            <!-- Admin/Moderator Links (Hidden by default) -->
            <div class="app-card p-6 mb-8 hidden" id="admin-mod-links-section">
                <h2 class="text-xl font-bold text-gray-800 mb-6 text-center border-b pb-4">
                    üîê ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶Æ‡¶ø‡¶® ‡¶™‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶≤
                </h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <a href="admin.html" id="admin-link" class="block bg-indigo-600 text-center py-3 px-4 text-sm font-bold rounded-xl text-white hover:bg-indigo-700 hover:shadow-xl transform transition duration-300 shadow-md hidden">
                        <i class="fas fa-tools mr-1"></i> ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶Æ‡¶ø‡¶® ‡¶°‡ßç‡¶Ø‡¶æ‡¶∂‡¶¨‡ßã‡¶∞‡ßç‡¶°
                    </a>
                    <a href="moderator.html" id="moderator-link" class="block bg-pink-600 text-center py-3 px-4 text-sm font-bold rounded-xl text-white hover:bg-pink-700 hover:shadow-xl transform transition duration-300 shadow-md hidden">
                        <i class="fas fa-user-shield mr-1"></i> ‡¶Æ‡¶°‡¶æ‡¶∞‡ßá‡¶ü‡¶∞ ‡¶™‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶≤
                    </a>
                </div>
            </div>

            <!-- ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞‡¶ï‡¶æ‡¶∞‡ßÄ‡¶∞ ‡¶™‡ßç‡¶∞‡ßã‡¶´‡¶æ‡¶á‡¶≤ ‡¶ì ‡¶°‡ßç‡¶Ø‡¶æ‡¶∂‡¶¨‡ßã‡¶∞‡ßç‡¶° -->
            <div class="app-card p-6 mb-8" id="dashboard">
                
                <!-- ‡¶™‡ßç‡¶∞‡ßã‡¶´‡¶æ‡¶á‡¶≤ ‡¶∏‡ßá‡¶ï‡¶∂‡¶® -->
                <div class="flex items-center gap-4 mb-6 pb-6 border-b border-gray-100">
                    <!-- w-20 h-11 ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶® ‡¶ï‡¶∞‡ßá w-20 h-20 ‡¶ï‡¶∞‡¶æ ‡¶π‡¶≤‡ßã -->
                    <div class="w-20 h-20 bg-gray-100 brand-blue-text rounded-full flex items-center justify-center text-3xl font-bold overflow-hidden border-2 border-gray-300" id="profile-avatar">
                        S
                    </div>
                    <div>
                        <h3 class="text-2xl font-bold text-gray-800" id="user-name-display">‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞‡¶ï‡¶æ‡¶∞‡ßÄ</h3>
                        <p class="text-gray-500 text-sm mt-1">
                            ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶Ü‡¶á‡¶°‡¶ø: <span id="user-id-display" class="font-mono text-xs bg-gray-100 px-2 py-0.5 rounded">user123</span>
                        </p>
                    </div>
                </div>

                <!-- ‡¶™‡¶∞‡¶ø‡¶∏‡¶Ç‡¶ñ‡ßç‡¶Ø‡¶æ‡¶® -->
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                    
                    <div class="stat-card p-4 text-center bg-yellow-50 rounded-lg shadow-sm">
                        <i class="fas fa-star text-3xl text-yellow-500 mb-2"></i>
                        <div class="text-2xl font-bold text-gray-800" id="total-points">‡ß¶</div>
                        <div class="text-sm text-gray-500">‡¶Æ‡ßã‡¶ü ‡¶™‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶ü</div>
                    </div>
                    
                    <div class="stat-card p-4 text-center bg-blue-50 rounded-lg shadow-sm">
                        <i class="fas fa-chart-line text-3xl brand-blue-text mb-2"></i>
                        <div class="text-2xl font-bold text-gray-800" id="total-tasks-created">‡ß¶</div>
                        <div class="text-sm text-gray-500">‡¶§‡ßà‡¶∞‡¶ø‡¶ï‡ßÉ‡¶§ ‡¶ï‡¶æ‡¶ú</div>
                    </div>
                    
                    <div class="stat-card p-4 text-center bg-green-50 rounded-lg shadow-sm">
                        <i class="fas fa-check-circle text-3xl text-green-500 mb-2"></i>
                        <div class="text-2xl font-bold text-gray-800" id="total-tasks-completed">‡ß¶</div>
                        <div class="text-sm text-gray-500">‡¶∏‡¶´‡¶≤ ‡¶ï‡¶æ‡¶ú</div>
                    </div>
                    
                    <div class="stat-card p-4 text-center bg-red-50 rounded-lg shadow-sm">
                        <i class="fas fa-times-circle text-3xl text-red-500 mb-2"></i>
                        <div class="text-2xl font-bold text-gray-800" id="total-tasks-rejected">‡ß¶</div>
                        <div class="text-sm text-gray-500">‡¶¨‡¶æ‡¶§‡¶ø‡¶≤ ‡¶ï‡¶æ‡¶ú</div>
                    </div>
                </div>
            </div>

            <!-- ‡¶â‡¶™‡¶≤‡¶¨‡ßç‡¶ß ‡¶ü‡¶æ‡¶∏‡ßç‡¶ï -->
            <div class="app-card p-6 mb-8" id="available-tasks-section">
                <h2 class="text-2xl font-bold text-gray-800 mb-6 text-center border-b pb-4">
                    üéØ ‡¶â‡¶™‡¶≤‡¶¨‡ßç‡¶ß ‡¶ü‡¶æ‡¶∏‡ßç‡¶ï ‡¶∏‡¶Æ‡ßÇ‡¶π
                </h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6" id="available-tasks-grid">
                    <!-- Tasks will be loaded here -->
                </div>
            </div>
            
            <!-- ‡¶Ü‡¶Æ‡¶æ‡¶∞ ‡¶ú‡¶Æ‡¶æ ‡¶¶‡ßá‡¶ì‡ßü‡¶æ ‡¶™‡ßç‡¶∞‡ßÅ‡¶´‡¶ó‡ßÅ‡¶≤‡ßã‡¶∞ ‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∏ (NEW SECTION) -->
            <div class="app-card p-6 mb-8" id="submitted-proofs-section">
                <h2 class="text-2xl font-bold text-gray-800 mb-6 text-center border-b pb-4">
                    üìù ‡¶Ü‡¶Æ‡¶æ‡¶∞ ‡¶ú‡¶Æ‡¶æ ‡¶¶‡ßá‡¶ì‡ßü‡¶æ ‡¶™‡ßç‡¶∞‡ßÅ‡¶´‡¶ó‡ßÅ‡¶≤‡ßã‡¶∞ ‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∏
                </h2>
                <div id="submitted-proofs-list" class="space-y-4">
                    <!-- Proofs will be loaded here -->
                </div>
            </div>
            
            <!-- '‡¶∏‡¶Æ‡ßç‡¶™‡¶®‡ßç‡¶®‡¶ï‡ßÉ‡¶§ ‡¶ü‡¶æ‡¶∏‡ßç‡¶ï' ‡¶∏‡ßá‡¶ï‡¶∂‡¶®‡¶ü‡¶ø ‡¶è‡¶ñ‡¶æ‡¶® ‡¶•‡ßá‡¶ï‡ßá ‡¶¨‡¶æ‡¶¶ ‡¶¶‡ßá‡¶ì‡ßü‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá -->

        </main>
    </div>

    <!-- üî• ‡¶®‡¶§‡ßÅ‡¶®: ‡¶∏‡¶æ‡¶∏‡¶™‡ßá‡¶®‡¶∂‡¶® ‡¶Æ‡¶°‡¶æ‡¶≤ -->
    <div id="suspension-modal" class="fixed inset-0 z-50 flex justify-center items-center p-4 transition-opacity duration-300 hidden" style="background-color: rgba(0, 0, 0, 0.6);">
        <div class="app-card p-6 w-full max-w-md relative animate-in zoom-in-50 duration-300 border-t-4 border-red-500">
            <button class="absolute top-3 right-3 text-gray-500 hover:text-gray-800 text-3xl transition" onclick="closeModal('suspension-modal')">
                &times;
            </button>
            <div class="text-center mb-6">
                <i class="fas fa-exclamation-triangle text-5xl text-red-500 mb-4 animate-pulse"></i>
                <h2 class="text-2xl font-bold text-red-600">‡¶Ü‡¶™‡¶®‡¶ø ‡¶∏‡¶æ‡¶∏‡¶™‡ßá‡¶®‡ßç‡¶°‡ßá‡¶°!</h2>
            </div>
            
            <p class="text-gray-700 mb-4 text-center">
                ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü‡ßá ‡¶∏‡¶æ‡¶Æ‡¶Ø‡¶º‡¶ø‡¶ï ‡¶®‡¶ø‡¶∑‡ßá‡¶ß‡¶æ‡¶ú‡ßç‡¶û‡¶æ ‡¶ú‡¶æ‡¶∞‡¶ø ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá‡•§ ‡¶è‡¶á ‡¶∏‡¶Æ‡¶Ø‡¶º‡ßá ‡¶Ü‡¶™‡¶®‡¶ø ‡¶ï‡ßã‡¶®‡ßã **‡¶®‡¶§‡ßÅ‡¶® ‡¶ï‡¶æ‡¶ú ‡¶ï‡¶∞‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡¶¨‡ßá‡¶® ‡¶®‡¶æ**‡•§
            </p>

            <div class="bg-red-50 p-4 rounded-lg space-y-3">
                <div class="flex justify-between items-center text-sm">
                    <span class="font-semibold text-gray-600"><i class="fas fa-gavel mr-2"></i> ‡¶ï‡¶æ‡¶∞‡¶£:</span>
                    <span id="suspension-reason" class="font-bold text-red-700 text-right">‡¶®‡¶ø‡¶∞‡ßç‡¶¶‡¶ø‡¶∑‡ßç‡¶ü ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡¶®‡¶ø</span>
                </div>
                <div class="flex justify-between items-center text-sm">
                    <span class="font-semibold text-gray-600"><i class="fas fa-calendar-times mr-2"></i> ‡¶®‡¶ø‡¶∑‡ßá‡¶ß‡¶æ‡¶ú‡ßç‡¶û‡¶æ‡¶∞ ‡¶∂‡ßá‡¶∑:</span>
                    <span id="suspension-end-date" class="font-bold text-gray-800 text-right">‡¶∏‡ßç‡¶•‡¶æ‡¶Ø‡¶º‡ßÄ</span>
                </div>
            </div>
            
            <div class="mt-6 pt-4 border-t text-center">
                <p class="text-xs text-gray-500 mb-3">
                    ‡¶Ø‡¶¶‡¶ø ‡¶Ü‡¶™‡¶®‡¶ø ‡¶Æ‡¶®‡ßá ‡¶ï‡¶∞‡ßá‡¶® ‡¶è‡¶ü‡¶ø ‡¶≠‡ßÅ‡¶≤‡¶¨‡¶∂‡¶§ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá, ‡¶§‡¶¨‡ßá ‡¶®‡¶ø‡¶∞‡ßç‡¶¶‡ßá‡¶∂‡¶ø‡¶ï‡¶æ ‡¶∏‡ßá‡¶ï‡¶∂‡¶®‡ßá ‡¶Ø‡ßã‡¶ó‡¶æ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®‡•§
                </p>
                <button class="w-full bg-red-500 text-white py-2 text-center rounded-lg font-bold hover:bg-red-600 transition duration-200" onclick="closeModal('suspension-modal')">
                    ‡¶¨‡ßÅ‡¶ù‡ßá‡¶õ‡¶ø
                </button>
            </div>
        </div>
    </div>
    <!-- üî• ‡¶∏‡¶æ‡¶∏‡¶™‡ßá‡¶®‡¶∂‡¶® ‡¶Æ‡¶°‡¶æ‡¶≤ ‡¶∂‡ßá‡¶∑ -->

    <!-- ‡¶™‡ßç‡¶∞‡ßÅ‡¶´ ‡¶ú‡¶Æ‡¶æ ‡¶¶‡¶ø‡¶® ‡¶Æ‡¶°‡¶æ‡¶≤ (‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶ø‡¶§: ‡¶∂‡ßÅ‡¶ß‡ßÅ ‡¶®‡¶æ‡¶Æ ‡¶ì ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶®‡¶∂‡¶ü) -->
    <div id="submit-proof-modal" class="fixed inset-0 z-50 flex justify-center items-center p-4 transition-opacity duration-300 hidden" style="background-color: rgba(0, 0, 0, 0.4);">
        <div class="app-card p-6 w-full max-w-md relative animate-in zoom-in-50 duration-300">
            <button class="absolute top-3 right-3 text-gray-500 hover:text-gray-800 text-3xl transition" onclick="closeModal('submit-proof-modal')">
                &times;
            </button>
            <h2 class="text-xl font-bold text-gray-800 mb-6 border-b pb-3">‡¶´‡ßá‡¶∏‡¶¨‡ßÅ‡¶ï ‡¶Ü‡¶á‡¶°‡¶ø ‡¶ì ‡¶™‡ßç‡¶∞‡ßÅ‡¶´ ‡¶ú‡¶Æ‡¶æ ‡¶¶‡¶ø‡¶®</h2>
            <form id="submitProofForm">
                
                <!-- ‡¶´‡ßá‡¶∏‡¶¨‡ßÅ‡¶ï ‡¶Ü‡¶á‡¶°‡¶ø‡¶∞ ‡¶®‡¶æ‡¶Æ -->
                <div class="mb-4">
                    <label for="facebookName" class="block text-sm font-medium text-gray-700 mb-2">
                        ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶´‡ßá‡¶∏‡¶¨‡ßÅ‡¶ï ‡¶Ü‡¶á‡¶°‡¶ø‡¶∞ ‡¶®‡¶æ‡¶Æ:
                    </label>
                    <!-- autocomplete="off" ‡¶Ø‡ßÅ‡¶ï‡ßç‡¶§ ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá ‡¶Ø‡¶æ‡¶§‡ßá ‡¶¨‡ßç‡¶∞‡¶æ‡¶â‡¶ú‡¶æ‡¶∞‡ßá‡¶∞ ‡¶°‡¶ø‡¶´‡¶≤‡ßç‡¶ü ‡¶∏‡¶æ‡¶ú‡ßá‡¶∂‡¶® ‡¶®‡¶æ ‡¶Ü‡¶∏‡ßá -->
                    <input type="text" id="facebookName" name="facebookName" 
                           class="app-input w-full" 
                           placeholder="‡¶Ø‡ßá‡¶Æ‡¶®: Shuvo Ahamed" required autocomplete="off">
                    <p class="text-xs text-gray-500 mt-1">‡¶è‡¶á ‡¶§‡¶•‡ßç‡¶Ø‡¶ü‡¶ø ‡¶∂‡ßá‡¶∑‡¶¨‡¶æ‡¶∞ ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá ‡¶è‡¶¨‡¶Ç ‡¶∏‡ßç‡¶¨‡ßü‡¶Ç‡¶ï‡ßç‡¶∞‡¶ø‡ßü‡¶≠‡¶æ‡¶¨‡ßá ‡¶™‡ßÇ‡¶∞‡¶£ ‡¶ï‡¶∞‡¶æ ‡¶π‡¶≤‡ßã‡•§</p>
                </div>

                <!-- ‡¶ü‡¶æ‡¶∏‡ßç‡¶ï ‡¶∏‡¶Æ‡ßç‡¶™‡¶®‡ßç‡¶® ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶®‡¶∂‡¶ü -->
                <div class="mb-6">
                    <label for="screenshotFile" class="block text-sm font-medium text-gray-700 mb-2">
                        ‡¶ü‡¶æ‡¶∏‡ßç‡¶ï ‡¶∏‡¶Æ‡ßç‡¶™‡¶®‡ßç‡¶® ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶®‡¶∂‡¶ü ‡¶ú‡¶Æ‡¶æ ‡¶¶‡¶ø‡¶®:
                    </label>
                    <input type="file" id="screenshotFile" name="screenshotFile" accept="image/*"
                           class="w-full text-sm text-gray-500
                                  file:mr-4 file:py-2 file:px-4
                                  file:rounded-full file:border-0
                                  file:text-sm file:font-semibold
                                  file:bg-blue-50 file:text-blue-700
                                  hover:file:bg-blue-100" required>
                    <p class="text-xs text-gray-500 mt-1">‡¶∂‡ßÅ‡¶ß‡ßÅ‡¶Æ‡¶æ‡¶§‡ßç‡¶∞ JPG/PNG ‡¶´‡¶æ‡¶á‡¶≤ ‡¶ó‡ßç‡¶∞‡¶π‡¶£‡¶Ø‡ßã‡¶ó‡ßç‡¶Ø‡•§ (‡¶´‡¶æ‡¶á‡¶≤ ‡¶∏‡¶æ‡¶á‡¶ú ‡¶ï‡¶Æ ‡¶∞‡¶æ‡¶ñ‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá ‡¶Ü‡¶™‡¶≤‡ßã‡¶° ‡¶¶‡ßç‡¶∞‡ßÅ‡¶§ ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø)</p>
                </div>
                
                <button type="submit" class="w-full brand-blue text-white py-3 text-center rounded-lg font-bold hover:shadow-lg transition duration-200">
                    <i class="fas fa-upload mr-2"></i> ‡¶ú‡¶Æ‡¶æ ‡¶¶‡¶ø‡¶®
                </button>
            </form>
        </div>
    </div>
    
    <div id="notification-container" class="fixed bottom-4 right-4 z-50 space-y-2"></div>
    
    <script type="module">
        // Firebase RTDB imports
        import { auth, rtdb, showNotification, logout } from './rtdb-config.js';
        import { onAuthStateChanged, setPersistence, browserSessionPersistence, signInWithCustomToken, signInAnonymously } from "https://www.gstatic.com/firebasejs/10.0.0/firebase-auth.js";
        import { set, ref, onValue, push, update, get } from "https://www.gstatic.com/firebasejs/10.0.0/firebase-database.js";
        
        const loadingOverlay = document.getElementById('loading-overlay');
        const mainContentContainer = document.getElementById('main-content-container');
        const availableTasksGrid = document.getElementById('available-tasks-grid');
        const availableTasksSection = document.getElementById('available-tasks-section');
        // üî• ‡¶®‡¶§‡ßÅ‡¶®: ‡¶ó‡ßç‡¶≤‡ßã‡¶¨‡¶æ‡¶≤ ‡¶®‡ßã‡¶ü‡¶ø‡¶∂ ‡¶¨‡ßã‡¶∞‡ßç‡¶°‡ßá‡¶∞ DOM ‡¶∞‡ßá‡¶´‡¶æ‡¶∞‡ßá‡¶®‡ßç‡¶∏
        const globalNoticeBoard = document.getElementById('global-notice-board'); 
        const noticeTextElement = document.getElementById('notice-text');
        const noticeIconElement = document.getElementById('notice-icon'); // üî• ‡¶®‡¶§‡ßÅ‡¶®: ‡¶Ü‡¶á‡¶ï‡¶®‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø
        
        const appHeader = document.getElementById('app-header');
        
        // üî• ‡¶®‡¶§‡ßÅ‡¶®: ‡¶Æ‡ßá‡¶®‡ßÅ ‡¶á‡¶≤‡¶ø‡¶Æ‡ßá‡¶®‡ßç‡¶ü‡¶ó‡ßÅ‡¶≤‡ßã
        const mobileMenuOverlay = document.getElementById('mobile-menu-overlay');
        const menuBackdrop = document.getElementById('menu-backdrop');
        const menuIcon = document.getElementById('menu-icon');

        // üî• ‡¶®‡¶§‡ßÅ‡¶®: ‡¶∏‡¶æ‡¶∏‡¶™‡ßá‡¶®‡¶∂‡¶® ‡¶Æ‡¶°‡¶æ‡¶≤ DOM ‡¶∞‡ßá‡¶´‡¶æ‡¶∞‡ßá‡¶®‡ßç‡¶∏
        const suspensionModal = document.getElementById('suspension-modal'); 

        // üî• ‡¶®‡¶§‡ßÅ‡¶®: ‡¶Æ‡ßá‡¶®‡ßÅ ‡¶ü‡¶ó‡¶≤ ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶´‡¶æ‡¶Ç‡¶∂‡¶®
        window.toggleMenu = () => {
            const isMenuOpen = mobileMenuOverlay.classList.toggle('open');
            menuBackdrop.classList.toggle('open');
            mobileMenuOverlay.classList.toggle('hidden');
            menuBackdrop.classList.toggle('hidden');
            
            // ‡¶Ü‡¶á‡¶ï‡¶® ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶®
            if (isMenuOpen) {
                menuIcon.classList.remove('fa-bars');
                menuIcon.classList.add('fa-times');
                // ‡¶Æ‡ßá‡¶®‡ßÅ ‡¶ñ‡ßã‡¶≤‡¶æ‡¶∞ ‡¶∏‡¶Æ‡¶Ø‡¶º ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶≤‡¶ø‡¶Ç ‡¶¨‡¶®‡ßç‡¶ß ‡¶ï‡¶∞‡¶æ
                document.body.style.overflow = 'hidden'; 
            } else {
                menuIcon.classList.remove('fa-times');
                menuIcon.classList.add('fa-bars');
                // ‡¶Æ‡ßá‡¶®‡ßÅ ‡¶¨‡¶®‡ßç‡¶ß ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶∏‡¶Æ‡¶Ø‡¶º ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶≤‡¶ø‡¶Ç ‡¶ö‡¶æ‡¶≤‡ßÅ ‡¶ï‡¶∞‡¶æ
                document.body.style.overflow = '';
            }
        };


        const submitProofModal = document.getElementById('submit-proof-modal');
        const submitProofForm = document.getElementById('submitProofForm');
        
        let currentTaskId = null;
        let userId = null;
        let currentUserPoints = 0;
        let currentUserName = '';
        let userCompletedTasks = {};
        let currentUserData = {}; 
        
        let lastFacebookName = '';
        
        let authAndDataLoaded = false;
        
        let userProfileCache = {}; 
        
        // üî• ‡¶®‡ßã‡¶ü‡¶ø‡¶∂ ‡¶∏‡¶æ‡¶á‡¶ï‡ßç‡¶≤‡¶ø‡¶Ç‡¶Ø‡¶º‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶≠‡ßá‡¶∞‡¶ø‡¶Ø‡¶º‡ßá‡¶¨‡¶≤
        let activeNotices = [];
        let currentNoticeIndex = 0;
        let noticeCycleInterval = null;
        const NOTICE_DISPLAY_DURATION = 5000; // ‡ß´ ‡¶∏‡ßá‡¶ï‡ßá‡¶®‡ßç‡¶°

        // ----------------------------------------------------------------------
        // üî• Cloudinary ‡¶ï‡¶®‡¶´‡¶ø‡¶ó‡¶æ‡¶∞‡ßá‡¶∂‡¶®: ‡¶™‡ßç‡¶∞‡ßÅ‡¶´ ‡¶Ü‡¶™‡¶≤‡ßã‡¶°‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø
        // ----------------------------------------------------------------------
        const CLOUDINARY_CLOUD_NAME = 'deqeko2ny'; // profile.html ‡¶•‡ßá‡¶ï‡ßá ‡¶®‡ßá‡¶ì‡ßü‡¶æ
        const CLOUDINARY_UPLOAD_PRESET = 'Profilepicture'; // profile.html ‡¶•‡ßá‡¶ï‡ßá ‡¶®‡ßá‡¶ì‡ßü‡¶æ
        const CLOUDINARY_URL = `https://api.cloudinary.com/v1_1/${CLOUDINARY_CLOUD_NAME}/image/upload`;
        // ----------------------------------------------------------------------
        
        /**
         * ‡¶á‡¶®‡¶™‡ßÅ‡¶ü ‡¶´‡¶æ‡¶á‡¶≤‡¶ï‡ßá ‡¶ï‡ßç‡¶≤‡¶æ‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶ü-‡¶∏‡¶æ‡¶á‡¶°‡ßá ‡¶∏‡¶Ç‡¶ï‡ßÅ‡¶ö‡¶ø‡¶§ (‡¶ï‡¶Æ‡ßç‡¶™‡ßç‡¶∞‡ßá‡¶∏) ‡¶ï‡¶∞‡ßá ‡¶®‡¶§‡ßÅ‡¶® Blob ‡¶π‡¶ø‡¶∏‡ßá‡¶¨‡ßá ‡¶∞‡¶ø‡¶ü‡¶æ‡¶∞‡ßç‡¶® ‡¶ï‡¶∞‡ßá‡•§
         * ‡¶è‡¶ü‡¶ø ‡¶õ‡¶¨‡¶ø‡¶∞ ‡¶∞‡ßá‡¶ú‡ßã‡¶≤‡¶ø‡¶â‡¶∂‡¶® (maxWidth=1024) ‡¶è‡¶¨‡¶Ç ‡¶ï‡ßã‡¶Ø‡¶º‡¶æ‡¶≤‡¶ø‡¶ü‡¶ø (0.8) ‡¶ï‡¶Æ‡¶ø‡¶Ø‡¶º‡ßá ‡¶´‡¶æ‡¶á‡¶≤ ‡¶∏‡¶æ‡¶á‡¶ú ‡¶â‡¶≤‡ßç‡¶≤‡ßá‡¶ñ‡¶Ø‡ßã‡¶ó‡ßç‡¶Ø‡¶≠‡¶æ‡¶¨‡ßá ‡¶π‡ßç‡¶∞‡¶æ‡¶∏ ‡¶ï‡¶∞‡ßá‡•§
         * @param {File} file - ‡¶á‡¶®‡¶™‡ßÅ‡¶ü ‡¶á‡¶Æ‡ßá‡¶ú ‡¶´‡¶æ‡¶á‡¶≤ (‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶®‡¶∂‡¶ü)
         * @param {number} maxWidth - ‡¶õ‡¶¨‡¶ø‡¶∞ ‡¶∏‡¶∞‡ßç‡¶¨‡ßã‡¶ö‡ßç‡¶ö ‡¶™‡ßç‡¶∞‡¶∏‡ßç‡¶• (‡¶Ø‡ßá‡¶Æ‡¶®: 1024px)
         * @param {number} quality - JPEG/WebP ‡¶ï‡¶Æ‡ßç‡¶™‡ßç‡¶∞‡ßá‡¶∂‡¶® ‡¶ï‡ßã‡¶Ø‡¶º‡¶æ‡¶≤‡¶ø‡¶ü‡¶ø (0.8 ‡¶•‡ßá‡¶ï‡ßá 1.0)
         * @returns {Promise<Blob>} - ‡¶∏‡¶Ç‡¶ï‡ßÅ‡¶ö‡¶ø‡¶§ Blob ‡¶Ö‡¶¨‡¶ú‡ßá‡¶ï‡ßç‡¶ü
         */
        const compressImage = (file, maxWidth = 1024, quality = 0.8) => {
            return new Promise((resolve, reject) => {
                // ‡¶´‡¶æ‡¶á‡¶≤ ‡¶Ø‡¶¶‡¶ø 1MB ‡¶è‡¶∞ ‡¶ï‡¶Æ ‡¶π‡¶Ø‡¶º, ‡¶§‡¶æ‡¶π‡¶≤‡ßá ‡¶ï‡¶Æ‡ßç‡¶™‡ßç‡¶∞‡ßá‡¶∏ ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶¶‡¶∞‡¶ï‡¶æ‡¶∞ ‡¶®‡ßá‡¶á
                if (file.size < 1024 * 1024) {
                    console.log("‡¶ï‡¶®‡¶∏‡ßã‡¶≤ ‡¶≤‡¶ó: ‡¶á‡¶Æ‡ßá‡¶ú ‡¶∏‡¶æ‡¶á‡¶ú 1MB ‡¶è‡¶∞ ‡¶ï‡¶Æ, ‡¶ï‡¶Æ‡ßç‡¶™‡ßç‡¶∞‡ßá‡¶∏ ‡¶è‡¶°‡¶º‡¶ø‡¶Ø‡¶º‡ßá ‡¶Ø‡¶æ‡¶ì‡¶Ø‡¶º‡¶æ ‡¶π‡¶≤‡ßã‡•§");
                    resolve(file);
                    return;
                }
                
                const reader = new FileReader();
                reader.readAsDataURL(file);
                reader.onload = event => {
                    const img = new Image();
                    img.src = event.target.result;
                    img.onload = () => {
                        const canvas = document.createElement('canvas');
                        let width = img.width;
                        let height = img.height;

                        // ‡¶™‡ßç‡¶∞‡¶∏‡ßç‡¶• ‡¶Ø‡¶¶‡¶ø maxWidth ‡¶è‡¶∞ ‡¶ö‡ßá‡¶Ø‡¶º‡ßá ‡¶¨‡ßá‡¶∂‡¶ø ‡¶π‡¶Ø‡¶º, ‡¶§‡¶¨‡ßá ‡¶Ü‡¶ï‡¶æ‡¶∞ ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶® ‡¶ï‡¶∞‡ßã
                        if (width > maxWidth) {
                            height = height * (maxWidth / width);
                            width = maxWidth;
                        }

                        canvas.width = width;
                        canvas.height = height;

                        const ctx = canvas.getContext('2d');
                        // ‡¶õ‡¶¨‡¶ø‡¶∞ ‡¶∞‡ßá‡¶®‡ßç‡¶°‡¶æ‡¶∞‡¶ø‡¶Ç ‡¶Æ‡¶æ‡¶® ‡¶â‡¶®‡ßç‡¶®‡¶§ ‡¶ï‡¶∞‡¶æ
                        ctx.imageSmoothingEnabled = true;
                        ctx.imageSmoothingQuality = 'high';
                        
                        // ‡¶õ‡¶¨‡¶ø ‡¶Ü‡¶Å‡¶ï‡¶æ
                        ctx.drawImage(img, 0, 0, width, height);

                        // Blob ‡¶è ‡¶∞‡ßÇ‡¶™‡¶æ‡¶®‡ßç‡¶§‡¶∞ ‡¶ï‡¶∞‡ßá ‡¶ï‡ßã‡¶Ø‡¶º‡¶æ‡¶≤‡¶ø‡¶ü‡¶ø ‡¶ï‡¶Æ‡¶æ‡¶®‡ßã
                        canvas.toBlob(blob => {
                            resolve(blob);
                        }, 'image/jpeg', quality); // JPEG ‡¶´‡¶∞‡¶Æ‡ßç‡¶Ø‡¶æ‡¶ü ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ ‡¶π‡¶≤‡ßã
                    };
                    img.onerror = error => reject(error);
                };
                reader.onerror = error => reject(error);
            });
        };

        /**
         * ‡¶¨‡¶°‡¶º ‡¶∏‡¶Ç‡¶ñ‡ßç‡¶Ø‡¶æ‡¶ï‡ßá ‡¶∏‡¶Ç‡¶ï‡ßç‡¶∑‡¶ø‡¶™‡ßç‡¶§ ‡¶´‡¶∞‡ßç‡¶Æ‡ßá (K, M, B) ‡¶∞‡ßÇ‡¶™‡¶æ‡¶®‡ßç‡¶§‡¶∞ ‡¶ï‡¶∞‡ßá‡•§
         * @param {number} num - ‡¶Ø‡ßá ‡¶∏‡¶Ç‡¶ñ‡ßç‡¶Ø‡¶æ‡¶ü‡¶ø ‡¶´‡¶∞‡¶Æ‡ßç‡¶Ø‡¶æ‡¶ü ‡¶ï‡¶∞‡¶æ ‡¶π‡¶¨‡ßá‡•§
         * @returns {string} - ‡¶´‡¶∞‡¶Æ‡ßç‡¶Ø‡¶æ‡¶ü ‡¶ï‡¶∞‡¶æ ‡¶∏‡ßç‡¶ü‡ßç‡¶∞‡¶ø‡¶Ç (‡¶Ø‡ßá‡¶Æ‡¶®: 10000 -> 10k)
         */
        const formatPoints = (num) => {
            // ‡¶®‡¶ø‡¶∂‡ßç‡¶ö‡¶ø‡¶§ ‡¶ï‡¶∞‡¶ø ‡¶Ø‡ßá num ‡¶è‡¶ï‡¶ü‡¶ø ‡¶∏‡¶Ç‡¶ñ‡ßç‡¶Ø‡¶æ
            if (typeof num !== 'number' || isNaN(num)) {
                return '0';
            }
            
            // ‡¶ß‡¶®‡¶æ‡¶§‡ßç‡¶Æ‡¶ï ‡¶∏‡¶Ç‡¶ñ‡ßç‡¶Ø‡¶æ ‡¶®‡¶ø‡¶∂‡ßç‡¶ö‡¶ø‡¶§ ‡¶ï‡¶∞‡¶ø
            const absNum = Math.abs(num);
            
            if (absNum >= 1000000000) {
                // ‡¶¨‡¶ø‡¶≤‡¶ø‡¶Ø‡¶º‡¶® (B) - 1000,000,000
                return (num / 1000000000).toFixed(1).replace(/\.0$/, '') + 'B';
            }
            if (absNum >= 1000000) {
                // ‡¶Æ‡¶ø‡¶≤‡¶ø‡¶Ø‡¶º‡¶® (M) - 1,000,000
                const formatted = (num / 1000000).toFixed(1);
                // ‡¶Ø‡¶¶‡¶ø .0 ‡¶è ‡¶∂‡ßá‡¶∑ ‡¶π‡¶Ø‡¶º, ‡¶§‡¶¨‡ßá .0 ‡¶¨‡¶æ‡¶¶ ‡¶¶‡ßá‡¶¨‡ßá
                if (formatted.endsWith('.0')) {
                    return formatted.slice(0, -2) + 'M';
                }
                return formatted + 'M';
            }
            if (absNum >= 10000) {
                // ‡¶π‡¶æ‡¶ú‡¶æ‡¶∞ (k) - 10,000 (‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Ö‡¶®‡ßÅ‡¶∞‡ßã‡¶ß ‡¶Ö‡¶®‡ßÅ‡¶Ø‡¶æ‡¶Ø‡¶º‡ßÄ)
                const formatted = (num / 1000).toFixed(1);
                if (formatted.endsWith('.0')) {
                    return formatted.slice(0, -2) + 'k';
                }
                return formatted + 'k';
            }
            // 10,000 ‡¶è‡¶∞ ‡¶®‡¶ø‡¶ö‡ßá‡¶∞ ‡¶∏‡¶Ç‡¶ñ‡ßç‡¶Ø‡¶æ‡¶ï‡ßá ‡¶ï‡¶Æ‡¶æ ‡¶∏‡¶π ‡¶∏‡ßç‡¶•‡¶æ‡¶®‡ßÄ‡¶Ø‡¶º ‡¶´‡¶∞‡¶Æ‡ßç‡¶Ø‡¶æ‡¶ü‡ßá ‡¶¶‡ßá‡¶ñ‡¶æ‡¶¨‡ßá
            return num.toLocaleString('en');
        };

        const showContentAndHideLoader = () => {
            if (!authAndDataLoaded) {
                authAndDataLoaded = true;
                // 'hidden' ‡¶ï‡ßç‡¶≤‡¶æ‡¶∏‡ßá‡¶∞ ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡ßá 'fade-out' ‡¶ï‡ßç‡¶≤‡¶æ‡¶∏ ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ ‡¶π‡¶≤‡ßã
                loadingOverlay.classList.add('fade-out');
                mainContentContainer.classList.remove('hidden');
            }
        };

        setTimeout(() => {
            if (!authAndDataLoaded) {
                console.warn("Loading timeout exceeded. Showing content anyway.");
                showNotification('‡¶°‡ßá‡¶ü‡¶æ ‡¶≤‡ßã‡¶° ‡¶π‡¶§‡ßá ‡¶¨‡ßá‡¶∂‡¶ø ‡¶∏‡¶Æ‡¶Ø‡¶º ‡¶®‡¶ø‡¶ö‡ßç‡¶õ‡ßá, ‡¶¶‡¶Ø‡¶º‡¶æ ‡¶ï‡¶∞‡ßá ‡¶Ö‡¶™‡ßá‡¶ï‡ßç‡¶∑‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶® ‡¶¨‡¶æ ‡¶™‡¶∞‡ßá ‡¶Ü‡¶¨‡¶æ‡¶∞ ‡¶ö‡ßá‡¶∑‡ßç‡¶ü‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§', 'warning');
                showContentAndHideLoader();
            }
        }, 5000); 

        window.scrollToTasks = () => {
            if (availableTasksSection) {
                availableTasksSection.scrollIntoView({
                    behavior: 'smooth'
                });
            }
        };

        /**
         * ‡¶™‡ßç‡¶∞‡ßÅ‡¶´‡ßá‡¶∞ ‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∏ ‡¶Ö‡¶®‡ßÅ‡¶Ø‡¶æ‡¶Ø‡¶º‡ßÄ ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ú ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡ßá‡•§
         * @param {string} status - ‡¶™‡ßç‡¶∞‡ßÅ‡¶´‡ßá‡¶∞ ‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∏ ('approved', 'rejected', 'pending')
         * @returns {string} - HTML ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ú ‡¶∏‡ßç‡¶ü‡ßç‡¶∞‡¶ø‡¶Ç
         */
        const getStatusBadge = (status) => {
            const baseClasses = "px-3 py-1 text-sm font-medium rounded-full flex items-center shadow-sm";
            let colorClasses;
            let text;
            let icon;
            switch(status) {
                case 'approved':
                    colorClasses = 'bg-green-100 text-green-700';
                    text = '‡¶∏‡¶´‡¶≤';
                    icon = 'fas fa-check-circle';
                    break;
                case 'rejected':
                    colorClasses = 'bg-red-100 text-red-700';
                    text = '‡¶¨‡¶æ‡¶§‡¶ø‡¶≤';
                    icon = 'fas fa-times-circle';
                    break;
                default:
                    colorClasses = 'bg-yellow-100 text-yellow-700';
                    text = '‡¶∞‡¶ø‡¶≠‡¶ø‡¶â ‡¶ö‡¶≤‡¶õ‡ßá';
                    icon = 'fas fa-hourglass-half';
            }
            return `<span class="${baseClasses} ${colorClasses}"><i class="${icon} mr-1"></i> ${text}</span>`;
        };
        
        const getTaskTypeBadge = (type) => {
             // ‡¶Ü‡¶ß‡ßÅ‡¶®‡¶ø‡¶ï ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ú ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤
            const baseClasses = "px-3 py-1 text-xs font-medium rounded-full capitalize shadow-sm";
            let colorClasses;
            switch(type.toLowerCase()) {
                case 'like':
                    colorClasses = "bg-blue-500 text-white";
                    break;
                case 'comment':
                    colorClasses = "bg-purple-500 text-white";
                    break;
                case 'share':
                    colorClasses = "bg-pink-500 text-white";
                    break;
                case 'group': // ‡¶®‡¶§‡ßÅ‡¶® ‡¶ü‡¶æ‡¶∏‡ßç‡¶ï ‡¶ü‡¶æ‡¶á‡¶™‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡¶æ ‡¶π‡¶≤‡ßã
                    colorClasses = "bg-teal-500 text-white";
                    break;
                default:
                    colorClasses = "bg-gray-200 text-gray-800";
            }
            return `<span class="${baseClasses} ${colorClasses}">${type}</span>`;
        }
        
        /**
         * ‡¶ú‡¶Æ‡¶æ ‡¶¶‡ßá‡¶ì‡ßü‡¶æ‡¶∞ ‡¶∏‡¶Æ‡¶Ø‡¶º‡¶ï‡ßá ‡¶∏‡ßç‡¶•‡¶æ‡¶®‡ßÄ‡ßü ‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ ‡¶´‡¶∞‡¶Æ‡ßç‡¶Ø‡¶æ‡¶ü‡ßá ‡¶¶‡ßá‡¶ñ‡¶æ‡ßü‡•§
         * @param {number} timestamp - ‡¶Æ‡¶ø‡¶≤‡¶ø‡¶∏‡ßá‡¶ï‡ßá‡¶®‡ßç‡¶°‡ßá ‡¶∏‡¶Æ‡ßü
         * @returns {string} - ‡¶´‡¶∞‡¶Æ‡ßç‡¶Ø‡¶æ‡¶ü ‡¶ï‡¶∞‡¶æ ‡¶°‡ßá‡¶ü-‡¶ü‡¶æ‡¶á‡¶Æ ‡¶∏‡ßç‡¶ü‡ßç‡¶∞‡¶ø‡¶Ç
         */
        const formatDate = (timestamp) => {
            if (!timestamp) return 'N/A';
            const date = new Date(timestamp);
            return date.toLocaleString('bn-BD', { 
                year: 'numeric', 
                month: 'short', 
                day: 'numeric', 
                hour: '2-digit', 
                minute: '2-digit' 
            });
        };

        /**
         * ‡¶∏‡¶æ‡¶∏‡¶™‡ßá‡¶®‡¶∂‡¶®‡ßá‡¶∞ ‡¶∂‡ßá‡¶∑ ‡¶∏‡¶Æ‡¶Ø‡¶º‡¶ï‡ßá ‡¶∏‡¶π‡¶ú‡ßá ‡¶¨‡ßã‡¶ß‡¶ó‡¶Æ‡ßç‡¶Ø ‡¶´‡¶∞‡¶Æ‡ßç‡¶Ø‡¶æ‡¶ü‡ßá ‡¶¶‡ßá‡¶ñ‡¶æ‡¶Ø‡¶º‡•§
         * @param {number} timestamp - ‡¶∏‡¶æ‡¶∏‡¶™‡ßá‡¶®‡¶∂‡¶®‡ßá‡¶∞ ‡¶∂‡ßá‡¶∑ ‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ‡ßá‡¶∞ ‡¶Æ‡¶ø‡¶≤‡¶ø‡¶∏‡ßá‡¶ï‡ßá‡¶®‡ßç‡¶°‡ßá ‡¶∏‡¶Æ‡ßü‡•§
         * @returns {string} - ‡¶´‡¶∞‡¶Æ‡ßç‡¶Ø‡¶æ‡¶ü ‡¶ï‡¶∞‡¶æ ‡¶°‡ßá‡¶ü-‡¶ü‡¶æ‡¶á‡¶Æ ‡¶∏‡ßç‡¶ü‡ßç‡¶∞‡¶ø‡¶Ç ‡¶¨‡¶æ "‡¶∏‡ßç‡¶•‡¶æ‡¶Ø‡¶º‡ßÄ"‡•§
         */
        const formatSuspensionDate = (timestamp) => {
            if (!timestamp) return '‡¶∏‡ßç‡¶•‡¶æ‡¶Ø‡¶º‡ßÄ';
            
            const suspensionEnd = new Date(timestamp);
            // ‡¶Ø‡¶¶‡¶ø ‡¶∂‡ßá‡¶∑ ‡¶∏‡¶Æ‡¶Ø‡¶º ‡¶è‡¶ñ‡¶®‡¶ï‡¶æ‡¶∞ ‡¶∏‡¶Æ‡¶Ø‡¶º‡ßá‡¶∞ ‡¶ö‡ßá‡¶Ø‡¶º‡ßá ‡¶ï‡¶Æ ‡¶π‡¶Ø‡¶º, ‡¶§‡¶æ‡¶π‡¶≤‡ßá ‡¶ß‡¶∞‡ßá ‡¶®‡ßá‡¶ì‡¶Ø‡¶º‡¶æ ‡¶π‡¶¨‡ßá ‡¶∏‡¶æ‡¶∏‡¶™‡ßá‡¶®‡¶∂‡¶® ‡¶®‡ßá‡¶á
            if (suspensionEnd <= new Date()) { 
                return '‡¶®‡¶ø‡¶∑‡ßá‡¶ß‡¶æ‡¶ú‡ßç‡¶û‡¶æ ‡¶®‡ßá‡¶á / ‡¶∂‡ßá‡¶∑ ‡¶π‡ßü‡ßá‡¶õ‡ßá';
            }
            
            return suspensionEnd.toLocaleString('bn-BD', { 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric', 
                hour: '2-digit', 
                minute: '2-digit' 
            });
        };


        /**
         * ‡¶á‡¶â‡¶ú‡¶æ‡¶∞‡ßá‡¶∞ ‡¶∞‡ßã‡¶≤‡ßá‡¶∞ ‡¶â‡¶™‡¶∞ ‡¶≠‡¶ø‡¶§‡ßç‡¶§‡¶ø ‡¶ï‡¶∞‡ßá ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶Æ‡¶ø‡¶®/‡¶Æ‡¶°‡¶æ‡¶∞‡ßá‡¶ü‡¶∞ ‡¶≤‡¶ø‡¶Ç‡¶ï‡¶ó‡ßÅ‡¶≤‡ßã‡¶∞ ‡¶¶‡ßÉ‡¶∂‡ßç‡¶Ø‡¶Æ‡¶æ‡¶®‡¶§‡¶æ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡ßá‡•§
         * @param {string} role - ‡¶á‡¶â‡¶ú‡¶æ‡¶∞‡ßá‡¶∞ ‡¶∞‡ßã‡¶≤ ('user', 'moderator', 'admin')
         */
        const updateDashboardLinks = (role) => {
            const adminModSection = document.getElementById('admin-mod-links-section');
            const adminLink = document.getElementById('admin-link');
            const moderatorLink = document.getElementById('moderator-link');
            
            if (role === 'admin') {
                adminModSection.classList.remove('hidden');
                adminLink.classList.remove('hidden');
                moderatorLink.classList.remove('hidden');
            } else if (role === 'moderator') {
                adminModSection.classList.remove('hidden');
                adminLink.classList.add('hidden');
                moderatorLink.classList.remove('hidden');
            } else {
                adminModSection.classList.add('hidden');
                adminLink.classList.add('hidden');
                moderatorLink.classList.add('hidden');
            }
        };

        /**
         * trustScore-‡¶ï‡ßá ‡¶®‡¶§‡ßÅ‡¶® ‡¶∏‡ßç‡¶ï‡ßá‡¶≤ ‡¶Ö‡¶®‡ßÅ‡¶Ø‡¶æ‡¶Ø‡¶º‡ßÄ ‡ß´-‡¶∏‡ßç‡¶ü‡¶æ‡¶∞ ‡¶∏‡ßç‡¶ï‡ßá‡¶≤‡ßá ‡¶∞‡ßÇ‡¶™‡¶æ‡¶®‡ßç‡¶§‡¶∞ ‡¶ï‡¶∞‡ßá‡•§
         * 20 = 1 Star, 40 = 2 Stars, 60 = 3 Stars, 80 = 4 Stars, 100 = 5 Stars
         * @param {number} rawScore - ‡¶°‡¶æ‡¶ü‡¶æ‡¶¨‡ßá‡¶ú‡ßá‡¶∞ raw trustScore.
         * @returns {number} - ‡ß´-‡¶∏‡ßç‡¶ü‡¶æ‡¶∞ ‡¶∞‡ßá‡¶ü‡¶ø‡¶Ç (‡ß¶.‡ß¶ ‡¶•‡ßá‡¶ï‡ßá ‡ß´.‡ß¶)‡•§
         */
        function mapScoreToFiveStarRating(rawScore) {
            const score = rawScore || 0;
            const step = 20; // ‡¶™‡ßç‡¶∞‡¶§‡¶ø ‡¶∏‡ßç‡¶ü‡¶æ‡¶∞‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡ß®‡ß¶ ‡¶™‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶ü
            const maxScore = 100;
            const minRating = 1.0;
            const maxRating = 5.0;

            if (score <= 20) return minRating;
            if (score >= maxScore) return maxRating;

            // 20 ‡¶•‡ßá‡¶ï‡ßá 100 ‡¶è‡¶∞ ‡¶Æ‡¶ß‡ßç‡¶Ø‡ßá ‡¶∏‡ßç‡¶ï‡ßã‡¶∞‡¶ï‡ßá 1.0 ‡¶•‡ßá‡¶ï‡ßá 5.0 ‡¶è ‡¶Æ‡ßç‡¶Ø‡¶æ‡¶™ ‡¶ï‡¶∞‡¶æ
            // 20 (1 star) ‡¶•‡ßá‡¶ï‡ßá 100 (5 stars) ‡¶è‡¶∞ ‡¶∞‡ßá‡¶û‡ßç‡¶ú
            const normalizedScore = (score - 20) / (maxScore - 20); // 0 ‡¶•‡ßá‡¶ï‡ßá 1.0
            let rating = normalizedScore * (maxRating - minRating) + minRating;

            // 0.5 ‡¶∏‡ßç‡¶ü‡ßá‡¶™‡ßá ‡¶∞‡¶æ‡¶â‡¶®‡ßç‡¶° ‡¶ï‡¶∞‡¶æ
            rating = Math.round(rating * 2) / 2;
            
            return parseFloat(rating.toFixed(1));
        }


        // üî• ‡¶®‡¶§‡ßÅ‡¶®: ‡¶õ‡ßã‡¶ü ‡¶∏‡ßç‡¶ü‡¶æ‡¶∞ ‡¶∞‡ßá‡¶ü‡¶ø‡¶Ç ‡¶∞‡ßá‡¶®‡ßç‡¶°‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßá
        const renderSmallStarRating = (score) => {
            const roundedScore = Math.round(score * 2) / 2; 
            let html = '';
            for (let i = 1; i <= 5; i++) {
                if (roundedScore >= i) {
                    html += `<i class="fas fa-star small-star filled-star"></i>`;
                } else if (roundedScore === i - 0.5) {
                    html += `<i class="fas fa-star-half-alt small-star filled-star"></i>`;
                } else {
                    html += `<i class="far fa-star small-star filled-star empty-star"></i>`;
                }
            }
            return html;
        };
        
        // ‡¶ü‡¶æ‡¶∏‡ßç‡¶ï ‡¶Æ‡¶æ‡¶≤‡¶ø‡¶ï‡ßá‡¶∞ ‡¶®‡¶æ‡¶Æ ‡¶è‡¶¨‡¶Ç ‡¶™‡ßç‡¶∞‡ßã‡¶´‡¶æ‡¶á‡¶≤ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶≠‡¶æ‡¶ü‡¶æ‡¶∞ HTML ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶´‡¶æ‡¶Ç‡¶∂‡¶®
        const getOwnerInfoHtml = (ownerId) => {
            const profile = userProfileCache[ownerId] || {};
            const name = profile.facebookName || '‡¶Ö‡¶ú‡¶æ‡¶®‡¶æ ‡¶á‡¶â‡¶ú‡¶æ‡¶∞';
            const photoUrl = profile.profilePhotoUrl;
            
            // üî• ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶®: trustScore ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ
            const rawtrustScore = profile.trustScore || 0; 
            
            // üî• ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶®: ‡¶®‡¶§‡ßÅ‡¶® ‡¶≤‡¶ú‡¶ø‡¶ï ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßá ‡¶∞‡ßá‡¶ü‡¶ø‡¶Ç ‡¶ó‡¶£‡¶®‡¶æ
            const ratingScore = mapScoreToFiveStarRating(rawtrustScore); 
            const ratingHtml = renderSmallStarRating(ratingScore);
            
            const initial = name.charAt(0).toUpperCase();
            
            // ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶≠‡¶æ‡¶ü‡¶æ‡¶∞ ‡¶∞‡ßá‡¶®‡ßç‡¶°‡¶æ‡¶∞
            let avatarHtml;
            if (photoUrl) {
                avatarHtml = `<img src="${photoUrl}" alt="${name}" class="w-full h-full object-cover">`;
            } else {
                // ‡¶°‡¶ø‡¶´‡¶≤‡ßç‡¶ü ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶≠‡¶æ‡¶ü‡¶æ‡¶∞ (‡¶®‡¶æ‡¶Æ‡ßá‡¶∞ ‡¶™‡ßç‡¶∞‡¶•‡¶Æ ‡¶Ö‡¶ï‡ßç‡¶∑‡¶∞)
                avatarHtml = `<span class="text-xs">${initial}</span>`;
            }
            
            return `
                <div class="flex items-center space-x-2">
                    <div class="small-avatar">
                        ${avatarHtml}
                    </div>
                    <div>
                        <span class="text-sm font-semibold text-gray-800">${name}</span>
                        <!-- ‡¶¨‡¶ø‡¶∂‡ßç‡¶¨‡¶æ‡¶∏‡¶Ø‡ßã‡¶ó‡ßç‡¶Ø‡¶§‡¶æ ‡¶∞‡ßá‡¶ü‡¶ø‡¶Ç ‡¶¨‡¶æ‡¶∞ -->
                        <div class="small-rating-bar">
                            ${ratingHtml}
                            <span class="text-xs text-gray-500 ml-1">(${ratingScore.toFixed(1)})</span>
                        </div>
                    </div>
                </div>
            `;
        };
        
        // üî• ‡¶á‡¶â‡¶ú‡¶æ‡¶∞‡¶¶‡ßá‡¶∞ ‡¶™‡ßç‡¶∞‡ßã‡¶´‡¶æ‡¶á‡¶≤ ‡¶ï‡ßç‡¶Ø‡¶æ‡¶∂ ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶´‡¶æ‡¶Ç‡¶∂‡¶® (trustScore ‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡¶æ ‡¶π‡¶≤‡ßã)
        const cacheUserProfiles = async (userIds) => {
            const usersToFetch = Array.from(userIds).filter(id => id && !userProfileCache[id]);

            for (const id of usersToFetch) {
                try {
                    const snapshot = await get(ref(rtdb, `users/${id}`));
                    const userData = snapshot.val();
                    if (userData) {
                        // ‡¶∏‡¶Æ‡ßç‡¶™‡ßÇ‡¶∞‡ßç‡¶£ ‡¶™‡ßç‡¶∞‡ßã‡¶´‡¶æ‡¶á‡¶≤ ‡¶°‡ßá‡¶ü‡¶æ ‡¶ï‡ßç‡¶Ø‡¶æ‡¶∂ ‡¶ï‡¶∞‡¶æ ‡¶π‡¶ö‡ßç‡¶õ‡ßá
                        userProfileCache[id] = {
                            facebookName: userData.facebookName || '‡¶Ö‡¶ú‡¶æ‡¶®‡¶æ ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞‡¶ï‡¶æ‡¶∞‡ßÄ',
                            profilePhotoUrl: userData.profilePhotoUrl || null,
                            trustScore: userData.trustScore || userData.trustScore || 0, 
                            role: userData.role || 'user'
                        };
                    } else {
                        userProfileCache[id] = {
                            facebookName: `‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ${id.substring(0, 4)}...`,
                            profilePhotoUrl: null,
                            trustScore: 0,
                            role: 'user'
                        };
                    }
                } catch (error) {
                    console.error(`Error fetching user ${id}:`, error);
                    userProfileCache[id] = {
                         facebookName: `‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ${id.substring(0, 4)}... (‡¶§‡ßç‡¶∞‡ßÅ‡¶ü‡¶ø)`,
                         profilePhotoUrl: null,
                         trustScore: 0,
                         role: 'user'
                    };
                }
            }
        };

        // Cloudinary ‡¶§‡ßá ‡¶õ‡¶¨‡¶ø ‡¶Ü‡¶™‡¶≤‡ßã‡¶°‡ßá‡¶∞ ‡¶´‡¶æ‡¶Ç‡¶∂‡¶® (profile.html ‡¶•‡ßá‡¶ï‡ßá ‡¶Ü‡¶®‡¶æ)
        async function uploadToCloudinary(file) {
            if (!file) {
                console.warn("‡¶ï‡¶®‡¶∏‡ßã‡¶≤ ‡¶≤‡¶ó: Cloudinary ‡¶Ü‡¶™‡¶≤‡ßã‡¶° ‡¶¨‡ßç‡¶Ø‡¶∞‡ßç‡¶•‡•§ ‡¶ï‡ßã‡¶®‡ßã ‡¶´‡¶æ‡¶á‡¶≤ ‡¶™‡¶æ‡¶ì‡ßü‡¶æ ‡¶Ø‡¶æ‡ßü‡¶®‡¶ø‡•§");
                return null;
            }
            
            console.log(`‡¶ï‡¶®‡¶∏‡ßã‡¶≤ ‡¶≤‡¶ó: Cloudinary ‡¶Ü‡¶™‡¶≤‡ßã‡¶° ‡¶∂‡ßÅ‡¶∞‡ßÅ: ‡¶´‡¶æ‡¶á‡¶≤ ‡¶∏‡¶æ‡¶á‡¶ú ${file.size} bytes`);

            const formData = new FormData();
            formData.append('file', file);
            formData.append('upload_preset', CLOUDINARY_UPLOAD_PRESET);
            // ‡¶™‡ßç‡¶∞‡ßÅ‡¶´‡¶ó‡ßÅ‡¶≤‡ßã‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶è‡¶ï‡¶ü‡¶ø ‡¶Ü‡¶≤‡¶æ‡¶¶‡¶æ ‡¶´‡ßã‡¶≤‡ßç‡¶°‡¶æ‡¶∞ ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ ‡¶π‡¶≤‡ßã
            formData.append('folder', `task_proofs/${userId}`); 

            try {
                showNotification("‡¶™‡ßç‡¶∞‡ßÅ‡¶´ ‡¶Ü‡¶™‡¶≤‡ßã‡¶° ‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶π‡¶ö‡ßç‡¶õ‡ßá...", 'info');
                const response = await fetch(CLOUDINARY_URL, {
                    method: 'POST',
                    body: formData
                });

                if (!response.ok) {
                    const errorData = await response.json();
                    console.error("‡¶ï‡¶®‡¶∏‡ßã‡¶≤ ‡¶≤‡¶ó: Cloudinary API ‡¶§‡ßç‡¶∞‡ßÅ‡¶ü‡¶ø:", errorData);
                    throw new Error(`Cloudinary ‡¶Ü‡¶™‡¶≤‡ßã‡¶° ‡¶¨‡ßç‡¶Ø‡¶∞‡ßç‡¶•: ${errorData.error.message || response.statusText}`);
                }

                const data = await response.json();
                console.log("‡¶ï‡¶®‡¶∏‡ßã‡¶≤ ‡¶≤‡¶ó: Cloudinary ‡¶Ü‡¶™‡¶≤‡ßã‡¶° ‡¶∏‡¶´‡¶≤‡•§ URL:", data.secure_url);
                showNotification("‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶®‡¶∂‡¶ü ‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶Ü‡¶™‡¶≤‡ßã‡¶° ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá!", 'success');
                return data.secure_url; // ‡¶Ü‡¶™‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡¶æ ‡¶õ‡¶¨‡¶ø‡¶∞ URL
            } catch (error) {
                console.error("‡¶ï‡¶®‡¶∏‡ßã‡¶≤ ‡¶≤‡¶ó: Cloudinary ‡¶Ü‡¶™‡¶≤‡ßã‡¶° ‡¶ö‡¶≤‡¶æ‡¶ï‡¶æ‡¶≤‡ßÄ‡¶® ‡¶ï‡ßç‡¶Ø‡¶æ‡¶ö‡¶° ‡¶§‡ßç‡¶∞‡ßÅ‡¶ü‡¶ø:", error);
                showNotification(`‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶®‡¶∂‡¶ü ‡¶Ü‡¶™‡¶≤‡ßã‡¶° ‡¶¨‡ßç‡¶Ø‡¶∞‡ßç‡¶• ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá‡•§`, 'error');
                throw error; 
            }
        }
        
        /**
         * ‡¶®‡ßã‡¶ü‡¶ø‡¶∂ ‡¶¨‡ßã‡¶∞‡ßç‡¶°‡ßá‡¶∞ ‡¶â‡¶ö‡ßç‡¶ö‡¶§‡¶æ ‡¶Ö‡¶®‡ßÅ‡¶Ø‡¶æ‡¶Ø‡¶º‡ßÄ ‡¶™‡ßç‡¶∞‡¶ß‡¶æ‡¶® ‡¶ï‡¶®‡ßç‡¶ü‡ßá‡¶®‡ßç‡¶ü ‡¶è‡¶∞ ‡¶Æ‡¶æ‡¶∞‡ßç‡¶ú‡¶ø‡¶® ‡¶∏‡ßá‡¶ü ‡¶ï‡¶∞‡ßá‡•§
         * ‡¶è‡¶ñ‡¶® ‡¶®‡ßã‡¶ü‡¶ø‡¶∂ ‡¶¨‡ßã‡¶∞‡ßç‡¶° ‡¶®‡¶æ ‡¶•‡¶æ‡¶ï‡¶≤‡ßá ‡¶∂‡ßÅ‡¶ß‡ßÅ ‡¶π‡ßá‡¶°‡¶æ‡¶∞ ‡¶è‡¶∞ ‡¶â‡¶ö‡ßç‡¶ö‡¶§‡¶æ ‡¶Ö‡¶®‡ßÅ‡¶Ø‡¶æ‡¶Ø‡¶º‡ßÄ ‡¶Æ‡¶æ‡¶∞‡ßç‡¶ú‡¶ø‡¶® ‡¶∏‡ßá‡¶ü ‡¶ï‡¶∞‡¶¨‡ßá‡•§
         * üî• ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶®: ‡¶Æ‡¶æ‡¶∞‡ßç‡¶ú‡¶ø‡¶® ‡¶ï‡ßç‡¶Ø‡¶æ‡¶≤‡¶ï‡ßÅ‡¶≤‡ßá‡¶∂‡¶® ‡¶≤‡¶ú‡¶ø‡¶ï ‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶∞‡ßç‡¶ú‡¶® ‡¶ï‡¶∞‡¶æ ‡¶π‡¶≤‡ßã‡•§
         */
        const updateMainContentMargin = () => {
            const headerHeight = appHeader.offsetHeight || 64; // h-16 = 4rem = 64px
            const gap = 16; // ‡¶Ö‡¶§‡¶ø‡¶∞‡¶ø‡¶ï‡ßç‡¶§ ‡¶∏‡ßç‡¶™‡ßá‡¶∏ 1rem (16px)

            let requiredMargin = headerHeight; 
            
            // ‡¶®‡ßã‡¶ü‡¶ø‡¶∂ ‡¶¨‡ßã‡¶∞‡ßç‡¶° ‡¶¶‡ßÉ‡¶∂‡ßç‡¶Ø‡¶Æ‡¶æ‡¶® ‡¶π‡¶≤‡ßá ‡¶§‡¶æ‡¶∞ ‡¶™‡ßç‡¶∞‡¶ï‡ßÉ‡¶§ ‡¶â‡¶ö‡ßç‡¶ö‡¶§‡¶æ ‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶™ ‡¶ï‡¶∞‡ßá ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡¶æ ‡¶π‡¶ö‡ßç‡¶õ‡ßá
            if (!globalNoticeBoard.classList.contains('hidden')) {
                // ‡¶®‡ßã‡¶ü‡¶ø‡¶∂ ‡¶¨‡ßã‡¶∞‡ßç‡¶°‡ßá‡¶∞ ‡¶™‡ßç‡¶∞‡¶ï‡ßÉ‡¶§ ‡¶â‡¶ö‡ßç‡¶ö‡¶§‡¶æ (‡¶™‡ßç‡¶Ø‡¶æ‡¶°‡¶ø‡¶Ç ‡¶∏‡¶π)
                const noticeHeight = globalNoticeBoard.offsetHeight; 
                requiredMargin = headerHeight + noticeHeight;
            }
            
            // Header ‡¶¨‡¶æ Header + Notice Board ‡¶è‡¶∞ ‡¶®‡¶ø‡¶ö‡ßá 16px ‡¶è‡¶∞ ‡¶è‡¶ï‡¶ü‡¶ø ‡¶ó‡ßç‡¶Ø‡¶æ‡¶™ ‡¶®‡¶ø‡¶∂‡ßç‡¶ö‡¶ø‡¶§ ‡¶ï‡¶∞‡¶æ
            requiredMargin += gap; 
            
            // Tailwind utilities ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶®‡¶æ ‡¶ï‡¶∞‡ßá ‡¶∏‡¶∞‡¶æ‡¶∏‡¶∞‡¶ø style.marginTop ‡¶∏‡ßá‡¶ü ‡¶ï‡¶∞‡¶æ
            mainContentContainer.style.marginTop = `${requiredMargin / 16}rem`; // px ‡¶ï‡ßá rem ‡¶è ‡¶ï‡¶®‡¶≠‡¶æ‡¶∞‡ßç‡¶ü ‡¶ï‡¶∞‡¶æ

            // ‡¶è‡¶ï‡¶¨‡¶æ‡¶∞ ‡¶Æ‡¶æ‡¶∞‡ßç‡¶ú‡¶ø‡¶® ‡¶∏‡ßá‡¶ü ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶™‡¶∞ ‡¶≤‡ßã‡¶°‡¶æ‡¶∞‡¶ï‡ßá ‡¶≤‡ßÅ‡¶ï‡¶ø‡¶Ø‡¶º‡ßá ‡¶ï‡¶®‡ßç‡¶ü‡ßá‡¶®‡ßç‡¶ü ‡¶¶‡ßá‡¶ñ‡¶æ‡¶®‡ßã
            showContentAndHideLoader();
        };

        // üî• ‡¶®‡¶§‡ßÅ‡¶®: ‡¶®‡ßã‡¶ü‡¶ø‡¶∂ ‡¶∏‡¶æ‡¶á‡¶ï‡ßç‡¶≤‡¶ø‡¶Ç ‡¶≤‡¶ú‡¶ø‡¶ï
        const startNoticeCycling = (notices) => {
            activeNotices = notices.sort((a, b) => a.lastUpdatedAt - b.lastUpdatedAt); // ‡¶™‡ßÅ‡¶∞‡ßã‡¶®‡ßã‡¶ü‡¶æ ‡¶Ü‡¶ó‡ßá ‡¶¶‡ßá‡¶ñ‡¶æ‡¶¨‡ßá
            currentNoticeIndex = 0;

            // ‡¶Ø‡¶¶‡¶ø ‡¶è‡¶ï‡¶ü‡¶ø‡¶∞ ‡¶¨‡ßá‡¶∂‡¶ø ‡¶®‡ßã‡¶ü‡¶ø‡¶∂ ‡¶•‡¶æ‡¶ï‡ßá, ‡¶§‡¶æ‡¶π‡¶≤‡ßá ‡¶∏‡¶æ‡¶á‡¶ï‡ßç‡¶≤‡¶ø‡¶Ç ‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶π‡¶¨‡ßá
            if (activeNotices.length > 1) {
                // ‡¶™‡ßÅ‡¶∞‡¶æ‡¶®‡ßã ‡¶á‡¶®‡ßç‡¶ü‡¶æ‡¶∞‡¶≠‡¶æ‡¶≤ ‡¶™‡¶∞‡¶ø‡¶∑‡ßç‡¶ï‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ
                if (noticeCycleInterval) clearInterval(noticeCycleInterval);
                
                // ‡¶™‡ßç‡¶∞‡¶•‡¶Æ ‡¶®‡ßã‡¶ü‡¶ø‡¶∂ ‡¶™‡ßç‡¶∞‡¶¶‡¶∞‡ßç‡¶∂‡¶®
                displayCurrentNotice(); 
                
                // ‡ß´ ‡¶∏‡ßá‡¶ï‡ßá‡¶®‡ßç‡¶° ‡¶™‡¶∞ ‡¶™‡¶∞ ‡¶®‡ßã‡¶ü‡¶ø‡¶∂ ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶®
                noticeCycleInterval = setInterval(() => {
                    currentNoticeIndex = (currentNoticeIndex + 1) % activeNotices.length;
                    displayCurrentNotice();
                }, NOTICE_DISPLAY_DURATION);

            } else if (activeNotices.length === 1) {
                // ‡¶è‡¶ï‡¶ü‡¶ø ‡¶Æ‡¶æ‡¶§‡ßç‡¶∞ ‡¶®‡ßã‡¶ü‡¶ø‡¶∂ ‡¶•‡¶æ‡¶ï‡¶≤‡ßá ‡¶∏‡¶æ‡¶á‡¶ï‡ßç‡¶≤‡¶ø‡¶Ç ‡¶¨‡¶®‡ßç‡¶ß ‡¶ï‡¶∞‡ßá ‡¶∂‡ßÅ‡¶ß‡ßÅ ‡¶∏‡ßá‡¶ü‡¶ø ‡¶¶‡ßá‡¶ñ‡¶æ‡¶®‡ßã
                if (noticeCycleInterval) clearInterval(noticeCycleInterval);
                currentNoticeIndex = 0;
                displayCurrentNotice(); 
            } else {
                 // ‡¶ï‡ßã‡¶®‡ßã ‡¶®‡ßã‡¶ü‡¶ø‡¶∂ ‡¶®‡¶æ ‡¶•‡¶æ‡¶ï‡¶≤‡ßá ‡¶®‡ßã‡¶ü‡¶ø‡¶∂ ‡¶¨‡ßã‡¶∞‡ßç‡¶° ‡¶≤‡ßÅ‡¶ï‡¶æ‡¶®‡ßã
                 globalNoticeBoard.classList.add('hidden');
            }
            
            // ‡¶®‡ßã‡¶ü‡¶ø‡¶∂‡ßá‡¶∞ ‡¶¶‡ßÉ‡¶∂‡ßç‡¶Ø‡¶Æ‡¶æ‡¶®‡¶§‡¶æ ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶® ‡¶π‡¶ì‡¶Ø‡¶º‡¶æ‡¶Ø‡¶º ‡¶Æ‡¶æ‡¶∞‡ßç‡¶ú‡¶ø‡¶® ‡¶Ü‡¶™‡¶°‡ßá‡¶ü
            // *‡¶è‡¶ñ‡¶æ‡¶®‡ßá setTimeout ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ ‡¶π‡¶≤‡ßã ‡¶Ø‡¶æ‡¶§‡ßá ‡¶¨‡ßç‡¶∞‡¶æ‡¶â‡¶ú‡¶æ‡¶∞ DOM ‡¶∞‡ßá‡¶®‡ßç‡¶°‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶∏‡¶Æ‡¶Ø‡¶º ‡¶™‡¶æ‡¶Ø‡¶º
            // ‡¶è‡¶¨‡¶Ç offsetHeight ‡¶∏‡¶†‡¶ø‡¶ï ‡¶Æ‡¶æ‡¶®‡¶ü‡¶ø ‡¶∞‡¶ø‡¶ü‡¶æ‡¶∞‡ßç‡¶® ‡¶ï‡¶∞‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡ßá‡•§*
            setTimeout(updateMainContentMargin, 50); 
        };
        
        // üî• ‡¶®‡¶§‡ßÅ‡¶®: ‡¶¨‡¶∞‡ßç‡¶§‡¶Æ‡¶æ‡¶® ‡¶®‡ßã‡¶ü‡¶ø‡¶∂‡¶ü‡¶ø DOM-‡¶è ‡¶™‡ßç‡¶∞‡¶¶‡¶∞‡ßç‡¶∂‡¶® ‡¶ï‡¶∞‡¶æ
        const displayCurrentNotice = () => {
            if (activeNotices.length === 0) {
                 globalNoticeBoard.classList.add('hidden');
                 return;
            }
            
            const noticeData = activeNotices[currentNoticeIndex];
            
            noticeTextElement.textContent = noticeData.text;
            
            // ‡¶®‡ßã‡¶ü‡¶ø‡¶∂‡¶¨‡ßã‡¶∞‡ßç‡¶°‡ßá‡¶∞ ‡¶∞‡¶ô ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶®
            globalNoticeBoard.style.backgroundColor = noticeData.backgroundColor || '#ffc107'; 
            globalNoticeBoard.style.color = noticeData.textColor || '#343a40'; 
            
            // ‡¶Ü‡¶á‡¶ï‡¶®‡ßá‡¶∞ ‡¶∞‡¶ô ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶®
            noticeIconElement.style.color = noticeData.textColor || '#343a40'; 
            
            globalNoticeBoard.classList.remove('hidden');
            
            // ‡¶™‡ßç‡¶∞‡¶§‡¶ø‡¶¨‡¶æ‡¶∞ ‡¶®‡ßã‡¶ü‡¶ø‡¶∂ ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶® ‡¶π‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞ ‡¶™‡¶∞ ‡¶Æ‡¶æ‡¶∞‡ßç‡¶ú‡¶ø‡¶® ‡¶®‡¶ø‡¶∂‡ßç‡¶ö‡¶ø‡¶§ ‡¶ï‡¶∞‡¶æ
            // *‡¶è‡¶ñ‡¶æ‡¶®‡ßá‡¶ì setTimeout ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ ‡¶π‡¶≤‡ßã ‡¶Ø‡¶æ‡¶§‡ßá ‡¶®‡¶§‡ßÅ‡¶® ‡¶ü‡ßá‡¶ï‡ßç‡¶∏‡¶ü ‡¶≤‡ßã‡¶° ‡¶π‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞ ‡¶™‡¶∞ 
            // offsetHeight ‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶™‡ßá‡¶∞ ‡¶∏‡ßÅ‡¶Ø‡ßã‡¶ó ‡¶™‡¶æ‡ßü‡•§*
            setTimeout(updateMainContentMargin, 50); 
        };
        
        // üî• ‡¶®‡¶§‡ßÅ‡¶®: ‡¶ó‡ßç‡¶≤‡ßã‡¶¨‡¶æ‡¶≤ ‡¶®‡ßã‡¶ü‡¶ø‡¶∂‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶≤‡¶ø‡¶∏‡ßá‡¶®‡¶æ‡¶∞ (‡¶è‡¶ï‡¶æ‡¶ß‡¶ø‡¶ï ‡¶®‡ßã‡¶ü‡¶ø‡¶∂‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá)
        const listenForGlobalNotice = () => {
            // admin.html ‡¶•‡ßá‡¶ï‡ßá ‡¶®‡ßá‡¶ì‡¶Ø‡¶º‡¶æ ‡¶®‡¶§‡ßÅ‡¶® ‡¶™‡¶æ‡¶•
            const noticesRef = ref(rtdb, `controls/settings/notices`); 

            onValue(noticesRef, (snapshot) => {
                const notices = snapshot.val() || {};
                
                // ‡¶∏‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º ‡¶®‡ßã‡¶ü‡¶ø‡¶∂‡¶ó‡ßÅ‡¶≤‡ßã ‡¶´‡¶ø‡¶≤‡ßç‡¶ü‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ
                const newActiveNotices = Object.keys(notices)
                    .map(key => notices[key])
                    .filter(notice => notice.isActive === true && notice.text);

                if (newActiveNotices.length > 0) {
                    startNoticeCycling(newActiveNotices);
                } else {
                    // ‡¶ï‡ßã‡¶®‡ßã ‡¶∏‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º ‡¶®‡ßã‡¶ü‡¶ø‡¶∂ ‡¶®‡¶æ ‡¶•‡¶æ‡¶ï‡¶≤‡ßá
                    if (noticeCycleInterval) clearInterval(noticeCycleInterval);
                    globalNoticeBoard.classList.add('hidden');
                    updateMainContentMargin(); 
                }
            });
        };


        onAuthStateChanged(auth, async (user) => {
            if (user) {
                userId = user.uid;
                
                // üî•üî• ‡¶ó‡ßç‡¶≤‡ßã‡¶¨‡¶æ‡¶≤ ‡¶®‡ßã‡¶ü‡¶ø‡¶∂‡¶¨‡ßã‡¶∞‡ßç‡¶° ‡¶≤‡¶ø‡¶∏‡ßá‡¶®‡¶æ‡¶∞ ‡¶ö‡¶æ‡¶≤‡ßÅ ‡¶ï‡¶∞‡¶æ ‡¶π‡¶≤‡ßã
                listenForGlobalNotice(); 
                // ******************************************************
                
                const userRef = ref(rtdb, `users/${userId}`);
                onValue(userRef, async (snapshot) => {
                    const userData = snapshot.val() || {};
                    currentUserData = userData; // üî• ‡¶ó‡ßç‡¶≤‡ßã‡¶¨‡¶æ‡¶≤ ‡¶≠‡ßç‡¶Ø‡¶æ‡¶∞‡¶ø‡¶Ø‡¶º‡ßá‡¶¨‡¶≤‡ßá ‡¶∏‡¶Ç‡¶∞‡¶ï‡ßç‡¶∑‡¶£
                    
                    if (snapshot.val() === null) {
                        const initialUserData = {
                            points: 0,
                            facebookName: '‡¶®‡¶§‡ßÅ‡¶® ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞‡¶ï‡¶æ‡¶∞‡ßÄ',
                            tasksCreated: 0,
                            tasksCompleted: 0,
                            tasksRejected: 0,
                            createdAt: Date.now(),
                            lastFacebookName: '',
                            role: 'user', 
                            trustScore: 0,
                            suspension: { isSuspended: false, reason: "", endDate: 0 } // üî• ‡¶®‡¶§‡ßÅ‡¶® ‡¶∏‡¶æ‡¶∏‡¶™‡ßá‡¶®‡¶∂‡¶® ‡¶°‡ßá‡¶ü‡¶æ
                        };
                        try {
                            // ‡¶Ø‡ßá‡¶π‡ßá‡¶§‡ßÅ ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞‡¶ï‡¶æ‡¶∞‡ßÄ ‡¶∏‡¶∞‡ßç‡¶¨‡¶¶‡¶æ Firebase Realtime Database ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶§‡ßá ‡¶¨‡¶≤‡ßá‡¶õ‡ßá‡¶®, ‡¶§‡¶æ‡¶á ‡¶è‡¶ñ‡¶æ‡¶®‡ßá Firestore ‡¶è‡¶∞ ‡¶¨‡¶¶‡¶≤‡ßá Realtime Database ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá‡•§
                            await set(userRef, initialUserData); 
                            return; 
                        } catch (e) {
                            console.error("User initialization failed:", e);
                            showNotification('‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞‡¶ï‡¶æ‡¶∞‡ßÄ ‡¶°‡ßá‡¶ü‡¶æ ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡¶§‡ßá ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶π‡¶ö‡ßç‡¶õ‡ßá‡•§', 'error');
                        }
                    }

                    currentUserPoints = userData.points || 0; 
                    currentUserName = userData.facebookName || '‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞‡¶ï‡¶æ‡¶∞‡ßÄ';
                    userCompletedTasks = userData.completedTasks || {};
                    lastFacebookName = userData.lastFacebookName || '';
                    
                    const userRole = userData.role || 'user'; 
                    const usertrustScore = userData.trustScore || 0; 

                    // ‡¶®‡ßã‡¶ü‡¶ø‡¶∂ ‡¶≤‡¶ø‡¶∏‡ßá‡¶®‡¶æ‡¶∞ ‡¶ö‡¶æ‡¶≤‡ßÅ ‡¶•‡¶æ‡¶ï‡¶≤‡ßá, ‡¶è‡¶ü‡¶ø ‡¶®‡¶ø‡¶ú‡ßá‡¶á ‡¶Æ‡¶æ‡¶∞‡ßç‡¶ú‡¶ø‡¶® ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡¶¨‡ßá‡•§

                    updateDashboardLinks(userRole); 
                    
                    // ‡¶è‡¶ñ‡¶æ‡¶®‡ßá formatPoints ‡¶´‡¶æ‡¶Ç‡¶∂‡¶® ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá
                    document.getElementById('user-points').textContent = formatPoints(currentUserPoints);
                    document.getElementById('total-points').textContent = formatPoints(currentUserPoints);
                    document.getElementById('total-tasks-created').textContent = formatPoints(userData.tasksCreated || 0);
                    document.getElementById('total-tasks-completed').textContent = formatPoints(userData.tasksCompleted || 0);
                    document.getElementById('total-tasks-rejected').textContent = formatPoints(userData.tasksRejected || 0);
                    document.getElementById('user-name-display').textContent = currentUserName;
                    document.getElementById('user-id-display').textContent = user.uid;
                    
                    const profileAvatar = document.getElementById('profile-avatar');
                    profileAvatar.innerHTML = '';
                    if (userData.profilePhotoUrl) {
                        const img = document.createElement('img');
                        img.src = userData.profilePhotoUrl;
                        img.alt = userData.facebookName || '‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞‡¶ï‡¶æ‡¶∞‡ßÄ';
                        img.className = 'w-full h-full object-cover rounded-full';
                        profileAvatar.appendChild(img);
                    } else if (userData.facebookName) {
                        profileAvatar.textContent = userData.facebookName.charAt(0).toUpperCase();
                    }
                    
                    // ‡¶∂‡ßÅ‡¶ß‡ßÅ‡¶Æ‡¶æ‡¶§‡ßç‡¶∞ ‡¶è‡¶ï‡¶¨‡¶æ‡¶∞ ‡¶ü‡¶æ‡¶∏‡ßç‡¶ï ‡¶≤‡¶ø‡¶∏‡ßá‡¶®‡¶æ‡¶∞ ‡¶∏‡ßá‡¶ü ‡¶ï‡¶∞‡¶æ
                    listenForTasks(); 
                });
                
            } else {
                try {
                    await setPersistence(auth, browserSessionPersistence);
                    const initialAuthToken = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : null;
                    if (initialAuthToken) {
                        await signInWithCustomToken(auth, initialAuthToken);
                    } else {
                        await signInAnonymously(auth);
                    }
                } catch (error) {
                    console.error("Authentication failed:", error);
                    showNotification('‡¶≤‡¶ó‡¶á‡¶® ‡¶ï‡¶∞‡¶§‡ßá ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶π‡¶ö‡ßç‡¶õ‡ßá‡•§ ‡¶™‡ßá‡¶ú‡¶ü‡¶ø ‡¶∞‡¶ø‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡ßÅ‡¶®‡•§', 'error');
                    updateMainContentMargin(); // ‡¶¨‡ßç‡¶Ø‡¶∞‡ßç‡¶• ‡¶π‡¶≤‡ßá‡¶ì ‡¶ï‡¶®‡ßç‡¶ü‡ßá‡¶®‡ßç‡¶ü ‡¶¶‡ßá‡¶ñ‡¶æ‡¶®‡ßã‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶Æ‡¶æ‡¶∞‡ßç‡¶ú‡¶ø‡¶® ‡¶∏‡ßá‡¶ü ‡¶ï‡¶∞‡¶æ
                }
            }
        });
        
        /**
         * ‡¶ú‡¶Æ‡¶æ ‡¶¶‡ßá‡¶ì‡¶Ø‡¶º‡¶æ ‡¶™‡ßç‡¶∞‡ßÅ‡¶´‡¶ó‡ßÅ‡¶≤‡ßã‡¶∞ ‡¶§‡¶æ‡¶≤‡¶ø‡¶ï‡¶æ ‡¶™‡ßç‡¶∞‡¶¶‡¶∞‡ßç‡¶∂‡¶® ‡¶ï‡¶∞‡ßá‡•§
         * @param {Array<Object>} proofs - ‡¶á‡¶â‡¶ú‡¶æ‡¶∞‡ßá‡¶∞ ‡¶ú‡¶Æ‡¶æ ‡¶¶‡ßá‡¶ì‡¶Ø‡¶º‡¶æ ‡¶™‡ßç‡¶∞‡ßÅ‡¶´‡¶ó‡ßÅ‡¶≤‡ßã‡¶∞ ‡¶§‡¶æ‡¶≤‡¶ø‡¶ï‡¶æ‡•§
         */
        const displaySubmittedProofs = (proofs) => {
            const submittedProofsList = document.getElementById('submitted-proofs-list');
            submittedProofsList.innerHTML = ''; // ‡¶§‡¶æ‡¶≤‡¶ø‡¶ï‡¶æ ‡¶™‡¶∞‡¶ø‡¶∑‡ßç‡¶ï‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ

            if (proofs.length === 0) {
                submittedProofsList.innerHTML = '<div class="text-center py-6 text-gray-500">‡¶Ü‡¶™‡¶®‡¶ø ‡¶è‡¶ñ‡¶®‡ßã ‡¶ï‡ßã‡¶®‡ßã ‡¶™‡ßç‡¶∞‡ßÅ‡¶´ ‡¶ú‡¶Æ‡¶æ ‡¶¶‡ßá‡¶®‡¶®‡¶ø‡•§</div>';
                return;
            }

            proofs.forEach(proof => {
                // üî• ‡¶∏‡¶Ç‡¶ï‡ßç‡¶∑‡¶ø‡¶™‡ßç‡¶§ ‡¶°‡¶ø‡¶∏‡¶™‡ßç‡¶≤‡ßá: ‡¶∞‡¶ø‡¶≠‡¶ø‡¶â‡¶Ø‡¶º‡¶æ‡¶∞‡ßá‡¶∞ ‡¶®‡¶æ‡¶Æ ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡¶æ ‡¶π‡¶≤‡ßã
                const reviewerProfile = userProfileCache[proof.reviewedBy];
                
                let reviewerDisplay;
                if (proof.reviewedBy) {
                    const name = reviewerProfile ? reviewerProfile.facebookName || '‡¶Ö‡¶ú‡¶æ‡¶®‡¶æ' : '‡¶Ö‡¶ú‡¶æ‡¶®‡¶æ';
                    const role = reviewerProfile ? reviewerProfile.role : 'owner'; // ‡¶Ø‡¶¶‡¶ø ‡¶™‡ßç‡¶∞‡ßã‡¶´‡¶æ‡¶á‡¶≤ ‡¶°‡ßá‡¶ü‡¶æ ‡¶®‡¶æ ‡¶™‡¶æ‡¶ì‡ßü‡¶æ ‡¶Ø‡¶æ‡ßü, ‡¶ß‡¶∞‡ßá ‡¶®‡ßá‡¶ì‡ßü‡¶æ ‡¶π‡¶≤‡ßã ‡¶ü‡¶æ‡¶∏‡ßç‡¶ï ‡¶Æ‡¶æ‡¶≤‡¶ø‡¶ï
                    const roleTag = role === 'admin' ? ' (‡¶è‡¶°‡¶Æ‡¶ø‡¶®)' : (role === 'moderator' ? ' (‡¶Æ‡¶°‡¶æ‡¶∞‡ßá‡¶ü‡¶∞)' : ' (‡¶Æ‡¶æ‡¶≤‡¶ø‡¶ï)');
                    reviewerDisplay = `<p class="text-xs text-gray-600 mt-1"><i class="fas fa-user-shield mr-1 text-indigo-500"></i> ‡¶∞‡¶ø‡¶≠‡¶ø‡¶â ‡¶ï‡¶∞‡ßá‡¶õ‡ßá‡¶®: <span class="font-semibold">${name}</span>${roleTag}</p>`;
                } else {
                    reviewerDisplay = `<p class="text-xs text-gray-600 mt-1"><i class="fas fa-user-shield mr-1 text-indigo-500"></i> ‡¶∞‡¶ø‡¶≠‡¶ø‡¶â: <span class="font-semibold">‡¶Ö‡¶™‡ßá‡¶ï‡ßç‡¶∑‡¶æ ‡¶ï‡¶∞‡¶õ‡ßá</span></p>`;
                }
                
                // üî• ‡¶∏‡¶Ç‡¶ï‡ßç‡¶∑‡¶ø‡¶™‡ßç‡¶§ ‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∏ ‡¶°‡¶ø‡¶∏‡¶™‡ßç‡¶≤‡ßá ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡¶æ
                let statusInfo = '';
                let borderColor = 'border-yellow-500';

                if (proof.status === 'approved') {
                    borderColor = 'border-green-500';
                    statusInfo = `<span class="font-bold text-green-700">+${formatPoints(proof.pointsPerTask)} ‡¶™‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶ü</span>`;
                } else if (proof.status === 'rejected') {
                    borderColor = 'border-red-500';
                    statusInfo = `<span class="font-bold text-red-700">‡¶¨‡¶æ‡¶§‡¶ø‡¶≤</span>`;
                } else {
                    statusInfo = `<span class="font-bold text-yellow-700">‡¶∞‡¶ø‡¶≠‡¶ø‡¶â ‡¶ö‡¶≤‡¶õ‡ßá</span>`;
                }
                
                // ‡¶¨‡¶æ‡¶§‡¶ø‡¶≤‡ßá‡¶∞ ‡¶ï‡¶æ‡¶∞‡¶£ ‡¶Ø‡¶¶‡¶ø ‡¶•‡¶æ‡¶ï‡ßá
                const rejectionReasonHtml = proof.status === 'rejected' && proof.rejectionReason 
                    ? `<div class="bg-red-50 p-3 rounded-lg mt-3 text-red-700 border-l-4 border-red-400 text-xs">
                         <i class="fas fa-exclamation-triangle mr-1"></i> 
                         <span class="font-bold">‡¶ï‡¶æ‡¶∞‡¶£:</span> ${proof.rejectionReason}
                       </div>`
                    : '';

                // üî• ‡¶ï‡¶æ‡¶∞‡ßç‡¶°‡ßá‡¶∞ ‡¶°‡¶ø‡¶ú‡¶æ‡¶á‡¶® ‡¶∏‡¶Ç‡¶ï‡ßç‡¶∑‡¶ø‡¶™‡ßç‡¶§ ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá
                const card = `
                    <div class="app-card p-4 border-l-4 ${borderColor}">
                        
                        <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center">
                            
                            <div class="space-y-1 mb-3 sm:mb-0">
                                <div class="flex items-center space-x-2">
                                    ${getTaskTypeBadge(proof.taskType)}
                                    <span class="text-lg font-bold text-gray-800">${proof.taskType}</span>
                                </div>
                                <p class="text-xs text-gray-500">
                                    <i class="fas fa-user-circle mr-1"></i> 
                                    ‡¶ú‡¶Æ‡¶æ ‡¶¶‡ßá‡¶ì‡ßü‡¶æ ‡¶®‡¶æ‡¶Æ: <span class="font-semibold text-gray-700">${proof.facebookName}</span>
                                </p>
                                <p class="text-xs text-gray-500">
                                    <i class="fas fa-clock mr-1"></i> 
                                    ‡¶∏‡¶Æ‡¶Ø‡¶º: ${formatDate(proof.submittedAt)}
                                </p>
                                ${reviewerDisplay} 
                            </div>

                            <div class="text-right flex flex-col items-end space-y-1">
                                ${statusInfo}
                                </div>
                        </div>
                        
                        ${rejectionReasonHtml}
                    </div>
                `;
                submittedProofsList.insertAdjacentHTML('beforeend', card);
            });
        };


        const listenForTasks = () => {
            if (!userId) return;

            const tasksRef = ref(rtdb, `tasks`);
            
            // üî• ‡¶™‡ßç‡¶∞‡ßÅ‡¶´‡ßá‡¶∞ ‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∏ ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶® ‡¶π‡¶≤‡ßá‡¶ì ‡¶è‡¶á ‡¶≤‡¶ø‡¶∏‡ßá‡¶®‡¶æ‡¶∞ ‡¶Ü‡¶¨‡¶æ‡¶∞ ‡¶´‡¶æ‡¶Ø‡¶º‡¶æ‡¶∞ ‡¶π‡¶¨‡ßá, ‡¶§‡¶æ‡¶á ‡¶ü‡ßç‡¶∞‡¶æ‡¶∏‡ßç‡¶ü ‡¶∏‡ßç‡¶ï‡ßã‡¶∞ ‡¶ö‡ßá‡¶ï ‡¶ï‡¶∞‡¶æ ‡¶π‡¶¨‡ßá
            onValue(tasksRef, async (snapshot) => { 
                const allTasks = snapshot.val() || {};
                const availableTasks = [];
                const submittedProofs = [];
                const requiredUserIds = new Set(); // üî• ‡¶®‡¶§‡ßÅ‡¶® ‡¶∏‡ßá‡¶ü: ‡¶Æ‡¶æ‡¶≤‡¶ø‡¶ï ‡¶ì ‡¶∞‡¶ø‡¶≠‡¶ø‡¶â‡¶Ø‡¶º‡¶æ‡¶∞‡¶¶‡ßá‡¶∞ ‡¶Ü‡¶á‡¶°‡¶ø ‡¶∏‡¶Ç‡¶ó‡ßç‡¶∞‡¶π ‡¶ï‡¶∞‡¶æ
                
                for (const taskId in allTasks) {
                    const task = allTasks[taskId];
                    if (task && task.ownerId) { 
                        
                        // üî• ‡¶ü‡¶æ‡¶∏‡ßç‡¶ï ‡¶Æ‡¶æ‡¶≤‡¶ø‡¶ï‡ßá‡¶∞ ‡¶Ü‡¶á‡¶°‡¶ø ‡¶∏‡¶Ç‡¶ó‡ßç‡¶∞‡¶π ‡¶ï‡¶∞‡¶æ
                        requiredUserIds.add(task.ownerId);

                        const userStatus = userCompletedTasks[taskId];
                        
                        if (task.ownerId !== userId) {
                            
                            let pendingProofCount = 0; 
                            
                            if (task.proofs) {
                                for (const proofId in task.proofs) {
                                    const proof = task.proofs[proofId];
                                    
                                    if (proof.status === 'pending') {
                                        pendingProofCount++; 
                                    }
                                    
                                    if (proof.userId === userId) {
                                        submittedProofs.push({
                                            proofId: proofId,
                                            taskId: taskId,
                                            taskType: task.taskType,
                                            taskLink: task.taskLink,
                                            pointsPerTask: task.pointsPerTask,
                                            ...proof
                                        });
                                        // üî• ‡¶Ø‡¶¶‡¶ø ‡¶∞‡¶ø‡¶≠‡¶ø‡¶â ‡¶π‡¶Ø‡¶º‡ßá ‡¶•‡¶æ‡¶ï‡ßá, ‡¶§‡¶æ‡¶π‡¶≤‡ßá ‡¶∞‡¶ø‡¶≠‡¶ø‡¶â‡¶Ø‡¶º‡¶æ‡¶∞‡ßá‡¶∞ ‡¶Ü‡¶á‡¶°‡¶ø ‡¶∏‡¶Ç‡¶ó‡ßç‡¶∞‡¶π ‡¶ï‡¶∞‡¶æ
                                        if (proof.reviewedBy) {
                                            requiredUserIds.add(proof.reviewedBy);
                                        }
                                    }
                                }
                            }

                            // Old logic for available tasks 
                            let statusToDisplay = userStatus || 'available'; // available or pending

                            if (task.proofs) {
                                const userProofs = Object.keys(task.proofs)
                                    .map(proofId => ({ id: proofId, ...task.proofs[proofId] }))
                                    .filter(p => p.userId === userId)
                                    .sort((a, b) => b.submittedAt - a.submittedAt); 

                                const latestProof = userProofs[0];

                                if(latestProof) {
                                    statusToDisplay = latestProof.status;
                                }
                            }
                            
                            // üî• ‡¶ü‡¶æ‡¶∞‡ßç‡¶ó‡ßá‡¶ü ‡¶™‡ßÇ‡¶∞‡¶£ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá ‡¶ï‡¶ø‡¶®‡¶æ ‡¶§‡¶æ ‡¶Ø‡¶æ‡¶ö‡¶æ‡¶á ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶®‡¶§‡ßÅ‡¶® ‡¶≤‡¶ú‡¶ø‡¶ï:
                            const approvedCount = task.completedCount || 0;
                            const totalProofCount = approvedCount + pendingProofCount;
                            const isTargetReached = totalProofCount >= task.quantity;
                            
                            // ‡¶∂‡¶∞‡ßç‡¶§: ‡¶ü‡¶æ‡¶∏‡ßç‡¶ï ‡¶∏‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º ‡¶π‡¶§‡ßá ‡¶π‡¶¨‡ßá AND ‡¶ü‡¶æ‡¶∞‡ßç‡¶ó‡ßá‡¶ü ‡¶™‡ßÇ‡¶∞‡¶£ ‡¶®‡¶æ ‡¶π‡¶§‡ßá ‡¶π‡¶¨‡ßá AND (‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞‡¶ï‡¶æ‡¶∞‡ßÄ ‡¶π‡¶Ø‡¶º ‡¶∞‡¶ø‡¶ú‡ßá‡¶ï‡ßç‡¶ü ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá OR ‡¶è‡¶ñ‡¶®‡ßã ‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶ï‡¶∞‡ßá‡¶®‡¶ø)
                            if (task.status === 'active' && !isTargetReached && (statusToDisplay === 'rejected' || statusToDisplay === 'available')) {
                                availableTasks.push({ id: taskId, ...task });
                            }
                            
                            // pending ‡¶¨‡¶æ approved ‡¶π‡¶≤‡ßá, ‡¶ü‡¶æ‡¶∏‡ßç‡¶ï‡¶ü‡¶ø ‡¶Ü‡¶∞ Available ‡¶∏‡ßá‡¶ï‡¶∂‡¶®‡ßá ‡¶¶‡ßá‡¶ñ‡¶æ‡¶®‡ßã ‡¶π‡¶¨‡ßá ‡¶®‡¶æ (‡¶ï‡¶æ‡¶∞‡¶£ statusToDisplay 'rejected' ‡¶¨‡¶æ 'available' ‡¶®‡¶Ø‡¶º)
                        }
                    }
                }

                // üî• ‡¶Æ‡¶æ‡¶≤‡¶ø‡¶ï ‡¶ì ‡¶∞‡¶ø‡¶≠‡¶ø‡¶â‡¶Ø‡¶º‡¶æ‡¶∞‡¶¶‡ßá‡¶∞ ‡¶™‡ßç‡¶∞‡ßã‡¶´‡¶æ‡¶á‡¶≤ ‡¶ï‡ßç‡¶Ø‡¶æ‡¶∂ ‡¶ï‡¶∞‡¶æ
                await cacheUserProfiles(requiredUserIds);
                
                // Sort submitted proofs by submission time (latest first)
                submittedProofs.sort((a, b) => b.submittedAt - a.submittedAt); 
                
                displayAvailableTasks(availableTasks);
                displaySubmittedProofs(submittedProofs); 
            });
        };

        const displayAvailableTasks = (tasks) => {
            availableTasksGrid.innerHTML = '';
            if (tasks.length === 0) {
                availableTasksGrid.innerHTML = '<div class="col-span-full text-center py-12 text-gray-500 text-lg">‚ú® ‡¶è‡¶ñ‡¶® ‡¶ï‡ßã‡¶®‡ßã ‡¶â‡¶™‡¶≤‡¶¨‡ßç‡¶ß ‡¶ï‡¶æ‡¶ú ‡¶®‡ßá‡¶á‡•§ ‡¶®‡¶§‡ßÅ‡¶® ‡¶ï‡¶æ‡¶ú‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶Ö‡¶™‡ßá‡¶ï‡ßç‡¶∑‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§</div>';
                return;
            }

            tasks.forEach(task => {
                const completedCount = task.completedCount || 0; 
                
                // üî• ‡¶ü‡¶æ‡¶∏‡ßç‡¶ï ‡¶Æ‡¶æ‡¶≤‡¶ø‡¶ï‡ßá‡¶∞ ‡¶§‡¶•‡ßç‡¶Ø ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡¶æ ‡¶π‡¶≤‡ßã
                const ownerInfoHtml = getOwnerInfoHtml(task.ownerId);

                const taskCard = `
                    <div class="app-card p-5">
                        
                        <div class="mb-3 pb-3 border-b border-gray-100">
                            ${ownerInfoHtml}
                        </div>
                        
                        <div class="flex justify-between items-start mb-4">
                            ${getTaskTypeBadge(task.taskType)}
                            <div class="bg-gradient-to-r from-green-400 to-green-600 text-white font-bold px-3 py-1 rounded-full text-sm shadow-md">
                                + ${formatPoints(task.pointsPerTask)} ‡¶™‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶ü
                            </div>
                        </div>
                        <h4 class="text-xl font-semibold text-gray-800 mb-4">${task.taskType} ‡¶™‡ßç‡¶∞‡¶Ø‡¶º‡ßã‡¶ú‡¶®</h4>
                        <div class="space-y-2 text-sm text-gray-600 mb-6">
                            <p class="flex justify-between items-center">
                                <span><i class="fas fa-bullseye text-blue-500 mr-2"></i> ‡¶Æ‡ßã‡¶ü ‡¶≤‡¶ï‡ßç‡¶∑‡ßç‡¶Ø:</span> 
                                <span class="font-bold text-base">${formatPoints(task.quantity)} ‡¶ü‡¶ø</span>
                            </p>
                            <p class="flex justify-between items-center">
                                <span><i class="fas fa-check-double text-green-500 mr-2"></i> ‡¶∏‡¶Æ‡ßç‡¶™‡¶®‡ßç‡¶® ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá:</span> 
                                <span class="font-bold text-base text-green-600">${formatPoints(completedCount)} ‡¶ü‡¶ø</span>
                            </p>
                            <div class="pt-3 border-t border-gray-100">
                                <span class="block mb-1 text-gray-500 font-medium text-xs">‡¶ü‡¶æ‡¶∏‡ßç‡¶ï ‡¶≤‡¶ø‡¶Ç‡¶ï:</span> 
                                <a href="${task.taskLink}" target="_blank" class="brand-blue-text hover:underline text-sm break-all font-mono">${task.taskLink}</a>
                            </div>
                        </div>
                        <button class="w-full brand-blue text-white py-2.5 px-4 text-base font-bold rounded-lg hover:brightness-110 shadow-md" onclick="openSubmitProofModal('${task.id}')">
                            <i class="fas fa-hand-pointer mr-2"></i> ‡¶ï‡¶æ‡¶ú‡¶ü‡¶ø ‡¶ï‡¶∞‡ßÅ‡¶®
                        </button>
                    </div>
                `;
                availableTasksGrid.insertAdjacentHTML('beforeend', taskCard);
            });
        };

        window.openSubmitProofModal = (taskId) => {
            
            // üî•üî• ‡¶®‡¶§‡ßÅ‡¶® ‡¶∏‡¶æ‡¶∏‡¶™‡ßá‡¶®‡¶∂‡¶® ‡¶ö‡ßá‡¶ï ‡¶≤‡¶ú‡¶ø‡¶ï üî•üî•
            const suspensionDetails = currentUserData.suspension || {};
            const isSuspended = suspensionDetails.isSuspended === true;
            const suspensionEnd = suspensionDetails.endDate || 0;
            
            // ‡¶Ø‡¶¶‡¶ø ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶∏‡¶æ‡¶∏‡¶™‡ßá‡¶®‡ßç‡¶°‡ßá‡¶° ‡¶•‡¶æ‡¶ï‡ßá ‡¶è‡¶¨‡¶Ç ‡¶®‡¶ø‡¶∑‡ßá‡¶ß‡¶æ‡¶ú‡ßç‡¶û‡¶æ‡¶∞ ‡¶∏‡¶Æ‡¶Ø‡¶º ‡¶∂‡ßá‡¶∑ ‡¶®‡¶æ ‡¶π‡¶Ø‡¶º
            if (isSuspended && suspensionEnd > Date.now()) {
                
                // ‡¶Æ‡¶°‡¶æ‡¶≤‡¶ü‡¶ø‡¶§‡ßá ‡¶∏‡¶æ‡¶∏‡¶™‡ßá‡¶®‡¶∂‡¶®‡ßá‡¶∞ ‡¶§‡¶•‡ßç‡¶Ø ‡¶∏‡ßá‡¶ü ‡¶ï‡¶∞‡¶æ
                document.getElementById('suspension-reason').textContent = suspensionDetails.reason || '‡¶®‡¶ø‡¶∞‡ßç‡¶¶‡¶ø‡¶∑‡ßç‡¶ü ‡¶ï‡ßã‡¶®‡ßã ‡¶ï‡¶æ‡¶∞‡¶£ ‡¶¶‡ßá‡¶ì‡ßü‡¶æ ‡¶π‡ßü‡¶®‡¶ø‡•§';
                document.getElementById('suspension-end-date').textContent = formatSuspensionDate(suspensionEnd);

                // ‡¶∏‡¶æ‡¶∏‡¶™‡ßá‡¶®‡¶∂‡¶® ‡¶Æ‡¶°‡¶æ‡¶≤ ‡¶¶‡ßá‡¶ñ‡¶æ‡¶®‡ßã
                suspensionModal.classList.remove('hidden');
                return; // ‡¶Æ‡ßÇ‡¶≤ ‡¶™‡ßç‡¶∞‡ßÅ‡¶´ ‡¶∏‡¶æ‡¶¨‡¶Æ‡¶ø‡¶∂‡¶® ‡¶Æ‡¶°‡¶æ‡¶≤ ‡¶ñ‡ßã‡¶≤‡¶æ ‡¶¨‡¶®‡ßç‡¶ß ‡¶ï‡¶∞‡¶æ
            }
            // üî•üî• ‡¶∏‡¶æ‡¶∏‡¶™‡ßá‡¶®‡¶∂‡¶® ‡¶ö‡ßá‡¶ï ‡¶≤‡¶ú‡¶ø‡¶ï ‡¶∂‡ßá‡¶∑ üî•üî•

            currentTaskId = taskId;
            
            // ‡¶∂‡ßá‡¶∑‡¶¨‡¶æ‡¶∞ ‡¶ú‡¶Æ‡¶æ ‡¶¶‡ßá‡¶ì‡ßü‡¶æ ‡¶°‡ßá‡¶ü‡¶æ ‡¶¶‡¶ø‡ßü‡ßá ‡¶á‡¶®‡¶™‡ßÅ‡¶ü ‡¶´‡¶ø‡¶≤‡ßç‡¶°‡¶ó‡ßÅ‡¶≤‡ßã ‡¶∏‡ßç‡¶¨‡ßü‡¶Ç‡¶ï‡ßç‡¶∞‡¶ø‡ßü‡¶≠‡¶æ‡¶¨‡ßá ‡¶™‡ßÇ‡¶∞‡¶£ ‡¶ï‡¶∞‡¶æ ‡¶π‡¶ö‡ßç‡¶õ‡ßá
            document.getElementById('facebookName').value = lastFacebookName;
            
            // ‡¶´‡¶æ‡¶á‡¶≤ ‡¶á‡¶®‡¶™‡ßÅ‡¶ü ‡¶∞‡¶ø‡¶∏‡ßá‡¶ü ‡¶ï‡¶∞‡¶æ
            document.getElementById('screenshotFile').value = '';
            
            submitProofModal.classList.remove('hidden');
        };

        submitProofForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            
            console.log("‡¶ï‡¶®‡¶∏‡ßã‡¶≤ ‡¶≤‡¶ó: ‡¶™‡ßç‡¶∞‡ßÅ‡¶´ ‡¶ú‡¶Æ‡¶æ ‡¶¶‡ßá‡¶ì‡ßü‡¶æ‡¶∞ ‡¶™‡ßç‡¶∞‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º‡¶æ ‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶π‡¶≤‡ßã‡•§");

            const submitButton = submitProofForm.querySelector('button[type="submit"]');
            submitButton.disabled = true;
            submitButton.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i> ‡¶ú‡¶Æ‡¶æ ‡¶π‡¶ö‡ßç‡¶õ‡ßá...';

            const facebookName = document.getElementById('facebookName').value.trim();
            const screenshotInput = document.getElementById('screenshotFile');
            const screenshotFile = screenshotInput.files[0];
            
            // ‡¶≠‡ßç‡¶Ø‡¶æ‡¶≤‡¶ø‡¶°‡ßá‡¶∂‡¶® ‡¶Ü‡¶™‡¶°‡ßá‡¶ü
            if (!facebookName || !screenshotFile) {
                console.error("‡¶ï‡¶®‡¶∏‡ßã‡¶≤ ‡¶≤‡¶ó: ‡¶≠‡ßç‡¶Ø‡¶æ‡¶≤‡¶ø‡¶°‡ßá‡¶∂‡¶® ‡¶¨‡ßç‡¶Ø‡¶∞‡ßç‡¶•‡•§ ‡¶´‡ßá‡¶∏‡¶¨‡ßÅ‡¶ï ‡¶®‡¶æ‡¶Æ ‡¶¨‡¶æ ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶®‡¶∂‡¶ü ‡¶´‡¶æ‡¶á‡¶≤ ‡¶Ö‡¶®‡ßÅ‡¶™‡¶∏‡ßç‡¶•‡¶ø‡¶§‡•§");
                showNotification('‡¶´‡ßá‡¶∏‡¶¨‡ßÅ‡¶ï ‡¶Ü‡¶á‡¶°‡¶ø‡¶∞ ‡¶®‡¶æ‡¶Æ ‡¶è‡¶¨‡¶Ç ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶®‡¶∂‡¶ü ‡¶´‡¶æ‡¶á‡¶≤ ‡¶Ö‡¶¨‡¶∂‡ßç‡¶Ø‡¶á ‡¶ú‡¶Æ‡¶æ ‡¶¶‡¶ø‡¶§‡ßá ‡¶π‡¶¨‡ßá‡•§', 'error');
                submitButton.disabled = false;
                submitButton.innerHTML = '<i class="fas fa-upload mr-2"></i> ‡¶ú‡¶Æ‡¶æ ‡¶¶‡¶ø‡¶®';
                return;
            }

            if (!currentTaskId || !userId) {
                console.error("‡¶ï‡¶®‡¶∏‡ßã‡¶≤ ‡¶≤‡¶ó: ‡¶≠‡ßç‡¶Ø‡¶æ‡¶≤‡¶ø‡¶°‡ßá‡¶∂‡¶® ‡¶¨‡ßç‡¶Ø‡¶∞‡ßç‡¶•‡•§ ‡¶ü‡¶æ‡¶∏‡ßç‡¶ï ‡¶¨‡¶æ ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶Ü‡¶á‡¶°‡¶ø ‡¶™‡¶æ‡¶ì‡ßü‡¶æ ‡¶Ø‡¶æ‡ßü‡¶®‡¶ø‡•§");
                showNotification('‡¶§‡ßç‡¶∞‡ßÅ‡¶ü‡¶ø: ‡¶ï‡¶æ‡¶ú ‡¶¨‡¶æ ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞‡¶ï‡¶æ‡¶∞‡ßÄ‡¶∞ ‡¶Ü‡¶á‡¶°‡¶ø ‡¶™‡¶æ‡¶ì‡¶Ø‡¶º‡¶æ ‡¶Ø‡¶æ‡¶Ø‡¶º‡¶®‡¶ø‡•§', 'error');
                submitButton.disabled = false;
                submitButton.innerHTML = '<i class="fas fa-upload mr-2"></i> ‡¶ú‡¶Æ‡¶æ ‡¶¶‡¶ø‡¶®';
                return;
            }
            
            let screenshotUrl = ''; // Cloudinary URL ‡¶∏‡¶Ç‡¶∞‡¶ï‡ßç‡¶∑‡¶£‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø

            try {
                // üî• ‡¶®‡¶§‡ßÅ‡¶® ‡¶∏‡ßç‡¶ü‡ßá‡¶™: ‡¶ï‡ßç‡¶≤‡¶æ‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶ü-‡¶∏‡¶æ‡¶á‡¶°‡ßá ‡¶á‡¶Æ‡ßá‡¶ú ‡¶ï‡¶Æ‡ßç‡¶™‡ßç‡¶∞‡ßá‡¶∏ ‡¶ï‡¶∞‡¶æ
                console.log("‡¶ï‡¶®‡¶∏‡ßã‡¶≤ ‡¶≤‡¶ó: ‡¶á‡¶Æ‡ßá‡¶ú ‡¶ï‡¶Æ‡ßç‡¶™‡ßç‡¶∞‡ßá‡¶∏ ‡¶ï‡¶∞‡¶æ ‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶π‡¶ö‡ßç‡¶õ‡ßá...");
                showNotification("‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶®‡¶∂‡¶ü ‡¶Ö‡¶™‡¶ü‡¶ø‡¶Æ‡¶æ‡¶á‡¶ú ‡¶ï‡¶∞‡¶æ ‡¶π‡¶ö‡ßç‡¶õ‡ßá (‡¶´‡¶æ‡¶á‡¶≤ ‡¶õ‡ßã‡¶ü ‡¶ï‡¶∞‡¶æ ‡¶π‡¶ö‡ßç‡¶õ‡ßá)...", 'info');
                // ‡¶õ‡¶¨‡¶ø‡¶∞ ‡¶∏‡¶∞‡ßç‡¶¨‡ßã‡¶ö‡ßç‡¶ö ‡¶™‡ßç‡¶∞‡¶∏‡ßç‡¶• 1024px ‡¶∞‡¶æ‡¶ñ‡¶æ ‡¶π‡¶≤‡ßã ‡¶è‡¶¨‡¶Ç ‡¶ï‡ßã‡¶Ø‡¶º‡¶æ‡¶≤‡¶ø‡¶ü‡¶ø 0.8
                const compressedBlob = await compressImage(screenshotFile, 1024, 0.8);
                
                // Blob ‡¶•‡ßá‡¶ï‡ßá File ‡¶Ö‡¶¨‡¶ú‡ßá‡¶ï‡ßç‡¶ü ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡¶æ
                const compressedFile = new File([compressedBlob], screenshotFile.name, {
                    type: compressedBlob.type,
                    lastModified: Date.now()
                });
                console.log(`‡¶ï‡¶®‡¶∏‡ßã‡¶≤ ‡¶≤‡¶ó: ‡¶á‡¶Æ‡ßá‡¶ú ‡¶ï‡¶Æ‡ßç‡¶™‡ßç‡¶∞‡ßá‡¶∏ ‡¶∏‡¶´‡¶≤‡•§ ‡¶Ü‡¶∏‡¶≤ ‡¶∏‡¶æ‡¶á‡¶ú: ${screenshotFile.size} bytes, ‡¶ï‡¶Æ‡ßç‡¶™‡ßç‡¶∞‡ßá‡¶∏‡¶° ‡¶∏‡¶æ‡¶á‡¶ú: ${compressedFile.size} bytes`);
                
                // üî• Cloudinary ‡¶§‡ßá ‡¶∏‡¶Ç‡¶ï‡ßÅ‡¶ö‡¶ø‡¶§ ‡¶õ‡¶¨‡¶ø ‡¶Ü‡¶™‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡¶æ
                showNotification("‡¶∏‡¶Ç‡¶ï‡ßÅ‡¶ö‡¶ø‡¶§ ‡¶™‡ßç‡¶∞‡ßÅ‡¶´ ‡¶Ü‡¶™‡¶≤‡ßã‡¶° ‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶π‡¶ö‡ßç‡¶õ‡ßá...", 'info');
                screenshotUrl = await uploadToCloudinary(compressedFile); 
                
                if (!screenshotUrl) {
                    throw new Error("Cloudinary ‡¶•‡ßá‡¶ï‡ßá ‡¶ï‡ßã‡¶®‡ßã URL ‡¶™‡¶æ‡¶ì‡¶Ø‡¶º‡¶æ ‡¶Ø‡¶æ‡¶Ø‡¶º‡¶®‡¶ø‡•§");
                }
                
                const proofRef = ref(rtdb, `tasks/${currentTaskId}/proofs`);
                
                // proofData ‡¶§‡ßá screenshotUrl ‡¶∏‡¶Ç‡¶∞‡¶ï‡ßç‡¶∑‡¶£ ‡¶ï‡¶∞‡¶æ ‡¶π‡¶≤‡ßã
                const proofData = {
                    userId: userId,
                    userName: currentUserName,
                    facebookName: facebookName, 
                    screenshotUrl: screenshotUrl, // üî• ‡¶®‡¶§‡ßÅ‡¶®: URL ‡¶∏‡¶Ç‡¶∞‡¶ï‡ßç‡¶∑‡¶£ ‡¶ï‡¶∞‡¶æ ‡¶π‡¶≤‡ßã
                    submittedAt: Date.now(), 
                    status: 'pending' 
                };

                // ‡ßß. ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞‡¶ï‡¶æ‡¶∞‡ßÄ‡¶∞ completedTasks ‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∏ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü
                const userCompletedTaskRef = ref(rtdb, `users/${userId}/completedTasks/${currentTaskId}`);
                console.log("‡¶ï‡¶®‡¶∏‡ßã‡¶≤ ‡¶≤‡¶ó: Firebase: completedTasks ‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∏ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶∂‡ßÅ‡¶∞‡ßÅ...");
                await set(userCompletedTaskRef, 'pending');
                console.log("‡¶ï‡¶®‡¶∏‡ßã‡¶≤ ‡¶≤‡¶ó: Firebase: completedTasks ‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∏ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶∏‡¶´‡¶≤‡•§");

                // ‡ß®. ‡¶™‡ßç‡¶∞‡ßÅ‡¶´ ‡¶°‡ßá‡¶ü‡¶æ tasks/taskId/proofs ‡¶è ‡¶Ø‡ßã‡¶ó
                console.log("‡¶ï‡¶®‡¶∏‡ßã‡¶≤ ‡¶≤‡¶ó: Firebase: ‡¶™‡ßç‡¶∞‡ßÅ‡¶´ ‡¶°‡ßá‡¶ü‡¶æ push ‡¶∂‡ßÅ‡¶∞‡ßÅ...");
                await push(proofRef, proofData);
                console.log("‡¶ï‡¶®‡¶∏‡ßã‡¶≤ ‡¶≤‡¶ó: Firebase: ‡¶™‡ßç‡¶∞‡ßÅ‡¶´ ‡¶°‡ßá‡¶ü‡¶æ push ‡¶∏‡¶´‡¶≤‡•§");

                // ‡ß©. ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞‡¶ï‡¶æ‡¶∞‡ßÄ‡¶∞ lastFacebookName ‡¶Ü‡¶™‡¶°‡ßá‡¶ü
                const userUpdateRef = ref(rtdb, `users/${userId}`);
                console.log("‡¶ï‡¶®‡¶∏‡ßã‡¶≤ ‡¶≤‡¶ó: Firebase: lastFacebookName ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶∂‡ßÅ‡¶∞‡ßÅ...");
                await update(userUpdateRef, {
                    lastFacebookName: facebookName,
                });
                console.log("‡¶ï‡¶®‡¶∏‡ßã‡¶≤ ‡¶≤‡¶ó: Firebase: lastFacebookName ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶∏‡¶´‡¶≤‡•§");

                // *** ‡¶ö‡ßÇ‡¶°‡¶º‡¶æ‡¶®‡ßç‡¶§ ‡¶∏‡¶æ‡¶´‡¶≤‡ßç‡¶Ø ***
                console.log("‡¶ï‡¶®‡¶∏‡ßã‡¶≤ ‡¶≤‡¶ó: ‡¶∏‡¶Æ‡ßç‡¶™‡ßÇ‡¶∞‡ßç‡¶£ ‡¶™‡ßç‡¶∞‡ßÅ‡¶´ ‡¶ú‡¶Æ‡¶æ ‡¶™‡ßç‡¶∞‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º‡¶æ ‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶∏‡¶Æ‡ßç‡¶™‡¶®‡ßç‡¶® ‡¶π‡ßü‡ßá‡¶õ‡ßá‡•§");
                showNotification('‡¶™‡ßç‡¶∞‡ßÅ‡¶´ ‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶ú‡¶Æ‡¶æ ‡¶¶‡ßá‡¶ì‡¶Ø‡¶º‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá! ‡¶è‡¶°‡¶Æ‡¶ø‡¶® ‡¶∞‡¶ø‡¶≠‡¶ø‡¶â ‡¶ï‡¶∞‡¶¨‡ßá‡•§', 'success');
                submitProofForm.reset();
                closeModal('submit-proof-modal');

            } catch (error) {
                // *** ‡¶ö‡ßÇ‡¶°‡¶º‡¶æ‡¶®‡ßç‡¶§ ‡¶¨‡ßç‡¶Ø‡¶∞‡ßç‡¶•‡¶§‡¶æ ***
                console.error("‡¶ï‡¶®‡¶∏‡ßã‡¶≤ ‡¶≤‡¶ó: ‡¶™‡ßç‡¶∞‡ßÅ‡¶´ ‡¶ú‡¶Æ‡¶æ ‡¶™‡ßç‡¶∞‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º‡¶æ‡¶Ø‡¶º ‡¶è‡¶ï‡¶ü‡¶ø ‡¶ó‡ßÅ‡¶∞‡ßÅ‡¶§‡¶∞ ‡¶§‡ßç‡¶∞‡ßÅ‡¶ü‡¶ø ‡¶π‡ßü‡ßá‡¶õ‡ßá:", error.message);
                // Cloudinary error already handled by showNotification inside uploadToCloudinary
                if (!error.message.includes('Cloudinary')) { 
                    showNotification(`‡¶™‡ßç‡¶∞‡ßÅ‡¶´ ‡¶ú‡¶Æ‡¶æ ‡¶¶‡¶ø‡¶§‡ßá ‡¶¨‡ßç‡¶Ø‡¶∞‡ßç‡¶•: ${error.message}`, 'error');
                }
            } finally {
                console.log("‡¶ï‡¶®‡¶∏‡ßã‡¶≤ ‡¶≤‡¶ó: ‡¶™‡ßç‡¶∞‡ßÅ‡¶´ ‡¶ú‡¶Æ‡¶æ ‡¶¶‡ßá‡¶ì‡ßü‡¶æ‡¶∞ ‡¶™‡ßç‡¶∞‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º‡¶æ ‡¶∏‡¶Æ‡¶æ‡¶™‡ßç‡¶§‡•§");
                submitButton.disabled = false;
                submitButton.innerHTML = '<i class="fas fa-upload mr-2"></i> ‡¶ú‡¶Æ‡¶æ ‡¶¶‡¶ø‡¶®';
            }
        });

        window.logout = logout;
        window.closeModal = (modalId) => {
            document.getElementById(modalId).classList.add('hidden');
        };

        window.onclick = function(event) {
            if (event.target === submitProofModal || event.target === menuBackdrop || event.target === suspensionModal) {
                submitProofModal.classList.add('hidden');
                suspensionModal.classList.add('hidden');
                // ‡¶Æ‡ßá‡¶®‡ßÅ ‡¶ñ‡ßã‡¶≤‡¶æ ‡¶•‡¶æ‡¶ï‡¶≤‡ßá ‡¶¨‡¶®‡ßç‡¶ß ‡¶ï‡¶∞‡ßá ‡¶¶‡ßá‡¶ì‡¶Ø‡¶º‡¶æ
                if (menuBackdrop.classList.contains('open')) {
                    window.toggleMenu();
                }
            }
        };
    </script>
</body>
</html>

