<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡¶è‡¶°‡¶Æ‡¶ø‡¶® ‡¶°‡ßç‡¶Ø‡¶æ‡¶∂‡¶¨‡ßã‡¶∞‡ßç‡¶°</title>
    <script src="https://cdn.tailwindcss.com"> </script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Hind+Siliguri:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        /* ‡¶´‡¶®‡ßç‡¶ü ‡¶ì ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï‡¶ó‡ßç‡¶∞‡¶æ‡¶â‡¶®‡ßç‡¶° ‡¶ï‡¶æ‡¶∏‡ßç‡¶ü‡¶Æ‡¶æ‡¶á‡¶ú‡ßá‡¶∂‡¶® */
        body {
            font-family: 'Hind Siliguri', Inter, sans-serif;
            background-color: #f7f9fc;
        }

        /* ‡¶¨‡ßç‡¶∞‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶°‡¶ø‡¶Ç ‡¶ï‡¶æ‡¶≤‡¶æ‡¶∞ - ‡¶Ü‡¶ß‡ßÅ‡¶®‡¶ø‡¶ï ‡¶®‡ßÄ‡¶≤ */
        .brand-blue {
            background-color: #0d6efd;
            transition: background-color 0.2s;
        }

        .brand-blue:hover {
            background-color: #0b5ed7;
        }

        .brand-blue-text {
            color: #0d6efd;
        }

        /* ‡¶ï‡¶æ‡¶∞‡ßç‡¶° ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤ - ‡¶è‡¶≤‡¶ø‡¶≠‡ßá‡¶ü‡ßá‡¶° ‡¶≤‡ßÅ‡¶ï */
        .app-card {
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            border: 1px solid #e9ecef;
            transition: box-shadow 0.3s, transform 0.2s;
        }

        .app-card:hover {
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.08);
            transform: translateY(-1px);
        }

        /* ‡¶ü‡ßá‡¶¨‡¶ø‡¶≤ ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤‡¶ø‡¶Ç */
        .app-table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0;
            border: 1px solid #e9ecef;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }

        .app-table th, .app-table td {
            padding: 1rem;
            border-bottom: 1px solid #e9ecef;
            white-space: nowrap; 
        }

        .app-table thead th {
            background-color: #f8f9fa;
            color: #495057;
            font-weight: 600;
            text-align: left;
            text-transform: uppercase;
            font-size: 0.875rem;
        }

        .app-table tbody tr:last-child td {
            border-bottom: none;
        }
        
        /* ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞‡¶ï‡¶æ‡¶∞‡ßÄ‡¶∞ ‡¶¨‡¶ø‡¶∏‡ßç‡¶§‡¶æ‡¶∞‡¶ø‡¶§ ‡¶°‡ßç‡¶∞‡¶™‡¶°‡¶æ‡¶â‡¶® ‡¶∞‡ßã */
        .user-details-row td {
            padding: 0 !important;
            border-bottom: none !important;
        }
        .user-details-content {
            padding: 1.5rem;
            background-color: #fcfdff;
            border-top: 1px solid #e9ecef;
            width: 100%;
        }

        /* ‡¶ï‡¶æ‡¶∏‡ßç‡¶ü‡¶Æ ‡¶Æ‡¶°‡¶æ‡¶≤ ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤ */
        .custom-modal {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.4);
            z-index: 1000;
            display: none;
            justify-content: center;
            align-items: center;
            padding: 1rem;
            transition: opacity 0.3s ease;
        }
        
        .custom-modal-content {
            background: white;
            padding: 2rem;
            border-radius: 12px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            width: 90%;
            max-width: 450px; 
            text-align: center;
            animation: zoomIn 0.3s ease-out;
        }
        
        .custom-modal-actions {
            margin-top: 1.5rem;
            display: flex;
            justify-content: space-around;
            gap: 1rem;
        }
        
        .custom-modal-btn {
            flex: 1;
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 9999px;
            cursor: pointer;
            font-weight: 600;
            font-size: 0.9rem;
            transition: background-color 0.3s;
        }
        
        /* ‡¶∞‡¶ø‡¶™‡ßã‡¶∞‡ßç‡¶ü ‡¶ï‡¶æ‡¶∞‡ßç‡¶° ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤ */
        .report-card {
            background: #fff;
            padding: 1rem;
            border-radius: 8px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.05);
            border-left: 5px solid #f59e0b;
        }
        
        .report-card.bug { border-left-color: #ef4444; }
        .report-card.suggestion { border-left-color: #3b82f6; }
        .report-card.security { border-left-color: #10b981; }
    </style>
</head>
<body>
    
    <div class="container max-w-6xl mx-auto p-4 md:p-8">
        <header class="app-card p-6 text-center mb-8">
            <h1 class="text-3xl font-bold text-gray-800 flex items-center justify-center gap-4">
                <i class="fas fa-tools brand-blue-text"></i>
                ‡¶è‡¶°‡¶Æ‡¶ø‡¶® ‡¶°‡ßç‡¶Ø‡¶æ‡¶∂‡¶¨‡ßã‡¶∞‡ßç‡¶°
            </h1>
        </header>
        
        <div class="app-card p-6">
            <div class="flex flex-col md:flex-row justify-between items-center mb-6 border-b pb-4">
                <h2 class="text-xl font-bold text-gray-800 mb-4 md:mb-0">‡¶¨‡ßç‡¶Ø‡¶¨‡¶∏‡ßç‡¶•‡¶æ‡¶™‡¶®‡¶æ ‡¶™‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶≤</h2>
                <div class="tabs flex flex-wrap gap-2 md:gap-4">
                    <button class="tab px-4 py-2 rounded-full text-sm font-semibold transition-colors duration-200 bg-blue-600 text-white active" data-tab="users">
                        <i class="fas fa-users mr-2"></i> ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞‡¶ï‡¶æ‡¶∞‡ßÄ
                    </button>
                    <button class="tab px-4 py-2 rounded-full text-sm font-semibold transition-colors duration-200 bg-gray-200 text-gray-700 hover:bg-gray-300" data-tab="tasks">
                        <i class="fas fa-list-check mr-2"></i> ‡¶ï‡¶æ‡¶ú‡¶∏‡¶Æ‡ßÇ‡¶π
                    </button>
                    <button class="tab px-4 py-2 rounded-full text-sm font-semibold transition-colors duration-200 bg-gray-200 text-gray-700 hover:bg-gray-300" data-tab="proofs">
                        <i class="fas fa-file-circle-check mr-2"></i> ‡¶™‡ßç‡¶∞‡ßÅ‡¶´ ‡¶∞‡¶ø‡¶≠‡¶ø‡¶â
                    </button>
                    <!-- ‡¶∞‡¶ø‡¶™‡ßã‡¶∞‡ßç‡¶ü ‡¶ü‡ßç‡¶Ø‡¶æ‡¶¨ -->
                    <button class="tab px-4 py-2 rounded-full text-sm font-semibold transition-colors duration-200 bg-gray-200 text-gray-700 hover:bg-gray-300" data-tab="reports">
                        <i class="fas fa-bug mr-2"></i> ‡¶∞‡¶ø‡¶™‡ßã‡¶∞‡ßç‡¶ü
                    </button>
                    <!-- ‡¶∏‡ßá‡¶ü‡¶ø‡¶Ç‡¶∏ ‡¶ü‡ßç‡¶Ø‡¶æ‡¶¨ -->
                    <button class="tab px-4 py-2 rounded-full text-sm font-semibold transition-colors duration-200 bg-gray-200 text-gray-700 hover:bg-gray-300" data-tab="settings">
                        <i class="fas fa-cog mr-2"></i> ‡¶∏‡ßá‡¶ü‡¶ø‡¶Ç‡¶∏
                    </button>
                </div>
            </div>

            <div id="users" class="tab-content active">
                <h3 class="text-2xl font-semibold text-gray-700 mb-4">‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞‡¶ï‡¶æ‡¶∞‡ßÄ ‡¶§‡¶æ‡¶≤‡¶ø‡¶ï‡¶æ</h3>
                <div class="overflow-x-auto">
                    <table class="app-table">
                        <thead>
                            <tr>
                                <th>‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ID</th>
                                <th>‡¶®‡¶æ‡¶Æ</th>
                                <th>‡¶á‡¶Æ‡ßá‡¶á‡¶≤</th> <!-- ‡¶®‡¶§‡ßÅ‡¶® ‡¶ï‡¶≤‡¶æ‡¶Æ -->
                                <th>‡¶™‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶ü</th>
                                <th>‡¶∞‡ßã‡¶≤</th>
                                <th class="w-1/4">‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶∂‡¶®</th> <!-- ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶∂‡¶® ‡¶ü‡¶ó‡¶≤ ‡¶¨‡¶æ‡¶ü‡¶® ‡¶•‡¶æ‡¶ï‡¶¨‡ßá -->
                            </tr>
                        </thead>
                        <tbody id="users-table-body">
                            </tbody>
                    </table>
                </div>
            </div>

            <div id="tasks" class="tab-content hidden">
                <h3 class="text-2xl font-semibold text-gray-700 mb-4 flex justify-between items-center">
                    ‡¶ï‡¶æ‡¶ú‡¶∏‡¶Æ‡ßÇ‡¶π ‡¶§‡¶æ‡¶≤‡¶ø‡¶ï‡¶æ
                    <!-- ‡¶ü‡¶æ‡¶∏‡ßç‡¶ï ‡¶§‡ßà‡¶∞‡¶ø‡¶∞ ‡¶¨‡¶æ‡¶ü‡¶® -->
                    <button class="brand-blue text-white px-4 py-2 rounded-lg text-sm font-bold hover:brightness-110 transition duration-200" onclick="openTaskModal(null)">
                        <i class="fas fa-plus mr-2"></i> ‡¶®‡¶§‡ßÅ‡¶® ‡¶ü‡¶æ‡¶∏‡ßç‡¶ï ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡ßÅ‡¶®
                    </button>
                </h3>
                <div class="overflow-x-auto">
                    <table class="app-table">
                        <thead>
                            <tr>
                                <th>‡¶Ü‡¶á‡¶°‡¶ø</th>
                                <th>‡¶™‡ßç‡¶∞‡¶ï‡¶æ‡¶∞</th>
                                <th>‡¶≤‡¶ø‡¶Ç‡¶ï</th>
                                <th>‡¶™‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶ü</th>
                                <th>‡¶Ö‡¶¨‡¶∏‡ßç‡¶•‡¶æ</th>
                                <th>‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶∂‡¶®</th>
                            </tr>
                        </thead>
                        <tbody id="tasks-table-body">
                            </tbody>
                    </table>
                </div>
            </div>
            
            <div id="proofs" class="tab-content hidden">
                <h3 class="text-2xl font-semibold text-gray-700 mb-4">‡¶™‡¶∞‡ßç‡¶Ø‡¶æ‡¶≤‡ßã‡¶ö‡¶®‡¶æ ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶™‡ßç‡¶∞‡ßÅ‡¶´</h3>
                <div id="proofs-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <!-- Proofs will be rendered here -->
                </div>
            </div>
            
            <!-- ‡¶∞‡¶ø‡¶™‡ßã‡¶∞‡ßç‡¶ü ‡¶ï‡¶®‡ßç‡¶ü‡ßá‡¶®‡ßç‡¶ü ‡¶∏‡ßá‡¶ï‡¶∂‡¶® -->
            <div id="reports" class="tab-content hidden">
                <h3 class="text-2xl font-semibold text-gray-700 mb-4">‡¶™‡¶∞‡ßç‡¶Ø‡¶æ‡¶≤‡ßã‡¶ö‡¶®‡¶æ ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶∞‡¶ø‡¶™‡ßã‡¶∞‡ßç‡¶ü</h3>
                <div id="reports-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <!-- Reports will be rendered here -->
                </div>
            </div>
            <!-- ‡¶∞‡¶ø‡¶™‡ßã‡¶∞‡ßç‡¶ü ‡¶ï‡¶®‡ßç‡¶ü‡ßá‡¶®‡ßç‡¶ü ‡¶∏‡ßá‡¶ï‡¶∂‡¶® ‡¶∂‡ßá‡¶∑ -->

            <!-- ‡¶∏‡ßá‡¶ü‡¶ø‡¶Ç‡¶∏ ‡¶ï‡¶®‡ßç‡¶ü‡ßá‡¶®‡ßç‡¶ü ‡¶∏‡ßá‡¶ï‡¶∂‡¶® -->
            <div id="settings" class="tab-content hidden">
                <h3 class="text-2xl font-semibold text-gray-700 mb-6 text-center">‡¶ó‡ßç‡¶≤‡ßã‡¶¨‡¶æ‡¶≤ ‡¶ï‡¶®‡ßç‡¶ü‡ßç‡¶∞‡ßã‡¶≤ ‡¶∏‡ßá‡¶ü‡¶ø‡¶Ç‡¶∏</h3>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">

                    <!-- üî• ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶ø‡¶§: ‡¶è‡¶ï‡¶æ‡¶ß‡¶ø‡¶ï ‡¶ó‡ßç‡¶≤‡ßã‡¶¨‡¶æ‡¶≤ ‡¶®‡ßã‡¶ü‡¶ø‡¶∂ ‡¶∏‡ßá‡¶ü‡¶ø‡¶Ç‡¶∏ -->
                    <div class="p-6 app-card space-y-4 col-span-1 md:col-span-2">
                        <div class="flex flex-wrap justify-between items-center border-b pb-3 mb-4 gap-4">
                            <h4 class="text-xl font-bold text-gray-800 flex items-center gap-2">
                                <i class="fas fa-bullhorn text-red-600"></i> ‡¶ó‡ßç‡¶≤‡ßã‡¶¨‡¶æ‡¶≤ ‡¶®‡ßã‡¶ü‡¶ø‡¶∂‡¶∏‡¶Æ‡ßÇ‡¶π (‡¶è‡¶ï‡¶æ‡¶ß‡¶ø‡¶ï)
                            </h4>
                            <button id="addNewNoticeBtn" class="brand-blue text-white px-4 py-2 rounded-lg text-sm font-bold hover:brightness-110 transition duration-200" onclick="openNoticeModal(null)">
                                <i class="fas fa-plus mr-2"></i> ‡¶®‡¶§‡ßÅ‡¶® ‡¶®‡ßã‡¶ü‡¶ø‡¶∂ ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®
                            </button>
                        </div>
                        
                        <div id="notices-list" class="space-y-3">
                            <!-- Notices will be rendered here by JS -->
                        </div>
                        <p id="notice-list-status" class="text-center text-sm mt-2 text-gray-500 hidden"></p>
                    </div>

                    
                    <!-- ‡¶∞‡ßá‡¶´‡¶æ‡¶∞‡ßá‡¶≤ ‡¶¨‡ßã‡¶®‡¶æ‡¶∏ ‡¶∏‡ßá‡¶ü‡¶ø‡¶Ç‡¶∏ -->
                    <div class="p-6 app-card space-y-4">
                        <h4 class="text-xl font-bold text-gray-800 border-b pb-3 mb-4 flex items-center gap-2"><i class="fas fa-share-alt brand-blue-text"></i> ‡¶∞‡ßá‡¶´‡¶æ‡¶∞‡ßá‡¶≤ ‡¶¨‡ßã‡¶®‡¶æ‡¶∏ ‡¶∏‡ßá‡¶ü‡¶ø‡¶Ç‡¶∏</h4>
                        
                        <!-- referredUser ‡¶á‡¶®‡¶™‡ßÅ‡¶ü -->
                        <div>
                            <label for="referredBonus" class="block text-sm font-medium text-gray-700 mb-2">
                                ‡¶∞‡ßá‡¶´‡¶æ‡¶∞‡ßç‡¶° ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶¨‡ßã‡¶®‡¶æ‡¶∏ (referredUser):
                            </label>
                            <input type="number" id="referredBonus" min="0" class="w-full p-3 border border-blue-300 rounded-lg focus:ring-blue-500 focus:border-blue-500" placeholder="‡¶®‡¶§‡ßÅ‡¶® ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶ï‡¶§ ‡¶™‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶ü ‡¶™‡¶æ‡¶¨‡ßá">
                        </div>

                        <!-- refereeUser ‡¶á‡¶®‡¶™‡ßÅ‡¶ü -->
                        <div>
                            <label for="refereeBonus" class="block text-sm font-medium text-gray-700 mb-2">
                                ‡¶∞‡ßá‡¶´‡¶æ‡¶∞‡¶ø ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶¨‡ßã‡¶®‡¶æ‡¶∏ (refereeUser):
                            </label>
                            <input type="number" id="refereeBonus" min="0" class="w-full p-3 border border-green-300 rounded-lg focus:ring-green-500 focus:border-green-500" placeholder="‡¶Ø‡ßá ‡¶∞‡ßá‡¶´‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßá‡¶õ‡ßá ‡¶∏‡ßá ‡¶ï‡¶§ ‡¶™‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶ü ‡¶™‡¶æ‡¶¨‡ßá">
                        </div>

                        <button id="saveReferralSettingsBtn" class="w-full brand-blue text-white py-3 rounded-lg font-bold hover:brightness-110 transition duration-200">
                            <i class="fas fa-save mr-2"></i> ‡¶∞‡ßá‡¶´‡¶æ‡¶∞‡ßá‡¶≤ ‡¶∏‡ßá‡¶ü‡¶ø‡¶Ç‡¶∏ ‡¶∏‡ßá‡¶≠ ‡¶ï‡¶∞‡ßÅ‡¶®
                        </button>
                        <p id="referral-status" class="text-center text-sm mt-2 text-gray-500 hidden"></p>
                    </div>

                    <!-- ‡¶™‡ßç‡¶∞‡ßã‡¶°‡¶æ‡¶ï‡ßç‡¶ü ‡¶™‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶ü ‡¶∏‡ßá‡¶ü‡¶ø‡¶Ç‡¶∏ -->
                    <div class="p-6 app-card space-y-4">
                        <h4 class="text-xl font-bold text-gray-800 border-b pb-3 mb-4 flex items-center gap-2"><i class="fas fa-tags text-yellow-600"></i> ‡¶ü‡¶æ‡¶∏‡ßç‡¶ï ‡¶™‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶ü ‡¶∏‡ßá‡¶ü‡¶ø‡¶Ç‡¶∏ (‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞ ‡¶™‡ßá‡¶ú)</h4>
                        
                        <p class="text-gray-600 text-sm mb-4">
                            ‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞ ‡¶§‡ßà‡¶∞‡¶ø‡¶∞ ‡¶∏‡¶Æ‡¶Ø‡¶º ‡¶™‡ßç‡¶∞‡¶§‡¶ø‡¶ü‡¶ø ‡¶ü‡¶æ‡¶∏‡ßç‡¶ï‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶°‡¶ø‡¶´‡¶≤‡ßç‡¶ü ‡¶™‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶ü ‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶®‡¶ø‡¶∞‡ßç‡¶ß‡¶æ‡¶∞‡¶£ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§ ‡¶°‡ßá‡¶ü‡¶æ‡¶¨‡ßá‡¶ú ‡¶™‡¶æ‡¶•: <code>controls/productPoints</code>
                        </p>
                        
                        <!-- Product Points Input Group -->
                        <div id="product-points-inputs" class="space-y-4">
                            
                            <!-- 1. react -->
                            <div>
                                <label for="react_points" class="block text-sm font-medium text-gray-700 mb-2 flex items-center gap-2">
                                    <i class="fas fa-thumbs-up text-blue-600"></i> ‡¶∞‡¶ø‡¶Ø‡¶º‡ßá‡¶ï‡ßç‡¶ü ‡¶ü‡¶æ‡¶∏‡ßç‡¶ï ‡¶™‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶ü (react):
                                </label>
                                <input type="number" id="react_points" min="0" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-yellow-500 focus:border-yellow-500" placeholder="‡¶∞‡¶ø‡¶Ø‡¶º‡ßá‡¶ï‡ßç‡¶ü ‡¶ü‡¶æ‡¶∏‡ßç‡¶ï‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶™‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶ü">
                            </div>

                            <!-- 2. Comment -->
                            <div>
                                <label for="comment_points" class="block text-sm font-medium text-gray-700 mb-2 flex items-center gap-2">
                                    <i class="fas fa-comment text-indigo-600"></i> ‡¶ï‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶ü‡¶æ‡¶∏‡ßç‡¶ï ‡¶™‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶ü (comment):
                                </label>
                                <input type="number" id="comment_points" min="0" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-yellow-500 focus:border-yellow-500" placeholder="‡¶ï‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶ü‡¶æ‡¶∏‡ßç‡¶ï‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶™‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶ü">
                            </div>

                            <!-- 3. Follow -->
                            <div>
                                <label for="follow_points" class="block text-sm font-medium text-gray-700 mb-2 flex items-center gap-2">
                                    <i class="fas fa-user-plus text-purple-600"></i> ‡¶´‡¶≤‡ßã ‡¶ü‡¶æ‡¶∏‡ßç‡¶ï ‡¶™‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶ü (follow):
                                </label>
                                <input type="number" id="follow_points" min="0" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-yellow-500 focus:border-yellow-500" placeholder="‡¶´‡¶≤‡ßã ‡¶ü‡¶æ‡¶∏‡ßç‡¶ï‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶™‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶ü">
                            </div>

                            <!-- 4. Share -->
                            <div>
                                <label for="share_points" class="block text-sm font-medium text-gray-700 mb-2 flex items-center gap-2">
                                    <i class="fas fa-share-alt text-cyan-600"></i> ‡¶∂‡ßá‡¶Ø‡¶º‡¶æ‡¶∞ ‡¶ü‡¶æ‡¶∏‡ßç‡¶ï ‡¶™‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶ü (share):
                                </label>
                                <input type="number" id="share_points" min="0" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-yellow-500 focus:border-yellow-500" placeholder="‡¶∂‡ßá‡¶Ø‡¶º‡¶æ‡¶∞ ‡¶ü‡¶æ‡¶∏‡ßç‡¶ï‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶™‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶ü">
                            </div>

                            <!-- 5. Group Join -->
                            <div>
                                <label for="group_join_points" class="block text-sm font-medium text-gray-700 mb-2 flex items-center gap-2">
                                    <i class="fas fa-users text-teal-600"></i> ‡¶ó‡ßç‡¶∞‡ßÅ‡¶™ ‡¶ú‡¶Ø‡¶º‡ßá‡¶® ‡¶ü‡¶æ‡¶∏‡ßç‡¶ï ‡¶™‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶ü (groupJoin):
                                </label>
                                <input type="number" id="group_join_points" min="0" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-yellow-500 focus:border-yellow-500" placeholder="‡¶ó‡ßç‡¶∞‡ßÅ‡¶™ ‡¶ú‡¶Ø‡¶º‡ßá‡¶® ‡¶ü‡¶æ‡¶∏‡ßç‡¶ï‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶™‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶ü">
                            </div>

                        </div>

                        <button id="saveProductPointsBtn" class="w-full bg-yellow-600 text-white py-3 rounded-lg font-bold hover:bg-yellow-700 transition duration-200">
                            <i class="fas fa-save mr-2"></i> ‡¶ü‡¶æ‡¶∏‡ßç‡¶ï ‡¶™‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶ü ‡¶∏‡ßá‡¶≠ ‡¶ï‡¶∞‡ßÅ‡¶®
                        </button>
                        <p id="product-status" class="text-center text-sm mt-2 text-gray-500 hidden"></p>
                    </div>
                </div>
            </div>
            <!-- ‡¶∏‡ßá‡¶ü‡¶ø‡¶Ç‡¶∏ ‡¶ï‡¶®‡ßç‡¶ü‡ßá‡¶®‡ßç‡¶ü ‡¶∏‡ßá‡¶ï‡¶∂‡¶® ‡¶∂‡ßá‡¶∑ -->

        </div>
    </div>
    
    <!-- ‡¶ï‡¶æ‡¶∏‡ßç‡¶ü‡¶Æ ‡¶ï‡¶®‡¶´‡¶æ‡¶∞‡ßç‡¶Æ‡ßá‡¶∂‡¶® ‡¶Æ‡¶°‡¶æ‡¶≤ -->
    <div id="admin-modal" class="custom-modal">
        <div class="custom-modal-content">
            <h3 class="text-xl font-bold mb-2 text-gray-800" id="modal-title">‡¶®‡¶ø‡¶∂‡ßç‡¶ö‡¶ø‡¶§ ‡¶ï‡¶∞‡ßÅ‡¶®</h3>
            <p class="text-gray-600 mb-4" id="modal-message"></p>
            
            <!-- ‡¶∏‡¶æ‡¶ß‡¶æ‡¶∞‡¶£ ‡¶∞‡¶ø‡¶≠‡¶ø‡¶â ‡¶Æ‡¶®‡ßç‡¶§‡¶¨‡ßç‡¶Ø ‡¶á‡¶®‡¶™‡ßÅ‡¶ü (‡¶™‡ßç‡¶∞‡ßÅ‡¶´/‡¶∞‡¶ø‡¶™‡ßã‡¶∞‡ßç‡¶ü ‡¶â‡¶≠‡¶Ø‡¶º‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø) -->
            <div id="review-comment-group" class="mb-4 hidden text-left">
                <label for="review-comment" class="block text-sm font-medium text-gray-700 mb-2" id="review-comment-label">‡¶Æ‡¶®‡ßç‡¶§‡¶¨‡ßç‡¶Ø/‡¶ï‡¶æ‡¶∞‡¶£:</label>
                <textarea id="review-comment" rows="3" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500" placeholder="‡¶è‡¶°‡¶Æ‡¶ø‡¶® ‡¶Æ‡¶®‡ßç‡¶§‡¶¨‡ßç‡¶Ø/‡¶¨‡¶æ‡¶§‡¶ø‡¶≤‡ßá‡¶∞ ‡¶ï‡¶æ‡¶∞‡¶£ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®..."></textarea>
            </div>
            
            <!-- ‡¶™‡ßÅ‡¶∞‡¶∏‡ßç‡¶ï‡¶æ‡¶∞‡ßá‡¶∞ ‡¶™‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶ü ‡¶á‡¶®‡¶™‡ßÅ‡¶ü (‡¶∞‡¶ø‡¶™‡ßã‡¶∞‡ßç‡¶ü ‡¶Æ‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶ú‡¶Æ‡ßá‡¶®‡ßç‡¶ü‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø) -->
            <div id="reward-points-group" class="mb-4 hidden text-left">
                <label for="reward-points" class="block text-sm font-medium text-gray-700 mb-2">‡¶™‡ßÅ‡¶∞‡¶∏‡ßç‡¶ï‡¶æ‡¶∞ ‡¶™‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶ü (‡ß´‡ß¶-‡ß´‡ß¶‡ß¶):</label>
                <input type="number" id="reward-points" min="50" max="500" value="100" class="w-full p-3 border border-green-300 rounded-lg focus:ring-green-500 focus:border-green-500">
            </div>

            <!-- ‡¶∏‡¶æ‡¶∏‡¶™‡ßá‡¶®‡¶∂‡¶® ‡¶á‡¶®‡¶™‡ßÅ‡¶ü ‡¶ó‡ßç‡¶∞‡ßÅ‡¶™ -->
            <div id="suspension-group" class="mb-4 hidden text-left space-y-3">
                <p class="text-lg font-bold text-red-600 border-b pb-2">‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶∏‡¶æ‡¶∏‡¶™‡ßá‡¶®‡ßç‡¶° ‡¶ï‡¶∞‡ßÅ‡¶®</p>
                <div class="flex flex-col sm:flex-row gap-3">
                    <div class="flex-1">
                        <label for="suspend-duration" class="block text-sm font-medium text-gray-700 mb-1">‡¶∏‡¶Æ‡¶Ø‡¶º‡¶∏‡ßÄ‡¶Æ‡¶æ:</label>
                        <select id="suspend-duration" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-red-500 focus:border-red-500">
                            <option value="60">‡ßß ‡¶ò‡¶®‡ßç‡¶ü‡¶æ</option>
                            <option value="180">‡ß© ‡¶ò‡¶®‡ßç‡¶ü‡¶æ</option>
                            <option value="360">‡ß¨ ‡¶ò‡¶®‡ßç‡¶ü‡¶æ</option>
                            <option value="720">‡ßß‡ß® ‡¶ò‡¶®‡ßç‡¶ü‡¶æ</option>
                            <option value="1440" selected>‡ßß ‡¶¶‡¶ø‡¶® (‡ß®‡ß™ ‡¶ò‡¶®‡ßç‡¶ü‡¶æ)</option>
                            <option value="4320">‡ß© ‡¶¶‡¶ø‡¶®</option>
                            <option value="10080">‡ß≠ ‡¶¶‡¶ø‡¶®</option>
                        </select>
                    </div>
                    <div class="flex-1">
                        <label for="suspend-reason" class="block text-sm font-medium text-gray-700 mb-1">‡¶ï‡¶æ‡¶∞‡¶£ (‡¶Ü‡¶¨‡¶∂‡ßç‡¶Ø‡¶ï):</label>
                        <textarea id="suspend-reason" rows="3" class="w-full p-3 border border-red-300 rounded-lg focus:ring-red-500 focus:border-red-500" placeholder="‡¶∏‡¶æ‡¶∏‡¶™‡ßá‡¶®‡ßç‡¶° ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶ï‡¶æ‡¶∞‡¶£ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®..."></textarea>
                    </div>
                </div>
            </div>
            
            <!-- ‡¶™‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶ü ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶ú‡¶æ‡¶∏‡ßç‡¶ü‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶á‡¶®‡¶™‡ßÅ‡¶ü ‡¶ó‡ßç‡¶∞‡ßÅ‡¶™ -->
            <div id="point-adjustment-group" class="mb-4 hidden text-left space-y-3">
                <p class="text-lg font-bold text-yellow-600 border-b pb-2">‡¶™‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶ü ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶ú‡¶æ‡¶∏‡ßç‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®</p>
                <div>
                    <label for="adjustment-amount" class="block text-sm font-medium text-gray-700 mb-1">‡¶™‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶ü ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶® (+/-):</label>
                    <input type="number" id="adjustment-amount" class="w-full p-3 border border-yellow-300 rounded-lg focus:ring-yellow-500 focus:border-yellow-500" placeholder="+100 ‡¶¨‡¶æ -500 ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®" required>
                </div>
                <div>
                    <label for="adjustment-reason" class="block text-sm font-medium text-gray-700 mb-1">‡¶ï‡¶æ‡¶∞‡¶£ (‡¶Ü‡¶¨‡¶∂‡ßç‡¶Ø‡¶ï):</label>
                    <textarea id="adjustment-reason" rows="3" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-yellow-500 focus:border-yellow-500" placeholder="‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶®‡ßá‡¶∞ ‡¶ï‡¶æ‡¶∞‡¶£ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®..."></textarea>
                </div>
            </div>


            <div class="custom-modal-actions">
                <button class="custom-modal-btn bg-red-500 text-white hover:bg-red-600" id="modal-confirm-btn">
                    ‡¶®‡¶ø‡¶∂‡ßç‡¶ö‡¶ø‡¶§ ‡¶ï‡¶∞‡ßÅ‡¶®
                </button>
                <button class="custom-modal-btn bg-gray-200 text-gray-800 hover:bg-gray-300" onclick="closeAdminModal()">
                    ‡¶¨‡¶æ‡¶§‡¶ø‡¶≤
                </button>
            </div>
        </div>
    </div>
    
    <!-- ‡¶ü‡¶æ‡¶∏‡ßç‡¶ï ‡¶§‡ßà‡¶∞‡¶ø/‡¶è‡¶°‡¶ø‡¶ü ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶Æ‡¶°‡¶æ‡¶≤ -->
    <div id="task-modal" class="custom-modal">
        <div class="custom-modal-content max-w-lg">
            <h3 class="text-xl font-bold mb-4 text-gray-800 border-b pb-2" id="task-modal-title">‡¶®‡¶§‡ßÅ‡¶® ‡¶ü‡¶æ‡¶∏‡ßç‡¶ï ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡ßÅ‡¶®</h3>
            <form id="task-form" class="space-y-4 text-left">
                <input type="hidden" id="task-id">
                
                <div>
                    <label for="task-link" class="block text-sm font-medium text-gray-700 mb-1">‡¶ü‡¶æ‡¶∏‡ßç‡¶ï ‡¶≤‡¶ø‡¶Ç‡¶ï (‡¶Ü‡¶¨‡¶∂‡ßç‡¶Ø‡¶ï):</label>
                    <input type="url" id="task-link" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500" placeholder="‡¶´‡ßá‡¶∏‡¶¨‡ßÅ‡¶ï ‡¶¨‡¶æ ‡¶Ö‡¶®‡ßç‡¶Ø ‡¶ï‡ßã‡¶®‡ßã ‡¶≤‡¶ø‡¶Ç‡¶ï‡ßá‡¶∞ URL" required>
                </div>
                
                <div>
                    <label for="task-type" class="block text-sm font-medium text-gray-700 mb-1">‡¶ü‡¶æ‡¶∏‡ßç‡¶ï ‡¶™‡ßç‡¶∞‡¶ï‡¶æ‡¶∞ (‡¶Ü‡¶¨‡¶∂‡ßç‡¶Ø‡¶ï):</label>
                    <select id="task-type" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500" required>
                        <option value="">‡¶è‡¶ï‡¶ü‡¶ø ‡¶™‡ßç‡¶∞‡¶ï‡¶æ‡¶∞ ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®</option>
                        <option value="react">‡¶∞‡¶ø‡¶Ø‡¶º‡ßá‡¶ï‡ßç‡¶ü (React)</option>
                        <option value="comment">‡¶ï‡¶Æ‡ßá‡¶®‡ßç‡¶ü (Comment)</option>
                        <option value="follow">‡¶´‡¶≤‡ßã (Follow)</option>
                        <option value="share">‡¶∂‡ßá‡¶Ø‡¶º‡¶æ‡¶∞ (Share)</option>
                        <option value="groupJoin">‡¶ó‡ßç‡¶∞‡ßÅ‡¶™ ‡¶ú‡¶Ø‡¶º‡ßá‡¶® (Group Join)</option>
                    </select>
                </div>
                
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label for="task-quantity" class="block text-sm font-medium text-gray-700 mb-1">‡¶Æ‡ßã‡¶ü ‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£ (‡¶Ü‡¶¨‡¶∂‡ßç‡¶Ø‡¶ï):</label>
                        <input type="number" id="task-quantity" min="1" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500" placeholder="‡¶Æ‡ßã‡¶ü ‡¶ï‡¶§‡¶ú‡¶® ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶¶‡¶∞‡¶ï‡¶æ‡¶∞" required>
                    </div>
                    <div>
                        <label for="task-points" class="block text-sm font-medium text-gray-700 mb-1">‡¶™‡ßç‡¶∞‡¶§‡¶ø ‡¶ü‡¶æ‡¶∏‡ßç‡¶ï‡ßá ‡¶™‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶ü (‡¶ê‡¶ö‡ßç‡¶õ‡¶ø‡¶ï):</label>
                        <input type="number" id="task-points" min="0" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500" placeholder="‡¶Ø‡¶¶‡¶ø ‡¶°‡¶ø‡¶´‡¶≤‡ßç‡¶ü ‡¶∏‡ßá‡¶ü‡¶ø‡¶Ç ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶®‡¶æ ‡¶ï‡¶∞‡¶§‡ßá ‡¶ö‡¶æ‡¶®">
                        <p class="text-xs text-gray-500 mt-1">‡¶Ø‡¶¶‡¶ø ‡¶ñ‡¶æ‡¶≤‡¶ø ‡¶∞‡¶æ‡¶ñ‡¶æ ‡¶π‡¶Ø‡¶º, ‡¶§‡¶¨‡ßá ‡¶∏‡ßá‡¶ü‡¶ø‡¶Ç‡¶∏‡ßá‡¶∞ ‡¶°‡¶ø‡¶´‡¶≤‡ßç‡¶ü ‡¶Æ‡¶æ‡¶® ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ ‡¶π‡¶¨‡ßá‡•§</p>
                    </div>
                </div>

                <div class="custom-modal-actions pt-4">
                    <button type="submit" class="custom-modal-btn brand-blue text-white hover:brightness-110" id="task-save-btn">
                        <i class="fas fa-save mr-2"></i> ‡¶ü‡¶æ‡¶∏‡ßç‡¶ï ‡¶∏‡ßá‡¶≠ ‡¶ï‡¶∞‡ßÅ‡¶®
                    </button>
                    <button type="button" class="custom-modal-btn bg-gray-200 text-gray-800 hover:bg-gray-300" onclick="closeTaskModal()">
                        ‡¶¨‡¶æ‡¶§‡¶ø‡¶≤
                    </button>
                </div>
            </form>
        </div>
    </div>
    <!-- ‡¶ü‡¶æ‡¶∏‡ßç‡¶ï ‡¶Æ‡¶°‡¶æ‡¶≤ ‡¶∂‡ßá‡¶∑ -->
    
    <!-- üî• ‡¶®‡¶§‡ßÅ‡¶®: ‡¶®‡ßã‡¶ü‡¶ø‡¶∂ ‡¶§‡ßà‡¶∞‡¶ø/‡¶è‡¶°‡¶ø‡¶ü ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶Æ‡¶°‡¶æ‡¶≤ -->
    <div id="notice-modal" class="custom-modal">
        <div class="custom-modal-content max-w-lg">
            <h3 class="text-xl font-bold mb-4 text-gray-800 border-b pb-2" id="notice-modal-title">‡¶®‡¶§‡ßÅ‡¶® ‡¶®‡ßã‡¶ü‡¶ø‡¶∂ ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®</h3>
            <form id="notice-form" class="space-y-4 text-left">
                <input type="hidden" id="notice-id">
                
                <!-- ‡¶®‡ßã‡¶ü‡¶ø‡¶∂ ‡¶ü‡ßá‡¶ï‡ßç‡¶∏‡¶ü -->
                <div>
                    <label for="notice-text" class="block text-sm font-medium text-gray-700 mb-2">
                        ‡¶®‡ßã‡¶ü‡¶ø‡¶∂ ‡¶Æ‡ßá‡¶∏‡ßá‡¶ú (‡¶Ü‡¶¨‡¶∂‡ßç‡¶Ø‡¶ï):
                    </label>
                    <textarea id="notice-text" rows="3" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-red-500 focus:border-red-500" placeholder="‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞‡¶ï‡¶æ‡¶∞‡ßÄ‡¶¶‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶ó‡ßÅ‡¶∞‡ßÅ‡¶§‡ßç‡¶¨‡¶™‡ßÇ‡¶∞‡ßç‡¶£ ‡¶®‡ßã‡¶ü‡¶ø‡¶∂ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®..." required></textarea>
                </div>
                
                <div class="grid grid-cols-2 gap-4">
                    <!-- ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï‡¶ó‡ßç‡¶∞‡¶æ‡¶â‡¶®‡ßç‡¶° ‡¶ï‡¶æ‡¶≤‡¶æ‡¶∞ -->
                    <div>
                        <label for="notice-bg-color" class="block text-sm font-medium text-gray-700 mb-2">
                            ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï‡¶ó‡ßç‡¶∞‡¶æ‡¶â‡¶®‡ßç‡¶° ‡¶ï‡¶æ‡¶≤‡¶æ‡¶∞:
                        </label>
                        <input type="color" id="notice-bg-color" value="#ffc107" class="w-full h-10 p-1 border border-gray-300 rounded-lg">
                    </div>
                    <!-- ‡¶ü‡ßá‡¶ï‡ßç‡¶∏‡¶ü ‡¶ï‡¶æ‡¶≤‡¶æ‡¶∞ -->
                    <div>
                        <label for="notice-text-color" class="block text-sm font-medium text-gray-700 mb-2">
                            ‡¶ü‡ßá‡¶ï‡ßç‡¶∏‡¶ü ‡¶ï‡¶æ‡¶≤‡¶æ‡¶∞:
                        </label>
                        <input type="color" id="notice-text-color" value="#343a40" class="w-full h-10 p-1 border border-gray-300 rounded-lg">
                    </div>
                </div>

                <!-- ‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∏ ‡¶ü‡¶ó‡¶≤ -->
                <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg border border-gray-200">
                    <label for="notice-is-active" class="text-sm font-medium text-gray-700">
                        ‡¶®‡ßã‡¶ü‡¶ø‡¶∂ ‡¶∏‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º (Active) ‡¶•‡¶æ‡¶ï‡¶¨‡ßá ‡¶ï‡¶ø?
                    </label>
                    <input type="checkbox" id="notice-is-active" class="form-checkbox h-5 w-5 text-red-600 rounded" checked>
                </div>


                <div class="custom-modal-actions pt-4">
                    <button type="submit" class="custom-modal-btn bg-red-600 text-white hover:bg-red-700" id="notice-save-btn">
                        <i class="fas fa-save mr-2"></i> ‡¶®‡ßã‡¶ü‡¶ø‡¶∂ ‡¶∏‡ßá‡¶≠ ‡¶ï‡¶∞‡ßÅ‡¶®
                    </button>
                    <button type="button" class="custom-modal-btn bg-gray-200 text-gray-800 hover:bg-gray-300" onclick="closeNoticeModal()">
                        ‡¶¨‡¶æ‡¶§‡¶ø‡¶≤
                    </button>
                </div>
            </form>
        </div>
    </div>
    <!-- ‡¶®‡ßã‡¶ü‡¶ø‡¶∂ ‡¶Æ‡¶°‡¶æ‡¶≤ ‡¶∂‡ßá‡¶∑ -->

    <div id="notification-container"></div>
    
    <script type="module">
        // Firebase imports from rtdb-config.js
        import { rtdb, ref, onValue, set, update, remove, get, auth, showNotification, runTransaction, push } from './rtdb-config.js'; 
        import { onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.0.0/firebase-auth.js"; 

        // Get references to the DOM elements
        const usersTableBody = document.querySelector('#users table tbody');
        const tasksTableBody = document.querySelector('#tasks table tbody');
        const proofsGrid = document.getElementById('proofs-grid');
        const reportsGrid = document.getElementById('reports-grid'); 
        const noticesList = document.getElementById('notices-list'); // üî• ‡¶®‡¶§‡ßÅ‡¶®: ‡¶®‡ßã‡¶ü‡¶ø‡¶∂ ‡¶§‡¶æ‡¶≤‡¶ø‡¶ï‡¶æ ‡¶ï‡¶®‡ßç‡¶ü‡ßá‡¶á‡¶®‡¶æ‡¶∞
        const noticeListStatus = document.getElementById('notice-list-status'); // üî• ‡¶®‡¶§‡ßÅ‡¶®: ‡¶®‡ßã‡¶ü‡¶ø‡¶∂ ‡¶§‡¶æ‡¶≤‡¶ø‡¶ï‡¶æ ‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∏
        const tabs = document.querySelectorAll('.tab');
        const tabContents = document.querySelectorAll('.tab-content');
        
        const adminModal = document.getElementById('admin-modal');
        const modalTitle = document.getElementById('modal-title');
        const modalMessage = document.getElementById('modal-message');
        const modalConfirmBtn = document.getElementById('modal-confirm-btn');
        
        // ‡¶∏‡¶æ‡¶ß‡¶æ‡¶∞‡¶£ ‡¶∞‡¶ø‡¶≠‡¶ø‡¶â ‡¶Æ‡¶®‡ßç‡¶§‡¶¨‡ßç‡¶Ø ‡¶á‡¶®‡¶™‡ßÅ‡¶ü
        const reviewCommentGroup = document.getElementById('review-comment-group');
        const reviewCommentInput = document.getElementById('review-comment');
        const reviewCommentLabel = document.getElementById('review-comment-label');
        
        const rewardPointsGroup = document.getElementById('reward-points-group');
        const rewardPointsInput = document.getElementById('reward-points');

        // ‡¶∏‡¶æ‡¶∏‡¶™‡ßá‡¶®‡¶∂‡¶® ‡¶á‡¶®‡¶™‡ßÅ‡¶ü ‡¶è‡¶≤‡¶ø‡¶Æ‡ßá‡¶®‡ßç‡¶ü
        const suspensionGroup = document.getElementById('suspension-group');
        const suspendDurationInput = document.getElementById('suspend-duration');
        const suspendReasonInput = document.getElementById('suspend-reason');
        
        // ‡¶™‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶ü ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶ú‡¶æ‡¶∏‡ßç‡¶ü‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶á‡¶®‡¶™‡ßÅ‡¶ü ‡¶è‡¶≤‡¶ø‡¶Æ‡ßá‡¶®‡ßç‡¶ü
        const pointAdjustmentGroup = document.getElementById('point-adjustment-group');
        const adjustmentAmountInput = document.getElementById('adjustment-amount');
        const adjustmentReasonInput = document.getElementById('adjustment-reason');

        // ‡¶∏‡ßá‡¶ü‡¶ø‡¶Ç‡¶∏ ‡¶á‡¶®‡¶™‡ßÅ‡¶ü ‡¶è‡¶≤‡¶ø‡¶Æ‡ßá‡¶®‡ßç‡¶ü (Referral)
        const referredBonusInput = document.getElementById('referredBonus');
        const refereeBonusInput = document.getElementById('refereeBonus');
        const saveReferralSettingsBtn = document.getElementById('saveReferralSettingsBtn');
        const referralStatus = document.getElementById('referral-status');

        // ‡¶∏‡ßá‡¶ü‡¶ø‡¶Ç‡¶∏ ‡¶á‡¶®‡¶™‡ßÅ‡¶ü ‡¶è‡¶≤‡¶ø‡¶Æ‡ßá‡¶®‡ßç‡¶ü (Task Points)
        const reactPointsInput = document.getElementById('react_points');
        const commentPointsInput = document.getElementById('comment_points');
        const followPointsInput = document.getElementById('follow_points');
        const sharePointsInput = document.getElementById('share_points');
        const groupJoinPointsInput = document.getElementById('group_join_points');
        const saveProductPointsBtn = document.getElementById('saveProductPointsBtn');
        const productStatus = document.getElementById('product-status');

        // üî• ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶ø‡¶§: ‡¶®‡ßã‡¶ü‡¶ø‡¶∂ ‡¶ï‡¶®‡ßç‡¶ü‡ßç‡¶∞‡ßã‡¶≤ ‡¶è‡¶≤‡¶ø‡¶Æ‡ßá‡¶®‡ßç‡¶ü
        const noticeModal = document.getElementById('notice-modal');
        const noticeModalTitle = document.getElementById('notice-modal-title');
        const noticeForm = document.getElementById('notice-form');
        const noticeIdInput = document.getElementById('notice-id');
        const noticeTextInput = document.getElementById('notice-text');
        const noticeBgColorInput = document.getElementById('notice-bg-color');
        const noticeTextColorInput = document.getElementById('notice-text-color');
        const noticeIsActiveInput = document.getElementById('notice-is-active');

        // ‡¶ü‡¶æ‡¶∏‡ßç‡¶ï ‡¶Æ‡¶°‡¶æ‡¶≤ ‡¶è‡¶≤‡¶ø‡¶Æ‡ßá‡¶®‡ßç‡¶ü
        const taskModal = document.getElementById('task-modal');
        const taskModalTitle = document.getElementById('task-modal-title');
        const taskIdInput = document.getElementById('task-id');
        const taskLinkInput = document.getElementById('task-link');
        const taskTypeInput = document.getElementById('task-type');
        const taskQuantityInput = document.getElementById('task-quantity');
        const taskPointsInput = document.getElementById('task-points');
        const taskForm = document.getElementById('task-form');


        let currentUserId = null;
        let pendingAction = { actionType: null, data: null };
        let allUsersData = {}; // ‡¶∏‡¶Æ‡¶∏‡ßç‡¶§ ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶°‡ßá‡¶ü‡¶æ ‡¶ï‡ßç‡¶Ø‡¶æ‡¶∂ ‡¶ï‡¶∞‡ßá ‡¶∞‡¶æ‡¶ñ‡¶æ

        // Modal functions
        window.closeAdminModal = () => {
            adminModal.style.display = 'none';
            pendingAction = { actionType: null, data: null }; // ‡¶∞‡¶ø‡¶∏‡ßá‡¶ü
            reviewCommentInput.value = ''; // ‡¶á‡¶®‡¶™‡ßÅ‡¶ü ‡¶ï‡ßç‡¶≤‡¶ø‡¶Ø‡¶º‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ
            rewardPointsInput.value = '100'; // ‡¶∞‡¶ø‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶° ‡¶á‡¶®‡¶™‡ßÅ‡¶ü ‡¶°‡¶ø‡¶´‡¶≤‡ßç‡¶ü ‡¶ï‡¶∞‡¶æ
            suspendReasonInput.value = ''; // ‡¶∏‡¶æ‡¶∏‡¶™‡ßá‡¶®‡ßç‡¶° ‡¶ï‡¶æ‡¶∞‡¶£ ‡¶ï‡ßç‡¶≤‡¶ø‡¶Ø‡¶º‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ
            
            // ‡¶™‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶ü ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶ú‡¶æ‡¶∏‡ßç‡¶ü‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶á‡¶®‡¶™‡ßÅ‡¶ü ‡¶∞‡¶ø‡¶∏‡ßá‡¶ü ‡¶ï‡¶∞‡¶æ
            pointAdjustmentGroup.classList.add('hidden'); 
            adjustmentAmountInput.value = '';
            adjustmentReasonInput.value = '';
        };
        
        const openAdminModal = (type, data) => {
            pendingAction.actionType = type;
            pendingAction.data = data;
            
            let titleText = '‡¶®‡¶ø‡¶∂‡ßç‡¶ö‡¶ø‡¶§ ‡¶ï‡¶∞‡ßÅ‡¶®';
            let messageText = '';
            let confirmClass = '';
            
            // ‡¶∏‡¶¨ ‡¶≤‡ßÅ‡¶ï‡¶æ‡¶®‡ßã ‡¶á‡¶®‡¶™‡ßÅ‡¶ü ‡¶π‡¶æ‡¶á‡¶° ‡¶ï‡¶∞‡ßÅ‡¶® ‡¶è‡¶¨‡¶Ç ‡¶¨‡¶∞‡ßç‡¶°‡¶æ‡¶∞ ‡¶∞‡¶ø‡¶∏‡ßá‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®
            reviewCommentGroup.classList.add('hidden');
            rewardPointsGroup.classList.add('hidden'); 
            suspensionGroup.classList.add('hidden'); 
            pointAdjustmentGroup.classList.add('hidden'); 
            reviewCommentInput.classList.remove('border-red-500', 'focus:ring-red-500', 'focus:border-red-500'); 
            reviewCommentInput.classList.add('border-gray-300', 'focus:ring-blue-500', 'focus:border-blue-500');

            if (type === 'closeTask') {
                titleText = '‡¶ï‡¶æ‡¶ú ‡¶¨‡¶®‡ßç‡¶ß ‡¶ï‡¶∞‡ßÅ‡¶®';
                messageText = `‡¶Ü‡¶™‡¶®‡¶ø ‡¶ï‡¶ø ‡¶®‡¶ø‡¶∂‡ßç‡¶ö‡¶ø‡¶§ ‡¶ü‡¶æ‡¶∏‡ßç‡¶ï ID ${data.taskId.substring(0, 8)}... ‡¶∏‡ßç‡¶•‡¶æ‡¶Ø‡¶º‡ßÄ‡¶≠‡¶æ‡¶¨‡ßá ‡¶¨‡¶®‡ßç‡¶ß ‡¶ï‡¶∞‡¶§‡ßá ‡¶ö‡¶æ‡¶®?`;
                confirmClass = 'bg-red-500 hover:bg-red-600';
            } else if (type === 'approveProof') {
                titleText = '‡¶Ö‡¶®‡ßÅ‡¶Æ‡ßã‡¶¶‡¶® ‡¶¶‡¶ø‡¶®';
                messageText = `‡¶Ü‡¶™‡¶®‡¶ø ‡¶ï‡¶ø ‡¶®‡¶ø‡¶∂‡ßç‡¶ö‡¶ø‡¶§ ‡¶™‡ßç‡¶∞‡ßÅ‡¶´‡¶ü‡¶ø ‡¶Ö‡¶®‡ßÅ‡¶Æ‡ßã‡¶¶‡¶® ‡¶ï‡¶∞‡ßá ‡¶á‡¶â‡¶ú‡¶æ‡¶∞‡¶ï‡ßá ${(data.points).toLocaleString('bn-BD')} ‡¶™‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶ü ‡¶¶‡¶ø‡¶§‡ßá ‡¶ö‡¶æ‡¶®?`;
                confirmClass = 'bg-green-500 hover:bg-green-600';
            } else if (type === 'rejectProof') {
                titleText = '‡¶¨‡¶æ‡¶§‡¶ø‡¶≤ ‡¶ï‡¶∞‡ßÅ‡¶®';
                messageText = `‡¶Ü‡¶™‡¶®‡¶ø ‡¶ï‡¶ø ‡¶®‡¶ø‡¶∂‡ßç‡¶ö‡¶ø‡¶§ ‡¶™‡ßç‡¶∞‡ßÅ‡¶´‡¶ü‡¶ø ‡¶¨‡¶æ‡¶§‡¶ø‡¶≤ ‡¶ï‡¶∞‡¶¨‡ßá‡¶®? ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶Ü‡¶¨‡¶æ‡¶∞ ‡¶ö‡ßá‡¶∑‡ßç‡¶ü‡¶æ ‡¶ï‡¶∞‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡¶¨‡ßá‡•§ ‡¶¨‡¶æ‡¶§‡¶ø‡¶≤‡ßá‡¶∞ ‡¶ï‡¶æ‡¶∞‡¶£ ‡¶â‡¶≤‡ßç‡¶≤‡ßá‡¶ñ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§`;
                confirmClass = 'bg-red-500 hover:bg-red-600';
                reviewCommentGroup.classList.remove('hidden'); 
                reviewCommentLabel.textContent = '‡¶¨‡¶æ‡¶§‡¶ø‡¶≤‡ßá‡¶∞ ‡¶ï‡¶æ‡¶∞‡¶£ (‡¶Ü‡¶¨‡¶∂‡ßç‡¶Ø‡¶ï):';
                reviewCommentInput.value = ''; 
                reviewCommentInput.classList.remove('border-gray-300', 'focus:ring-blue-500', 'focus:border-blue-500');
                reviewCommentInput.classList.add('border-red-500', 'focus:ring-red-500', 'focus:border-red-500'); 
            } else if (type === 'approveReport') { 
                titleText = '‡¶∞‡¶ø‡¶™‡ßã‡¶∞‡ßç‡¶ü ‡¶™‡ßÅ‡¶∞‡¶∏‡ßç‡¶ï‡¶æ‡¶∞ ‡¶¶‡¶ø‡¶®';
                messageText = `‡¶Ü‡¶™‡¶®‡¶ø ‡¶ï‡¶ø ‡¶®‡¶ø‡¶∂‡ßç‡¶ö‡¶ø‡¶§ ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ${data.userName} ‡¶ï‡ßá ‡¶™‡ßÅ‡¶∞‡¶∏‡ßç‡¶ï‡¶æ‡¶∞ ‡¶™‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶ü ‡¶¶‡¶ø‡¶§‡ßá ‡¶ö‡¶æ‡¶®? ‡¶∞‡¶ø‡¶™‡ßã‡¶∞‡ßç‡¶ü‡¶ü‡¶ø: "${data.title}"`;
                confirmClass = 'bg-green-500 hover:bg-green-600';
                rewardPointsGroup.classList.remove('hidden'); 
                reviewCommentGroup.classList.remove('hidden'); 
                reviewCommentLabel.textContent = '‡¶è‡¶°‡¶Æ‡¶ø‡¶® ‡¶Æ‡¶®‡ßç‡¶§‡¶¨‡ßç‡¶Ø (‡¶ê‡¶ö‡ßç‡¶õ‡¶ø‡¶ï):';
                reviewCommentInput.placeholder = '‡¶è‡¶á ‡¶∞‡¶ø‡¶™‡ßã‡¶∞‡ßç‡¶ü ‡¶∏‡¶Æ‡ßç‡¶™‡¶∞‡ßç‡¶ï‡ßá ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Æ‡¶®‡ßç‡¶§‡¶¨‡ßç‡¶Ø ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®...';
                reviewCommentInput.value = ''; 
                rewardPointsInput.value = '100'; 
            } else if (type === 'rejectReport') { 
                titleText = '‡¶∞‡¶ø‡¶™‡ßã‡¶∞‡ßç‡¶ü ‡¶¨‡¶æ‡¶§‡¶ø‡¶≤ ‡¶ï‡¶∞‡ßÅ‡¶®';
                messageText = `‡¶Ü‡¶™‡¶®‡¶ø ‡¶ï‡¶ø ‡¶®‡¶ø‡¶∂‡ßç‡¶ö‡¶ø‡¶§ ‡¶∞‡¶ø‡¶™‡ßã‡¶∞‡ßç‡¶ü‡¶ü‡¶ø ‡¶¨‡¶æ‡¶§‡¶ø‡¶≤ ‡¶ï‡¶∞‡¶¨‡ßá‡¶®? ‡¶è‡¶ü‡¶ø ‡¶ï‡ßã‡¶®‡ßã ‡¶™‡ßÅ‡¶∞‡¶∏‡ßç‡¶ï‡¶æ‡¶∞ ‡¶™‡¶æ‡¶¨‡ßá ‡¶®‡¶æ‡•§ ‡¶¨‡¶æ‡¶§‡¶ø‡¶≤‡ßá‡¶∞ ‡¶ï‡¶æ‡¶∞‡¶£ ‡¶â‡¶≤‡ßç‡¶≤‡ßá‡¶ñ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§`;
                confirmClass = 'bg-red-500 hover:bg-red-600';
                reviewCommentGroup.classList.remove('hidden'); 
                reviewCommentLabel.textContent = '‡¶¨‡¶æ‡¶§‡¶ø‡¶≤‡ßá‡¶∞ ‡¶ï‡¶æ‡¶∞‡¶£ (‡¶Ü‡¶¨‡¶∂‡ßç‡¶Ø‡¶ï):';
                reviewCommentInput.value = ''; 
                reviewCommentInput.classList.remove('border-gray-300', 'focus:ring-blue-500', 'focus:border-blue-500');
                reviewCommentInput.classList.add('border-red-500', 'focus:ring-red-500', 'focus:border-red-500'); 
            } else if (type === 'suspendUser') { 
                titleText = '‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶∏‡¶æ‡¶∏‡¶™‡ßá‡¶®‡ßç‡¶° ‡¶ï‡¶∞‡ßÅ‡¶®';
                messageText = `‡¶Ü‡¶™‡¶®‡¶ø ‡¶ï‡¶ø ‡¶®‡¶ø‡¶∂‡ßç‡¶ö‡¶ø‡¶§ ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ID ${data.userId.substring(0, 8)}... ‡¶ï‡ßá ‡¶∏‡¶æ‡¶∏‡¶™‡ßá‡¶®‡ßç‡¶° ‡¶ï‡¶∞‡¶§‡ßá ‡¶ö‡¶æ‡¶®?`;
                confirmClass = 'bg-red-500 hover:bg-red-600';
                suspensionGroup.classList.remove('hidden'); 
                suspendDurationInput.value = '1440'; 
                suspendReasonInput.value = '';
            } else if (type === 'unsuspendUser') { 
                titleText = '‡¶∏‡¶æ‡¶∏‡¶™‡ßá‡¶®‡ßç‡¶° ‡¶™‡ßç‡¶∞‡¶§‡ßç‡¶Ø‡¶æ‡¶π‡¶æ‡¶∞';
                messageText = `‡¶Ü‡¶™‡¶®‡¶ø ‡¶ï‡¶ø ‡¶®‡¶ø‡¶∂‡ßç‡¶ö‡¶ø‡¶§ ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ID ${data.userId.substring(0, 8)}... ‡¶è‡¶∞ ‡¶∏‡¶æ‡¶∏‡¶™‡ßá‡¶®‡¶∂‡¶® ‡¶™‡ßç‡¶∞‡¶§‡ßç‡¶Ø‡¶æ‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶§‡ßá ‡¶ö‡¶æ‡¶®?`;
                confirmClass = 'bg-green-500 hover:bg-green-600';
            } else if (type === 'adjustPoints') { 
                titleText = '‡¶™‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶ü ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®';
                modalMessage.innerHTML = `‡¶Ü‡¶™‡¶®‡¶ø ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ <strong>${data.userName}</strong> ‡¶è‡¶∞ ‡¶¨‡¶∞‡ßç‡¶§‡¶Æ‡¶æ‡¶® ‡¶™‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶ü <strong>${(data.currentPoints).toLocaleString('bn-BD')}</strong> ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶® ‡¶ï‡¶∞‡¶§‡ßá ‡¶ö‡¶æ‡¶®‡•§ (+/- ‡¶Æ‡¶æ‡¶® ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®)`;
                confirmClass = 'bg-yellow-500 hover:bg-yellow-600';
                pointAdjustmentGroup.classList.remove('hidden'); 
                adjustmentAmountInput.value = '';
                adjustmentReasonInput.value = '';
            } else if (type === 'deleteNotice') { // üî• ‡¶®‡¶§‡ßÅ‡¶®: ‡¶®‡ßã‡¶ü‡¶ø‡¶∂ ‡¶°‡¶ø‡¶≤‡¶ø‡¶ü ‡¶ï‡¶®‡¶´‡¶æ‡¶∞‡ßç‡¶Æ‡ßá‡¶∂‡¶®
                titleText = '‡¶®‡ßã‡¶ü‡¶ø‡¶∂ ‡¶Æ‡ßÅ‡¶õ‡ßá ‡¶¶‡¶ø‡¶®';
                messageText = `‡¶Ü‡¶™‡¶®‡¶ø ‡¶ï‡¶ø ‡¶®‡¶ø‡¶∂‡ßç‡¶ö‡¶ø‡¶§ ‡¶è‡¶á ‡¶®‡ßã‡¶ü‡¶ø‡¶∂‡¶ü‡¶ø (${data.noticeText.substring(0, 30)}...) ‡¶∏‡ßç‡¶•‡¶æ‡¶Ø‡¶º‡ßÄ‡¶≠‡¶æ‡¶¨‡ßá ‡¶Æ‡ßÅ‡¶õ‡ßá ‡¶´‡ßá‡¶≤‡¶§‡ßá ‡¶ö‡¶æ‡¶®?`;
                confirmClass = 'bg-red-500 hover:bg-red-600';
            }

            modalConfirmBtn.classList.remove('bg-red-500', 'bg-green-500', 'bg-yellow-500', 'hover:bg-red-600', 'hover:bg-green-600', 'hover:bg-yellow-600');
            const classArray = confirmClass.split(' ');
            modalConfirmBtn.classList.add(...classArray);
            
            modalTitle.textContent = titleText;
            if(type !== 'adjustPoints') {
                modalMessage.textContent = messageText;
            }
            modalConfirmBtn.className = `custom-modal-btn text-white font-bold ${confirmClass}`;
            adminModal.style.display = 'flex';
        };

        // ‡¶Æ‡¶°‡¶æ‡¶≤ ‡¶ï‡¶®‡¶´‡¶æ‡¶∞‡ßç‡¶Æ ‡¶¨‡¶æ‡¶ü‡¶®‡ßá ‡¶ï‡ßç‡¶≤‡¶ø‡¶ï ‡¶á‡¶≠‡ßá‡¶®‡ßç‡¶ü ‡¶π‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶°‡¶≤‡¶æ‡¶∞
        modalConfirmBtn.onclick = () => {
            const { actionType, data } = pendingAction;
            
            if (!currentUserId) {
                showNotification('‡¶§‡ßç‡¶∞‡ßÅ‡¶ü‡¶ø: ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶è‡¶°‡¶Æ‡¶ø‡¶® ‡¶Ü‡¶á‡¶°‡¶ø ‡¶™‡¶æ‡¶ì‡¶Ø‡¶º‡¶æ ‡¶Ø‡¶æ‡¶Ø‡¶º‡¶®‡¶ø‡•§ ‡¶≤‡¶ó‡¶á‡¶® ‡¶ï‡¶∞‡ßá ‡¶Ü‡¶¨‡¶æ‡¶∞ ‡¶ö‡ßá‡¶∑‡ßç‡¶ü‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§', 'error');
                return;
            }
            
            if (actionType === 'suspendUser') {
                const durationMinutes = parseInt(suspendDurationInput.value);
                const reason = suspendReasonInput.value.trim();
                
                if (isNaN(durationMinutes) || durationMinutes <= 0) {
                    showNotification('‡¶∏‡¶æ‡¶∏‡¶™‡ßá‡¶®‡¶∂‡¶®‡ßá‡¶∞ ‡¶∏‡¶Æ‡¶Ø‡¶º‡¶∏‡ßÄ‡¶Æ‡¶æ ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®‡•§', 'error');
                    return;
                }
                if (!reason) {
                    showNotification('‡¶∏‡¶æ‡¶∏‡¶™‡ßá‡¶®‡ßç‡¶° ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶ï‡¶æ‡¶∞‡¶£ ‡¶≤‡ßá‡¶ñ‡¶æ ‡¶Ü‡¶¨‡¶∂‡ßç‡¶Ø‡¶ï‡•§', 'error');
                    return;
                }
                window.handleManualSuspension(data.userId, durationMinutes, reason);
            }
            
            else if (actionType === 'adjustPoints') {
                const adjustmentAmount = parseInt(adjustmentAmountInput.value);
                const reason = adjustmentReasonInput.value.trim();
                
                if (isNaN(adjustmentAmount) || adjustmentAmount === 0) {
                    showNotification('‡¶™‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶ü‡ßá‡¶∞ ‡¶∏‡¶†‡¶ø‡¶ï ‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶® (+ ‡¶¨‡¶æ -)‡•§', 'error');
                    return;
                }
                if (!reason) {
                    showNotification('‡¶™‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶ü ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶®‡ßá‡¶∞ ‡¶ï‡¶æ‡¶∞‡¶£ ‡¶≤‡ßá‡¶ñ‡¶æ ‡¶Ü‡¶¨‡¶∂‡ßç‡¶Ø‡¶ï‡•§', 'error');
                    return;
                }
                window.handlePointAdjustment(data.userId, data.userName, adjustmentAmount, reason);
            }
            
            else if (actionType === 'unsuspendUser') {
                window.handleUnsuspendUser(data.userId);
            }
            
            else if (actionType === 'rejectProof') {
                 const rejectionReason = reviewCommentInput.value.trim();
                 if (!rejectionReason) {
                     showNotification('‡¶™‡ßç‡¶∞‡ßÅ‡¶´ ‡¶¨‡¶æ‡¶§‡¶ø‡¶≤ ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶ï‡¶æ‡¶∞‡¶£ ‡¶â‡¶≤‡ßç‡¶≤‡ßá‡¶ñ ‡¶ï‡¶∞‡¶æ ‡¶Ü‡¶¨‡¶∂‡ßç‡¶Ø‡¶ï‡•§', 'error');
                     return;
                 }
                 window.handleRejectProof(data.taskId, data.proofId, data.userId, rejectionReason);
            } 
            
            else if (actionType === 'approveReport') {
                const rewardPoints = parseInt(rewardPointsInput.value);
                const reviewComment = reviewCommentInput.value.trim(); 
                if (isNaN(rewardPoints) || rewardPoints < 50 || rewardPoints > 500) {
                    showNotification('‡¶™‡ßÅ‡¶∞‡¶∏‡ßç‡¶ï‡¶æ‡¶∞ ‡¶™‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶ü‡ßá‡¶∞ ‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£ ‡ß´‡ß¶ ‡¶•‡ßá‡¶ï‡ßá ‡ß´‡ß¶‡ß¶ ‡¶è‡¶∞ ‡¶Æ‡¶ß‡ßç‡¶Ø‡ßá ‡¶π‡¶§‡ßá ‡¶π‡¶¨‡ßá‡•§', 'error');
                    return;
                }
                window.handleApproveReport(data.reportId, data.userId, rewardPoints, reviewComment);
            }
            
            else if (actionType === 'rejectReport') {
                const reviewComment = reviewCommentInput.value.trim();
                if (!reviewComment) {
                     showNotification('‡¶∞‡¶ø‡¶™‡ßã‡¶∞‡ßç‡¶ü ‡¶¨‡¶æ‡¶§‡¶ø‡¶≤ ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶ï‡¶æ‡¶∞‡¶£ ‡¶â‡¶≤‡ßç‡¶≤‡ßá‡¶ñ ‡¶ï‡¶∞‡¶æ ‡¶Ü‡¶¨‡¶∂‡ßç‡¶Ø‡¶ï‡•§', 'error');
                     return;
                }
                window.handleRejectReport(data.reportId, reviewComment);
            }
            
            else if (actionType === 'closeTask') {
                window.handleCloseTask(data.taskId);
            } else if (actionType === 'approveProof') {
                window.handleApproveProof(data.taskId, data.proofId, data.userId, data.points); 
            } else if (actionType === 'deleteNotice') { // üî• ‡¶®‡¶§‡ßÅ‡¶®: ‡¶®‡ßã‡¶ü‡¶ø‡¶∂ ‡¶°‡¶ø‡¶≤‡¶ø‡¶ü ‡¶π‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶°‡¶≤‡¶æ‡¶∞
                window.handleDeleteNotice(data.noticeId);
            }
            
            closeAdminModal(); 
        };

        window.onclick = function(event) {
            if (event.target === adminModal) {
                closeAdminModal();
            }
            // ‡¶ü‡¶æ‡¶∏‡ßç‡¶ï ‡¶Æ‡¶°‡¶æ‡¶≤ ‡¶¨‡¶®‡ßç‡¶ß ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶≤‡¶ú‡¶ø‡¶ï
            if (event.target === taskModal) {
                closeTaskModal();
            }
             // üî• ‡¶®‡¶§‡ßÅ‡¶®: ‡¶®‡ßã‡¶ü‡¶ø‡¶∂ ‡¶Æ‡¶°‡¶æ‡¶≤ ‡¶¨‡¶®‡ßç‡¶ß ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶≤‡¶ú‡¶ø‡¶ï
            if (event.target === noticeModal) {
                closeNoticeModal();
            }
        };

        // ‡¶ü‡¶æ‡¶∏‡ßç‡¶ï ‡¶Æ‡¶°‡¶æ‡¶≤ ‡¶´‡¶æ‡¶Ç‡¶∂‡¶®
        window.closeTaskModal = () => {
            taskModal.style.display = 'none';
            taskForm.reset();
            taskIdInput.value = '';
        };

        window.openTaskModal = (task = null) => {
            taskForm.reset();
            taskIdInput.value = '';

            if (task) {
                taskModalTitle.textContent = '‡¶ü‡¶æ‡¶∏‡ßç‡¶ï ‡¶è‡¶°‡¶ø‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®';
                taskIdInput.value = task.id;
                taskLinkInput.value = task.taskLink || '';
                taskTypeInput.value = task.taskType || '';
                taskQuantityInput.value = task.quantity || 1;
                // Edit mode: only set points if it overrides the default setting
                taskPointsInput.value = task.pointsPerTask !== undefined ? task.pointsPerTask : ''; 
            } else {
                taskModalTitle.textContent = '‡¶®‡¶§‡ßÅ‡¶® ‡¶ü‡¶æ‡¶∏‡ßç‡¶ï ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡ßÅ‡¶®';
            }
            taskModal.style.display = 'flex';
        };

        // Event listener for form submission
        taskForm.addEventListener('submit', (e) => {
            e.preventDefault();
            handleSaveTask();
        });

        // ‡¶ü‡¶æ‡¶∏‡ßç‡¶ï ‡¶∏‡ßá‡¶≠ (‡¶§‡ßà‡¶∞‡¶ø/‡¶è‡¶°‡¶ø‡¶ü) ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶´‡¶æ‡¶Ç‡¶∂‡¶®
        const handleSaveTask = async () => {
            const taskId = taskIdInput.value.trim();
            const taskLink = taskLinkInput.value.trim();
            const taskType = taskTypeInput.value.trim();
            const quantity = parseInt(taskQuantityInput.value);
            // ‡¶Ø‡¶¶‡¶ø ‡¶á‡¶®‡¶™‡ßÅ‡¶ü ‡¶ñ‡¶æ‡¶≤‡¶ø ‡¶•‡¶æ‡¶ï‡ßá, ‡¶§‡¶¨‡ßá undefined ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ ‡¶π‡¶¨‡ßá, ‡¶Ø‡¶æ‡¶§‡ßá ‡¶°‡¶ø‡¶´‡¶≤‡ßç‡¶ü ‡¶™‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶ü ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶π‡¶Ø‡¶º
            const pointsPerTask = taskPointsInput.value.trim() === '' ? undefined : parseInt(taskPointsInput.value); 

            if (!taskLink || !taskType || isNaN(quantity) || quantity < 1) {
                showNotification('‡¶´‡¶∞‡ßç‡¶Æ‡ßá‡¶∞ ‡¶∏‡¶¨ ‡¶Ü‡¶¨‡¶∂‡ßç‡¶Ø‡¶ï ‡¶ò‡¶∞ ‡¶™‡ßÇ‡¶∞‡¶£ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§', 'error');
                return;
            }
            if (pointsPerTask !== undefined && (isNaN(pointsPerTask) || pointsPerTask < 0)) {
                showNotification('‡¶™‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶ü‡ßá‡¶∞ ‡¶Æ‡¶æ‡¶® ‡¶Ö‡¶¨‡¶∂‡ßç‡¶Ø‡¶á ‡¶∂‡ßÇ‡¶®‡ßç‡¶Ø ‡¶¨‡¶æ ‡¶§‡¶æ‡¶∞ ‡¶¨‡ßá‡¶∂‡¶ø ‡¶π‡¶§‡ßá ‡¶π‡¶¨‡ßá‡•§', 'error');
                return;
            }
            if (!currentUserId) { showNotification('‡¶§‡ßç‡¶∞‡ßÅ‡¶ü‡¶ø: ‡¶è‡¶°‡¶Æ‡¶ø‡¶® ‡¶Ü‡¶á‡¶°‡¶ø ‡¶™‡¶æ‡¶ì‡¶Ø‡¶º‡¶æ ‡¶Ø‡¶æ‡¶Ø‡¶º‡¶®‡¶ø‡•§', 'error'); return; }

            showNotification(taskId ? '‡¶ü‡¶æ‡¶∏‡ßç‡¶ï ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡¶æ ‡¶π‡¶ö‡ßç‡¶õ‡ßá...' : '‡¶®‡¶§‡ßÅ‡¶® ‡¶ü‡¶æ‡¶∏‡ßç‡¶ï ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡¶æ ‡¶π‡¶ö‡ßç‡¶õ‡ßá...', 'info');

            const taskData = {
                taskLink: taskLink,
                taskType: taskType,
                quantity: quantity,
                pointsPerTask: pointsPerTask, 
                status: 'active', // ‡¶®‡¶§‡ßÅ‡¶® ‡¶ü‡¶æ‡¶∏‡ßç‡¶ï ‡¶∏‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º ‡¶•‡¶æ‡¶ï‡¶¨‡ßá
                updatedBy: currentUserId,
                updatedAt: Date.now()
            };
            
            if (!taskId) {
                // ‡¶®‡¶§‡ßÅ‡¶® ‡¶ü‡¶æ‡¶∏‡ßç‡¶ï ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡¶æ
                taskData.createdBy = currentUserId;
                taskData.createdAt = Date.now();
            }

            try {
                if (taskId) {
                    // ‡¶ü‡¶æ‡¶∏‡ßç‡¶ï ‡¶è‡¶°‡¶ø‡¶ü ‡¶ï‡¶∞‡¶æ
                    const taskRef = ref(rtdb, `tasks/${taskId}`);
                    // ‡¶Ø‡¶¶‡¶ø pointsPerTask undefined ‡¶π‡¶Ø‡¶º, ‡¶§‡¶¨‡ßá ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶™‡ßá‡¶≤‡ßã‡¶° ‡¶•‡ßá‡¶ï‡ßá ‡¶è‡¶ü‡¶ø‡¶ï‡ßá ‡¶¨‡¶æ‡¶¶ ‡¶¶‡¶ø‡¶® ‡¶Ø‡¶æ‡¶§‡ßá ‡¶è‡¶ü‡¶ø ‡¶¨‡¶ø‡¶¶‡ßç‡¶Ø‡¶Æ‡¶æ‡¶® ‡¶Æ‡¶æ‡¶®‡¶ï‡ßá ‡¶ì‡¶≠‡¶æ‡¶∞‡¶∞‡¶æ‡¶á‡¶° ‡¶®‡¶æ ‡¶ï‡¶∞‡ßá
                    if (pointsPerTask === undefined) { delete taskData.pointsPerTask; }
                    await update(taskRef, taskData);
                    showNotification('‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶ü‡¶æ‡¶∏‡ßç‡¶ï ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá‡•§', 'success', 5000);
                } else {
                    // ‡¶®‡¶§‡ßÅ‡¶® ‡¶ü‡¶æ‡¶∏‡ßç‡¶ï ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡¶æ
                    const tasksRef = ref(rtdb, 'tasks');
                    await push(tasksRef, taskData);
                    showNotification('‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶®‡¶§‡ßÅ‡¶® ‡¶ü‡¶æ‡¶∏‡ßç‡¶ï ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá‡•§', 'success', 5000);
                }
                closeTaskModal();
            } catch (error) {
                console.error("Error saving task:", error);
                showNotification('‡¶ü‡¶æ‡¶∏‡ßç‡¶ï ‡¶∏‡ßá‡¶≠ ‡¶ï‡¶∞‡¶§‡ßá ‡¶¨‡ßç‡¶Ø‡¶∞‡ßç‡¶•: ‡¶°‡ßá‡¶ü‡¶æ‡¶¨‡ßá‡¶ú ‡¶§‡ßç‡¶∞‡ßÅ‡¶ü‡¶ø‡•§', 'error');
            }
        };


        // üî• ‡¶®‡¶§‡ßÅ‡¶® ‡¶®‡ßã‡¶ü‡¶ø‡¶∂ ‡¶Æ‡¶°‡¶æ‡¶≤ ‡¶´‡¶æ‡¶Ç‡¶∂‡¶®
        window.closeNoticeModal = () => {
            noticeModal.style.display = 'none';
            noticeForm.reset();
            noticeIdInput.value = '';
        };

        window.openNoticeModal = (notice = null) => {
            noticeForm.reset();
            noticeIdInput.value = '';
            
            if (notice) {
                noticeModalTitle.textContent = '‡¶®‡ßã‡¶ü‡¶ø‡¶∂ ‡¶è‡¶°‡¶ø‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®';
                noticeIdInput.value = notice.id;
                noticeTextInput.value = notice.text || '';
                noticeBgColorInput.value = notice.backgroundColor || '#ffc107';
                noticeTextColorInput.value = notice.textColor || '#343a40';
                noticeIsActiveInput.checked = notice.isActive !== false;
            } else {
                noticeModalTitle.textContent = '‡¶®‡¶§‡ßÅ‡¶® ‡¶®‡ßã‡¶ü‡¶ø‡¶∂ ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®';
                noticeBgColorInput.value = '#ffc107'; // ‡¶°‡¶ø‡¶´‡¶≤‡ßç‡¶ü ‡¶Æ‡¶æ‡¶®
                noticeTextColorInput.value = '#343a40'; // ‡¶°‡¶ø‡¶´‡¶≤‡ßç‡¶ü ‡¶Æ‡¶æ‡¶®
                noticeIsActiveInput.checked = true; // ‡¶°‡¶ø‡¶´‡¶≤‡ßç‡¶ü‡¶≠‡¶æ‡¶¨‡ßá ‡¶∏‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º
            }
            noticeModal.style.display = 'flex';
        };
        
        // ‡¶®‡ßã‡¶ü‡¶ø‡¶∂ ‡¶´‡¶∞‡ßç‡¶Æ ‡¶ú‡¶Æ‡¶æ ‡¶¶‡ßá‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞ ‡¶≤‡¶ø‡¶∏‡ßá‡¶®‡¶æ‡¶∞
        noticeForm.addEventListener('submit', (e) => {
            e.preventDefault();
            handleSaveNotice();
        });


        // End Modal functions

        /**
         * ‡¶è‡¶°‡¶Æ‡¶ø‡¶® ‡¶∞‡ßã‡¶≤ ‡¶ö‡ßá‡¶ï ‡¶ï‡¶∞‡¶æ ‡¶è‡¶¨‡¶Ç ‡¶Ö‡¶®‡ßÅ‡¶Æ‡ßã‡¶¶‡¶® ‡¶®‡¶æ ‡¶™‡ßá‡¶≤‡ßá ‡¶∞‡¶ø‡¶°‡¶æ‡¶á‡¶∞‡ßá‡¶ï‡ßç‡¶ü ‡¶ï‡¶∞‡¶æ‡•§
         */
        const checkAdminRole = (userId) => {
             const userRef = ref(rtdb, `users/${userId}/role`);
             onValue(userRef, (snapshot) => {
                 const role = snapshot.val();
                 if (role !== 'admin') {
                     showNotification("‡¶Ö‡¶®‡ßÅ‡¶Æ‡¶§‡¶ø ‡¶®‡ßá‡¶á! ‡¶∂‡ßÅ‡¶ß‡ßÅ ‡¶è‡¶°‡¶Æ‡¶ø‡¶®‡¶∞‡¶æ‡¶á ‡¶è‡¶á ‡¶™‡ßá‡¶ú‡ßá ‡¶™‡ßç‡¶∞‡¶¨‡ßá‡¶∂ ‡¶ï‡¶∞‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡ßá‡•§", 'error');
                     setTimeout(() => { window.location.href = 'index.html'; }, 1500);
                 } else {
                    startDataListeners();
                 }
             }, { onlyOnce: true });
        };
        
        // AUTH CHECK 
        onAuthStateChanged(auth, (user) => {
            if (user) {
                currentUserId = user.uid;
                checkAdminRole(currentUserId);
            } else {
                window.location.href = 'login.html';
            }
        });

        const startDataListeners = () => {
            // Listen for users data and cache it
            onValue(ref(rtdb, 'users'), (snapshot) => {
                const users = snapshot.val() || {};
                allUsersData = users; 
                renderUsers(users); 
            });

            // Listen for tasks data
            onValue(ref(rtdb, 'tasks'), (snapshot) => {
                const tasks = snapshot.val() || {};
                renderTasks(tasks);
                renderProofs(tasks); 
            });
            
            // ‡¶∞‡¶ø‡¶™‡ßã‡¶∞‡ßç‡¶ü ‡¶°‡ßá‡¶ü‡¶æ ‡¶≤‡¶ø‡¶∏‡ßá‡¶® ‡¶ï‡¶∞‡¶æ
            onValue(ref(rtdb, 'reports'), (snapshot) => {
                const reports = snapshot.val() || {};
                renderReports(reports); 
            });
            
            // ‡¶∏‡ßá‡¶ü‡¶ø‡¶Ç‡¶∏ ‡¶≤‡¶ø‡¶∏‡ßá‡¶® ‡¶ï‡¶∞‡¶æ
            loadControlSettings(); 
        };
        
        // ‡¶ï‡¶®‡ßç‡¶ü‡ßç‡¶∞‡ßã‡¶≤ ‡¶∏‡ßá‡¶ü‡¶ø‡¶Ç‡¶∏ ‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶´‡¶æ‡¶Ç‡¶∂‡¶® (‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡¶æ ‡¶π‡¶≤‡ßã)
        const loadControlSettings = () => {
            // ‡¶∞‡ßá‡¶´‡¶æ‡¶∞‡ßá‡¶≤ ‡¶∏‡ßá‡¶ü‡¶ø‡¶Ç‡¶∏ ‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡¶æ
            const referralRef = ref(rtdb, 'controls/referralBonus');
            onValue(referralRef, (snapshot) => {
                const controlData = snapshot.val() || {};
                referredBonusInput.value = controlData.referredUser || 0;
                refereeBonusInput.value = controlData.refereeUser || 0;
                referralStatus.textContent = `‡¶∏‡¶∞‡ßç‡¶¨‡¶∂‡ßá‡¶∑ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü: ${new Date().toLocaleTimeString('bn-BD')}`;
                referralStatus.classList.remove('hidden');
            });
            
            // ‡¶™‡ßç‡¶∞‡ßã‡¶°‡¶æ‡¶ï‡ßç‡¶ü ‡¶™‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶ü ‡¶∏‡ßá‡¶ü‡¶ø‡¶Ç‡¶∏ ‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡¶æ
            const productRef = ref(rtdb, 'controls/productPoints');
            onValue(productRef, (snapshot) => {
                const productData = snapshot.val() || {};
                reactPointsInput.value = productData.react || 0;
                commentPointsInput.value = productData.comment || 0;
                followPointsInput.value = productData.follow || 0;
                sharePointsInput.value = productData.share || 0;
                groupJoinPointsInput.value = productData.groupJoin || 0;
                productStatus.textContent = `‡¶∏‡¶∞‡ßç‡¶¨‡¶∂‡ßá‡¶∑ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü: ${new Date().toLocaleTimeString('bn-BD')}`;
                productStatus.classList.remove('hidden');
            });
            
            // üî• ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶ø‡¶§: ‡¶ó‡ßç‡¶≤‡ßã‡¶¨‡¶æ‡¶≤ ‡¶®‡ßã‡¶ü‡¶ø‡¶∂ ‡¶∏‡ßá‡¶ü‡¶ø‡¶Ç‡¶∏ ‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡¶æ
            const noticesRef = ref(rtdb, 'controls/settings/notices');
            onValue(noticesRef, (snapshot) => {
                const notices = snapshot.val() || {};
                renderNotices(notices);

                noticeListStatus.textContent = `‡¶∏‡¶∞‡ßç‡¶¨‡¶∂‡ßá‡¶∑ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü: ${new Date().toLocaleTimeString('bn-BD')}`;
                noticeListStatus.classList.remove('hidden');
            });
        };

        // üî• ‡¶®‡¶§‡ßÅ‡¶®: ‡¶®‡ßã‡¶ü‡¶ø‡¶∂ ‡¶§‡¶æ‡¶≤‡¶ø‡¶ï‡¶æ ‡¶∞‡ßá‡¶®‡ßç‡¶°‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶´‡¶æ‡¶Ç‡¶∂‡¶®
        const renderNotices = (notices) => {
            noticesList.innerHTML = '';
            const sortedNotices = Object.keys(notices).map(key => ({ id: key, ...notices[key] })).sort((a, b) => b.lastUpdatedAt - a.lastUpdatedAt);
            
            if (sortedNotices.length === 0) {
                noticesList.innerHTML = '<p class="text-center text-gray-500 py-4">‡¶è‡¶á ‡¶Æ‡ßÅ‡¶π‡ßÇ‡¶∞‡ßç‡¶§‡ßá ‡¶ï‡ßã‡¶®‡ßã ‡¶®‡ßã‡¶ü‡¶ø‡¶∂ ‡¶∏‡ßá‡¶ü ‡¶ï‡¶∞‡¶æ ‡¶®‡ßá‡¶á‡•§</p>';
                return;
            }

            sortedNotices.forEach((notice) => {
                const statusColor = notice.isActive ? 'bg-green-100 text-green-700' : 'bg-red-100 text-red-700';
                const statusText = notice.isActive ? '‡¶∏‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º' : '‡¶®‡¶ø‡¶∑‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º';
                const toggleBtnClass = notice.isActive ? 'bg-red-500 hover:bg-red-600' : 'bg-green-500 hover:bg-green-600';
                const toggleIcon = notice.isActive ? 'fa-ban' : 'fa-check-circle';
                const toggleTitle = notice.isActive ? '‡¶®‡¶ø‡¶∑‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º ‡¶ï‡¶∞‡ßÅ‡¶®' : '‡¶∏‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º ‡¶ï‡¶∞‡ßÅ‡¶®';

                // ‡¶®‡ßã‡¶ü‡¶ø‡¶∂ ‡¶è‡¶°‡¶ø‡¶ü ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø JSON ‡¶∏‡ßç‡¶ü‡ßç‡¶∞‡¶ø‡¶Ç ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡¶æ
                const noticeForEdit = JSON.stringify(notice).replace(/"/g, '&quot;');
                
                const noticeCard = `
                    <div class="app-card p-4 flex flex-col md:flex-row justify-between items-start md:items-center" style="border-left: 5px solid ${notice.backgroundColor || '#ffc107'};">
                        <div class="flex-1 min-w-0 mb-3 md:mb-0">
                            <p class="text-xs font-semibold ${statusColor} px-2 py-0.5 rounded-full inline-block mb-1">${statusText}</p>
                            <p class="text-sm font-medium text-gray-700 overflow-hidden text-ellipsis whitespace-nowrap" 
                               style="color: ${notice.textColor || '#343a40'};" title="${notice.text}">
                                ${notice.text}
                            </p>
                            <p class="text-xs text-gray-400 mt-1">‡¶Ü‡¶™‡¶°‡ßá‡¶ü: ${new Date(notice.lastUpdatedAt).toLocaleTimeString('bn-BD')}</p>
                        </div>
                        <div class="flex flex-wrap gap-2 justify-end">
                            <!-- ‡¶ü‡¶ó‡¶≤ ‡¶¨‡¶æ‡¶ü‡¶® -->
                            <button class="px-3 py-1 rounded-lg text-xs font-bold text-white transition-colors duration-200 ${toggleBtnClass}" 
                                onclick="handleToggleNoticeStatus('${notice.id}', ${notice.isActive})">
                                <i class="fas ${toggleIcon} mr-1"></i> ${toggleTitle}
                            </button>

                            <!-- ‡¶è‡¶°‡¶ø‡¶ü ‡¶¨‡¶æ‡¶ü‡¶® -->
                            <button class="px-3 py-1 rounded-lg text-xs font-bold text-white transition-colors duration-200 bg-indigo-500 hover:bg-indigo-600" 
                                onclick='openNoticeModal(${noticeForEdit})'>
                                <i class="fas fa-edit mr-1"></i> ‡¶è‡¶°‡¶ø‡¶ü
                            </button>

                            <!-- ‡¶°‡¶ø‡¶≤‡¶ø‡¶ü ‡¶¨‡¶æ‡¶ü‡¶® -->
                            <button class="px-3 py-1 rounded-lg text-xs font-bold text-white transition-colors duration-200 bg-gray-500 hover:bg-gray-600" 
                                onclick="openAdminModal('deleteNotice', { noticeId: '${notice.id}', noticeText: '${notice.text}' })">
                                <i class="fas fa-trash mr-1"></i> ‡¶Æ‡ßÅ‡¶õ‡ßÅ‡¶®
                            </button>
                        </div>
                    </div>
                `;
                noticesList.insertAdjacentHTML('beforeend', noticeCard);
            });
        };

        // ‡¶∞‡ßá‡¶´‡¶æ‡¶∞‡ßá‡¶≤ ‡¶ï‡¶®‡ßç‡¶ü‡ßç‡¶∞‡ßã‡¶≤ ‡¶∏‡ßá‡¶ü‡¶ø‡¶Ç‡¶∏ ‡¶∏‡ßá‡¶≠ ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶´‡¶æ‡¶Ç‡¶∂‡¶®
        const handleSaveReferralSettings = async () => {
            const referredValue = parseInt(referredBonusInput.value) || 0;
            const refereeValue = parseInt(refereeBonusInput.value) || 0;
            
            if (referredValue < 0 || refereeValue < 0) {
                showNotification('‡¶∞‡ßá‡¶´‡¶æ‡¶∞‡ßá‡¶≤ ‡¶™‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶ü‡ßá‡¶∞ ‡¶Æ‡¶æ‡¶® ‡¶Ö‡¶¨‡¶∂‡ßç‡¶Ø‡¶á ‡¶∂‡ßÇ‡¶®‡ßç‡¶Ø ‡¶¨‡¶æ ‡¶§‡¶æ‡¶∞ ‡¶¨‡ßá‡¶∂‡¶ø ‡¶π‡¶§‡ßá ‡¶π‡¶¨‡ßá‡•§', 'error');
                return;
            }
            if (!currentUserId) { showNotification('‡¶§‡ßç‡¶∞‡ßÅ‡¶ü‡¶ø: ‡¶è‡¶°‡¶Æ‡¶ø‡¶® ‡¶Ü‡¶á‡¶°‡¶ø ‡¶™‡¶æ‡¶ì‡¶Ø‡¶º‡¶æ ‡¶Ø‡¶æ‡¶Ø‡¶º‡¶®‡¶ø‡•§', 'error'); return; }
            showNotification('‡¶∞‡ßá‡¶´‡¶æ‡¶∞‡ßá‡¶≤ ‡¶∏‡ßá‡¶ü‡¶ø‡¶Ç‡¶∏ ‡¶∏‡ßá‡¶≠ ‡¶ï‡¶∞‡¶æ ‡¶π‡¶ö‡ßç‡¶õ‡ßá...', 'info');
            const controlRef = ref(rtdb, 'controls/referralBonus');
            try {
                await update(controlRef, {
                    referredUser: referredValue,
                    refereeUser: refereeValue,
                    lastUpdatedBy: currentUserId,
                    lastUpdatedAt: Date.now()
                });
                showNotification('‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶∞‡ßá‡¶´‡¶æ‡¶∞‡ßá‡¶≤ ‡¶∏‡ßá‡¶ü‡¶ø‡¶Ç‡¶∏ ‡¶∏‡ßá‡¶≠ ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá‡•§', 'success', 5000);
            } catch (error) {
                console.error("Error saving referral settings:", error);
                showNotification('‡¶∞‡ßá‡¶´‡¶æ‡¶∞‡ßá‡¶≤ ‡¶∏‡ßá‡¶ü‡¶ø‡¶Ç‡¶∏ ‡¶∏‡ßá‡¶≠ ‡¶ï‡¶∞‡¶§‡ßá ‡¶¨‡ßç‡¶Ø‡¶∞‡ßç‡¶•: ‡¶°‡ßá‡¶ü‡¶æ‡¶¨‡ßá‡¶ú ‡¶§‡ßç‡¶∞‡ßÅ‡¶ü‡¶ø‡•§', 'error');
            }
        };

        // ‡¶™‡ßç‡¶∞‡ßã‡¶°‡¶æ‡¶ï‡ßç‡¶ü ‡¶™‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶ü ‡¶∏‡ßá‡¶ü‡¶ø‡¶Ç‡¶∏ ‡¶∏‡ßá‡¶≠ ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶´‡¶æ‡¶Ç‡¶∂‡¶®
        const handleSaveProductPoints = async () => {
            const reactValue = parseInt(reactPointsInput.value) || 0;
            const commentValue = parseInt(commentPointsInput.value) || 0;
            const followValue = parseInt(followPointsInput.value) || 0;
            const shareValue = parseInt(sharePointsInput.value) || 0;
            const groupJoinValue = parseInt(groupJoinPointsInput.value) || 0;
            
            if (reactValue < 0 || commentValue < 0 || followValue < 0 || shareValue < 0 || groupJoinValue < 0) {
                showNotification('‡¶ü‡¶æ‡¶∏‡ßç‡¶ï ‡¶™‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶ü‡ßá‡¶∞ ‡¶Æ‡¶æ‡¶® ‡¶Ö‡¶¨‡¶∂‡ßç‡¶Ø‡¶á ‡¶∂‡ßÇ‡¶®‡ßç‡¶Ø ‡¶¨‡¶æ ‡¶§‡¶æ‡¶∞ ‡¶¨‡ßá‡¶∂‡¶ø ‡¶π‡¶§‡ßá ‡¶π‡¶¨‡ßá‡•§', 'error');
                return;
            }
            if (!currentUserId) { showNotification('‡¶§‡ßç‡¶∞‡ßÅ‡¶ü‡¶ø: ‡¶è‡¶°‡¶Æ‡¶ø‡¶® ‡¶Ü‡¶á‡¶°‡¶ø ‡¶™‡¶æ‡¶ì‡¶Ø‡¶º‡¶æ ‡¶Ø‡¶æ‡¶Ø‡¶º‡¶®‡¶ø‡•§', 'error'); return; }
            showNotification('‡¶ü‡¶æ‡¶∏‡ßç‡¶ï ‡¶™‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶ü ‡¶∏‡ßá‡¶≠ ‡¶ï‡¶∞‡¶æ ‡¶π‡¶ö‡ßç‡¶õ‡ßá...', 'info');
            const productPointsRef = ref(rtdb, 'controls/productPoints');
            try {
                await update(productPointsRef, {
                    react: reactValue, comment: commentValue, follow: followValue, 
                    share: shareValue, groupJoin: groupJoinValue,
                    lastUpdatedBy: currentUserId, lastUpdatedAt: Date.now()
                });
                showNotification('‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶ü‡¶æ‡¶∏‡ßç‡¶ï ‡¶™‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶ü ‡¶∏‡ßá‡¶≠ ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá‡•§', 'success', 5000);
            } catch (error) {
                console.error("Error saving product points:", error);
                showNotification('‡¶ü‡¶æ‡¶∏‡ßç‡¶ï ‡¶™‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶ü ‡¶∏‡ßá‡¶≠ ‡¶ï‡¶∞‡¶§‡ßá ‡¶¨‡ßç‡¶Ø‡¶∞‡ßç‡¶•: ‡¶°‡ßá‡¶ü‡¶æ‡¶¨‡ßá‡¶ú ‡¶§‡ßç‡¶∞‡ßÅ‡¶ü‡¶ø‡•§', 'error');
            }
        };

        // üî• ‡¶®‡¶§‡ßÅ‡¶®: ‡¶®‡ßã‡¶ü‡¶ø‡¶∂ ‡¶∏‡ßá‡¶≠ ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶´‡¶æ‡¶Ç‡¶∂‡¶® (‡¶§‡ßà‡¶∞‡¶ø ‡¶¨‡¶æ ‡¶è‡¶°‡¶ø‡¶ü)
        const handleSaveNotice = async () => {
            const noticeId = noticeIdInput.value.trim();
            const noticeText = noticeTextInput.value.trim();
            const bgColor = noticeBgColorInput.value;
            const textColor = noticeTextColorInput.value;
            const isActive = noticeIsActiveInput.checked;

            if (!currentUserId) { showNotification('‡¶§‡ßç‡¶∞‡ßÅ‡¶ü‡¶ø: ‡¶è‡¶°‡¶Æ‡¶ø‡¶® ‡¶Ü‡¶á‡¶°‡¶ø ‡¶™‡¶æ‡¶ì‡¶Ø‡¶º‡¶æ ‡¶Ø‡¶æ‡¶Ø‡¶º‡¶®‡¶ø‡•§', 'error'); return; }

            if (noticeText.length < 5) {
                showNotification('‡¶®‡ßã‡¶ü‡¶ø‡¶∂ ‡¶Æ‡ßá‡¶∏‡ßá‡¶ú‡¶ü‡¶ø ‡¶ï‡¶Æ‡¶™‡¶ï‡ßç‡¶∑‡ßá ‡ß´ ‡¶Ö‡¶ï‡ßç‡¶∑‡¶∞‡ßá‡¶∞ ‡¶π‡¶§‡ßá ‡¶π‡¶¨‡ßá‡•§', 'error');
                return;
            }

            showNotification(noticeId ? '‡¶®‡ßã‡¶ü‡¶ø‡¶∂ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡¶æ ‡¶π‡¶ö‡ßç‡¶õ‡ßá...' : '‡¶®‡¶§‡ßÅ‡¶® ‡¶®‡ßã‡¶ü‡¶ø‡¶∂ ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡¶æ ‡¶π‡¶ö‡ßç‡¶õ‡ßá...', 'info');
            
            const noticeData = {
                text: noticeText,
                isActive: isActive,
                backgroundColor: bgColor,
                textColor: textColor,
                lastUpdatedBy: currentUserId,
                lastUpdatedAt: Date.now()
            };

            try {
                if (noticeId) {
                    // ‡¶®‡ßã‡¶ü‡¶ø‡¶∂ ‡¶è‡¶°‡¶ø‡¶ü
                    const noticeRef = ref(rtdb, `controls/settings/notices/${noticeId}`);
                    await update(noticeRef, noticeData);
                    showNotification('‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶®‡ßã‡¶ü‡¶ø‡¶∂ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá‡•§', 'success', 5000);
                } else {
                    // ‡¶®‡¶§‡ßÅ‡¶® ‡¶®‡ßã‡¶ü‡¶ø‡¶∂ ‡¶§‡ßà‡¶∞‡¶ø
                    const noticesRef = ref(rtdb, 'controls/settings/notices');
                    await push(noticesRef, {
                        ...noticeData,
                        createdAt: Date.now()
                    });
                    showNotification('‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶®‡¶§‡ßÅ‡¶® ‡¶®‡ßã‡¶ü‡¶ø‡¶∂ ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá‡•§', 'success', 5000);
                }
                closeNoticeModal();
            } catch (error) {
                console.error("Error saving notice:", error);
                showNotification('‡¶®‡ßã‡¶ü‡¶ø‡¶∂ ‡¶∏‡ßá‡¶≠ ‡¶ï‡¶∞‡¶§‡ßá ‡¶¨‡ßç‡¶Ø‡¶∞‡ßç‡¶•: ‡¶°‡ßá‡¶ü‡¶æ‡¶¨‡ßá‡¶ú ‡¶§‡ßç‡¶∞‡ßÅ‡¶ü‡¶ø‡•§', 'error');
            }
        };
        
        // üî• ‡¶®‡¶§‡ßÅ‡¶®: ‡¶®‡ßã‡¶ü‡¶ø‡¶∂ ‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∏ ‡¶ü‡¶ó‡¶≤ ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶´‡¶æ‡¶Ç‡¶∂‡¶®
        window.handleToggleNoticeStatus = async (noticeId, currentStatus) => {
            if (!currentUserId) { showNotification('‡¶§‡ßç‡¶∞‡ßÅ‡¶ü‡¶ø: ‡¶è‡¶°‡¶Æ‡¶ø‡¶® ‡¶Ü‡¶á‡¶°‡¶ø ‡¶™‡¶æ‡¶ì‡¶Ø‡¶º‡¶æ ‡¶Ø‡¶æ‡¶Ø‡¶º‡¶®‡¶ø‡•§', 'error'); return; }
            const newStatus = !currentStatus;
            showNotification(newStatus ? '‡¶®‡ßã‡¶ü‡¶ø‡¶∂ ‡¶∏‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º ‡¶ï‡¶∞‡¶æ ‡¶π‡¶ö‡ßç‡¶õ‡ßá...' : '‡¶®‡ßã‡¶ü‡¶ø‡¶∂ ‡¶®‡¶ø‡¶∑‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º ‡¶ï‡¶∞‡¶æ ‡¶π‡¶ö‡ßç‡¶õ‡ßá...', 'info');
            
            const noticeRef = ref(rtdb, `controls/settings/notices/${noticeId}`);
            try {
                await update(noticeRef, {
                    isActive: newStatus,
                    lastUpdatedBy: currentUserId,
                    lastUpdatedAt: Date.now()
                });
                showNotification(`‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶®‡ßã‡¶ü‡¶ø‡¶∂ ${newStatus ? '‡¶∏‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º' : '‡¶®‡¶ø‡¶∑‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º'} ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá‡•§`, 'success', 3000);
            } catch (error) {
                console.error("Error toggling notice status:", error);
                showNotification('‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∏ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡¶§‡ßá ‡¶¨‡ßç‡¶Ø‡¶∞‡ßç‡¶•‡•§', 'error');
            }
        };
        
        // üî• ‡¶®‡¶§‡ßÅ‡¶®: ‡¶®‡ßã‡¶ü‡¶ø‡¶∂ ‡¶°‡¶ø‡¶≤‡¶ø‡¶ü ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶´‡¶æ‡¶Ç‡¶∂‡¶®
        window.handleDeleteNotice = async (noticeId) => {
            if (!currentUserId) { showNotification('‡¶§‡ßç‡¶∞‡ßÅ‡¶ü‡¶ø: ‡¶è‡¶°‡¶Æ‡¶ø‡¶® ‡¶Ü‡¶á‡¶°‡¶ø ‡¶™‡¶æ‡¶ì‡¶Ø‡¶º‡¶æ ‡¶Ø‡¶æ‡¶Ø‡¶º‡¶®‡¶ø‡•§', 'error'); return; }
            showNotification('‡¶®‡ßã‡¶ü‡¶ø‡¶∂ ‡¶Æ‡ßÅ‡¶õ‡ßá ‡¶´‡ßá‡¶≤‡¶æ ‡¶π‡¶ö‡ßç‡¶õ‡ßá...', 'info');

            const noticeRef = ref(rtdb, `controls/settings/notices/${noticeId}`);
            try {
                await remove(noticeRef);
                showNotification('‡¶®‡ßã‡¶ü‡¶ø‡¶∂ ‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶Æ‡ßÅ‡¶õ‡ßá ‡¶´‡ßá‡¶≤‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá‡•§', 'success', 3000);
            } catch (error) {
                console.error("Error deleting notice:", error);
                showNotification('‡¶®‡ßã‡¶ü‡¶ø‡¶∂ ‡¶Æ‡ßÅ‡¶õ‡¶§‡ßá ‡¶¨‡ßç‡¶Ø‡¶∞‡ßç‡¶•‡•§', 'error');
            }
        };


        // ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶™‡ßç‡¶∞‡ßã‡¶´‡¶æ‡¶á‡¶≤ ‡¶è‡¶°‡¶ø‡¶ü ‡¶´‡¶∞‡ßç‡¶Æ ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶´‡¶æ‡¶Ç‡¶∂‡¶® (‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá: ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶∂‡¶® ‡¶¨‡¶æ‡¶ü‡¶® ‡¶Ø‡ßÅ‡¶ï‡ßç‡¶§ ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá)
        const generateProfileEditForm = (user) => {
            const userId = user.uid;
            const displayName = user.facebookName || 'N/A';
            const currentPoints = user.points || 0;
            const isVerified = user.isVerified || false;
            const isSuspended = user.suspension?.suspended && user.suspension.suspendUntil > Date.now();

            // 1. ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶∂‡¶® ‡¶¨‡¶æ‡¶ü‡¶® ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡¶æ
            const verificationButton = `
                <button class="w-full sm:w-auto px-4 py-2 rounded-lg text-sm font-bold text-white transition-colors duration-200 ${isVerified ? 'bg-red-500 hover:bg-red-600' : 'bg-green-500 hover:bg-green-600'}" 
                    onclick="toggleVerification('${userId}', ${isVerified})" 
                    title="${isVerified ? '‡¶≠‡ßá‡¶∞‡¶ø‡¶´‡¶ø‡¶ï‡ßá‡¶∂‡¶® ‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∏ ‡¶¨‡¶æ‡¶§‡¶ø‡¶≤ ‡¶ï‡¶∞‡ßÅ‡¶®' : '‡¶á‡¶â‡¶ú‡¶æ‡¶∞‡¶ï‡ßá ‡¶≠‡ßá‡¶∞‡¶ø‡¶´‡¶æ‡¶á ‡¶ï‡¶∞‡ßÅ‡¶®'}">
                    <i class="fas ${isVerified ? 'fa-ban' : 'fa-user-check'} mr-2"></i>
                    ${isVerified ? '‡¶≠‡ßá‡¶∞‡¶ø‡¶´‡¶ø‡¶ï‡ßá‡¶∂‡¶® ‡¶¨‡¶æ‡¶§‡¶ø‡¶≤' : '‡¶á‡¶â‡¶ú‡¶æ‡¶∞‡¶ï‡ßá ‡¶≠‡ßá‡¶∞‡¶ø‡¶´‡¶æ‡¶á ‡¶ï‡¶∞‡ßÅ‡¶®'}
                </button>
            `;
            
            const suspensionActionHtml = isSuspended ? `
                <button class="w-full sm:w-auto px-4 py-2 rounded-lg text-sm font-bold text-white transition-colors duration-200 bg-green-500 hover:bg-green-600" 
                    onclick="openAdminModal('unsuspendUser', { userId: '${userId}', userName: '${displayName}' })" 
                    title="‡¶∏‡¶æ‡¶∏‡¶™‡ßá‡¶®‡¶∂‡¶® ‡¶™‡ßç‡¶∞‡¶§‡ßç‡¶Ø‡¶æ‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßÅ‡¶®">
                    <i class="fas fa-undo mr-2"></i> ‡¶∏‡¶æ‡¶∏‡¶™‡ßá‡¶®‡¶∂‡¶® ‡¶¨‡¶æ‡¶¶ ‡¶¶‡¶ø‡¶®
                </button>
            ` : `
                <button class="w-full sm:w-auto px-4 py-2 rounded-lg text-sm font-bold text-white transition-colors duration-200 bg-red-600 hover:bg-red-700" 
                    onclick="openAdminModal('suspendUser', { userId: '${userId}', userName: '${displayName}' })" 
                    title="‡¶®‡¶ø‡¶∞‡ßç‡¶¶‡¶ø‡¶∑‡ßç‡¶ü ‡¶∏‡¶Æ‡¶Ø‡¶º‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶∏‡¶æ‡¶∏‡¶™‡ßá‡¶®‡ßç‡¶° ‡¶ï‡¶∞‡ßÅ‡¶®">
                    <i class="fas fa-gavel mr-2"></i> ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶∏‡¶æ‡¶∏‡¶™‡ßá‡¶®‡ßç‡¶° ‡¶ï‡¶∞‡ßÅ‡¶®
                </button>
            `;
            
            const pointAdjustButton = `
                <button class="w-full sm:w-auto px-4 py-2 rounded-lg text-sm font-bold text-white transition-colors duration-200 bg-yellow-500 hover:bg-yellow-600" 
                    onclick="openAdminModal('adjustPoints', { userId: '${userId}', userName: '${displayName}', currentPoints: ${currentPoints} })" 
                    title="‡¶™‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶ü ‡¶¨‡¶æ‡¶°‡¶º‡¶æ‡¶® ‡¶¨‡¶æ ‡¶ï‡¶Æ‡¶æ‡¶®">
                    <i class="fas fa-coins mr-2"></i> ‡¶™‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶ü ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶ú‡¶æ‡¶∏‡ßç‡¶ü
                </button>
            `;

            const actionsSection = `
                <div class="mb-6 pb-4 border-b border-gray-200">
                    <h4 class="text-xl font-bold text-gray-800 mb-4">‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶Æ‡¶ø‡¶® ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶∂‡¶®‡¶∏‡¶Æ‡ßÇ‡¶π</h4>
                    <div class="flex flex-wrap gap-3">
                        ${pointAdjustButton}
                        ${suspensionActionHtml}
                        ${verificationButton}
                    </div>
                </div>
            `;
            
            // 2. ‡¶™‡ßç‡¶∞‡ßã‡¶´‡¶æ‡¶á‡¶≤ ‡¶°‡ßá‡¶ü‡¶æ ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡¶æ
            const userProperties = {};
            for (const key in user) {
                // ‡¶Ö‡¶¨‡¶ú‡ßá‡¶ï‡ßç‡¶ü ‡¶¨‡¶æ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶∞‡ßá‡¶ï‡ßá ‡¶∏‡ßç‡¶ü‡ßç‡¶∞‡¶ø‡¶Ç‡¶´‡¶æ‡¶á‡¶° JSON ‡¶π‡¶ø‡¶∏‡ßá‡¶¨‡ßá ‡¶¶‡ßá‡¶ñ‡¶æ‡¶§‡ßá ‡¶π‡¶¨‡ßá
                if (typeof user[key] === 'object' && user[key] !== null) {
                    userProperties[key] = JSON.stringify(user[key], null, 2);
                } else {
                    userProperties[key] = user[key];
                }
            }

            // ‡¶Ø‡ßá ‡¶ï‡ßÄ‡¶ó‡ßÅ‡¶≤‡ßã ‡¶è‡¶°‡¶ø‡¶ü ‡¶ï‡¶∞‡¶æ ‡¶Ø‡¶æ‡¶¨‡ßá ‡¶®‡¶æ
            const nonEditableKeys = ['uid', 'facebookName', 'email', 'createdAt', 'lastLoginAt', 'suspension'];

            let formHtml = `
                <h4 class="text-xl font-bold text-gray-800 mb-4 pt-4 border-t border-gray-200">‡¶™‡ßç‡¶∞‡ßã‡¶´‡¶æ‡¶á‡¶≤ ‡¶°‡ßá‡¶ü‡¶æ ‡¶è‡¶°‡¶ø‡¶ü</h4>
                <form onsubmit="event.preventDefault(); handleProfileUpdate('${userId}');" id="profile-form-${userId}" class="grid grid-cols-1 md:grid-cols-2 gap-4">`;

            for (const key in userProperties) {
                const isEditable = !nonEditableKeys.includes(key);
                const value = userProperties[key];

                const inputId = `edit-${userId}-${key}`;
                const labelText = key.replace(/([A-Z])/g, ' $1').replace(/^./, str => str.toUpperCase()); // camelCase ‡¶ï‡ßá ‡¶∏‡ßç‡¶™‡ßá‡¶∏ ‡¶∏‡¶π Capitalize ‡¶ï‡¶∞‡¶æ

                if (key === 'role') {
                    // ‡¶∞‡ßã‡¶≤‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶°‡ßç‡¶∞‡¶™‡¶°‡¶æ‡¶â‡¶®
                    formHtml += `
                        <div class="space-y-1">
                            <label for="${inputId}" class="block text-sm font-medium text-gray-700">${labelText}:</label>
                            <select id="${inputId}" class="w-full p-2 border rounded-lg focus:ring-blue-500 focus:border-blue-500 ${isEditable ? 'bg-white border-blue-300' : 'bg-gray-100 border-gray-300'}">
                                <option value="user" ${value === 'user' ? 'selected' : ''}>User</option>
                                <option value="moderator" ${value === 'moderator' ? 'selected' : ''}>Moderator</option>
                                <option value="admin" ${value === 'admin' ? 'selected' : ''}>Admin</option>
                            </select>
                        </div>
                    `;
                } else {
                    // ‡¶Ö‡¶®‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶Ø ‡¶´‡¶ø‡¶≤‡ßç‡¶°‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶ü‡ßá‡¶ï‡ßç‡¶∏‡¶ü ‡¶á‡¶®‡¶™‡ßÅ‡¶ü
                    formHtml += `
                        <div class="space-y-1">
                            <label for="${inputId}" class="block text-sm font-medium text-gray-700">${labelText}:</label>
                            <input 
                                type="text" 
                                id="${inputId}" 
                                value="${value}" 
                                ${isEditable ? '' : 'readonly'}
                                class="w-full p-2 border rounded-lg ${isEditable ? 'bg-white border-green-300 focus:ring-green-500 focus:border-green-500' : 'bg-gray-100 text-gray-600 border-gray-300'}"
                            >
                        </div>
                    `;
                }
            }

            formHtml += `
                </form>
                <div class="col-span-full pt-6">
                    <button onclick="handleProfileUpdate('${userId}')" class="w-full brand-blue text-white py-3 rounded-lg font-bold hover:brightness-110 transition duration-200">
                        <i class="fas fa-save mr-2"></i> ‡¶™‡ßç‡¶∞‡ßã‡¶´‡¶æ‡¶á‡¶≤ ‡¶°‡ßá‡¶ü‡¶æ ‡¶∏‡ßá‡¶≠ ‡¶ï‡¶∞‡ßÅ‡¶®
                    </button>
                </div>
            `;

            return actionsSection + formHtml;
        };

        // ‡¶™‡ßç‡¶∞‡ßã‡¶´‡¶æ‡¶á‡¶≤ ‡¶°‡ßá‡¶ü‡¶æ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶´‡¶æ‡¶Ç‡¶∂‡¶®
        window.handleProfileUpdate = async (userId) => {
            const form = document.getElementById(`profile-form-${userId}`);
            if (!form) return;

            showNotification('‡¶™‡ßç‡¶∞‡ßã‡¶´‡¶æ‡¶á‡¶≤ ‡¶°‡ßá‡¶ü‡¶æ ‡¶∏‡ßá‡¶≠ ‡¶ï‡¶∞‡¶æ ‡¶π‡¶ö‡ßç‡¶õ‡ßá...', 'info');

            const updates = {};
            const children = form.querySelectorAll('div > *[id]');
            
            // ‡¶Ø‡ßá ‡¶ï‡ßÄ‡¶ó‡ßÅ‡¶≤‡ßã ‡¶è‡¶°‡¶ø‡¶ü ‡¶ï‡¶∞‡¶æ ‡¶Ø‡¶æ‡¶¨‡ßá ‡¶®‡¶æ
            const nonEditableKeys = ['uid', 'facebookName', 'email', 'createdAt', 'lastLoginAt', 'suspension'];

            children.forEach(input => {
                const key = input.id.replace(`edit-${userId}-`, '');
                
                // ‡¶è‡¶°‡¶ø‡¶ü ‡¶ï‡¶∞‡¶æ ‡¶Ø‡¶æ‡¶¨‡ßá ‡¶®‡¶æ ‡¶è‡¶Æ‡¶® ‡¶ï‡ßÄ ‡¶¨‡¶æ‡¶¶ ‡¶¶‡ßá‡¶ì‡¶Ø‡¶º‡¶æ
                if (nonEditableKeys.includes(key)) return; 
                
                let value = input.value;
                
                // ‡¶Ø‡¶¶‡¶ø ‡¶è‡¶ü‡¶ø JSON ‡¶∏‡ßç‡¶ü‡ßç‡¶∞‡¶ø‡¶Ç ‡¶õ‡¶ø‡¶≤, ‡¶§‡¶¨‡ßá ‡¶™‡¶æ‡¶∞‡ßç‡¶∏ ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶ö‡ßá‡¶∑‡ßç‡¶ü‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶® (‡¶Ø‡ßá‡¶Æ‡¶®: array, object)
                if (value.startsWith('{') || value.startsWith('[')) {
                    try {
                        value = JSON.parse(value);
                    } catch (e) {
                        showNotification(`‡¶§‡ßç‡¶∞‡ßÅ‡¶ü‡¶ø: ${key} ‡¶´‡¶ø‡¶≤‡ßç‡¶°‡ßá ‡¶Ö‡¶¨‡ßà‡¶ß JSON ‡¶°‡ßá‡¶ü‡¶æ‡•§`, 'error');
                        return; // ‡¶Ö‡¶¨‡ßà‡¶ß JSON ‡¶π‡¶≤‡ßá ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶•‡¶æ‡¶Æ‡¶æ‡¶®‡ßã
                    }
                } else if (key === 'points' || key === 'trustScore' || key === 'tasksCompleted') {
                    // ‡¶∏‡¶Ç‡¶ñ‡ßç‡¶Ø‡¶æ‡¶ï‡ßá ‡¶á‡¶®‡ßç‡¶ü‡¶ø‡¶ú‡¶æ‡¶∞‡ßá ‡¶∞‡ßÇ‡¶™‡¶æ‡¶®‡ßç‡¶§‡¶∞ ‡¶ï‡¶∞‡¶æ
                    value = parseInt(value) || 0;
                }
                
                updates[key] = value;
            });
            
            if (Object.keys(updates).length === 0) {
                 showNotification('‡¶ï‡ßã‡¶®‡ßã ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶® ‡¶™‡¶æ‡¶ì‡¶Ø‡¶º‡¶æ ‡¶Ø‡¶æ‡¶Ø‡¶º‡¶®‡¶ø ‡¶¨‡¶æ ‡¶∏‡¶¨ ‡¶´‡¶ø‡¶≤‡ßç‡¶° ‡¶è‡¶°‡¶ø‡¶ü ‡¶ï‡¶∞‡¶æ ‡¶Ø‡¶æ‡¶Ø‡¶º ‡¶®‡¶æ‡•§', 'info');
                 return;
            }

            const userRef = ref(rtdb, `users/${userId}`);
            try {
                await update(userRef, updates);
                showNotification('‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶™‡ßç‡¶∞‡ßã‡¶´‡¶æ‡¶á‡¶≤ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá!', 'success', 5000);
            } catch (error) {
                console.error("Error updating user profile:", error);
                showNotification('‡¶™‡ßç‡¶∞‡ßã‡¶´‡¶æ‡¶á‡¶≤ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡¶§‡ßá ‡¶¨‡ßç‡¶Ø‡¶∞‡ßç‡¶•: ‡¶°‡ßá‡¶ü‡¶æ‡¶¨‡ßá‡¶ú ‡¶§‡ßç‡¶∞‡ßÅ‡¶ü‡¶ø‡•§', 'error');
            }
        };

        // ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶°‡¶ø‡¶ü‡ßá‡¶á‡¶≤‡¶∏ ‡¶ü‡¶ó‡¶≤ ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶´‡¶æ‡¶Ç‡¶∂‡¶® (‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá: ‡¶è‡¶ñ‡¶® ‡¶∏‡¶Æ‡ßç‡¶™‡ßÇ‡¶∞‡ßç‡¶£ ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶Ö‡¶¨‡¶ú‡ßá‡¶ï‡ßç‡¶ü ‡¶™‡¶æ‡¶∏ ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º)
        window.toggleUserDetails = (userId) => {
            const detailRow = document.getElementById(`details-row-${userId}`);
            const user = allUsersData[userId];
            const icon = document.getElementById(`toggle-icon-${userId}`);
            
            if (!detailRow) return;

            if (detailRow.classList.contains('hidden')) {
                // ‡¶°‡ßá‡¶ü‡¶æ ‡¶∞‡ßá‡¶®‡ßç‡¶°‡¶æ‡¶∞ ‡¶è‡¶¨‡¶Ç ‡¶¶‡ßá‡¶ñ‡¶æ‡¶®‡ßã
                if (user) {
                    // ‡¶∏‡¶Æ‡ßç‡¶™‡ßÇ‡¶∞‡ßç‡¶£ ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶Ö‡¶¨‡¶ú‡ßá‡¶ï‡ßç‡¶ü generateProfileEditForm-‡¶è ‡¶™‡¶æ‡¶†‡¶æ‡¶®‡ßã ‡¶π‡¶ö‡ßç‡¶õ‡ßá
                    const contentHtml = generateProfileEditForm(user);
                    detailRow.querySelector('.user-details-content').innerHTML = contentHtml;
                }
                detailRow.classList.remove('hidden');
                icon.classList.remove('fa-chevron-down');
                icon.classList.add('fa-chevron-up');
            } else {
                // ‡¶≤‡ßÅ‡¶ï‡¶æ‡¶®‡ßã
                detailRow.classList.add('hidden');
                icon.classList.remove('fa-chevron-up');
                icon.classList.add('fa-chevron-down');
            }
        };

        // Function to render users table (UPDATED: ‡¶Æ‡ßÇ‡¶≤ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶∂‡¶® ‡¶¨‡¶æ‡¶ü‡¶® ‡¶∏‡¶∞‡¶ø‡¶Ø‡¶º‡ßá ‡¶∂‡ßÅ‡¶ß‡ßÅ ‡¶ü‡¶ó‡¶≤ ‡¶¨‡¶æ‡¶ü‡¶® ‡¶∞‡¶æ‡¶ñ‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá)
        const renderUsers = (users) => {
            usersTableBody.innerHTML = '';
            for (const userId in users) {
                const user = users[userId];
                
                if (userId === currentUserId && (user.role === 'admin' || user.role === 'moderator')) {
                    continue; 
                }
                
                const displayName = user.facebookName || 'N/A';
                const userEmail = user.email || 'N/A';
                const isSuspended = user.suspension?.suspended && user.suspension.suspendUntil > Date.now();
                
                const suspensionBadge = isSuspended 
                    ? `<span class="px-2 py-1 rounded-full text-xs font-semibold bg-red-500 text-white ml-2">‡¶∏‡¶æ‡¶∏‡¶™‡ßá‡¶®‡ßç‡¶°</span>`
                    : '';
                
                // ‡¶™‡ßç‡¶∞‡¶ß‡¶æ‡¶® ‡¶§‡¶•‡ßç‡¶Ø ‡¶∞‡ßã
                const mainRow = document.createElement('tr');
                mainRow.id = `main-row-${userId}`;

                // Simplified mainRow actions: only the toggle button remains
                mainRow.innerHTML = `
                    <td class="text-sm text-gray-500 font-mono break-all">${userId.substring(0, 10)}...</td>
                    <td class="font-medium text-gray-800">${displayName} ${suspensionBadge}</td>
                    <td class="text-sm text-gray-600 break-all">${userEmail}</td>
                    <td class="font-semibold text-green-600">${(user.points || 0).toLocaleString('bn-BD')}</td>
                    <td>
                        <span class="px-2 py-1 rounded-full text-xs font-semibold bg-indigo-100 text-indigo-700">
                            ${user.role || 'user'}
                        </span>
                    </td>
                    <td class="flex justify-end pr-4">
                        <!-- ‡¶™‡ßç‡¶∞‡ßã‡¶´‡¶æ‡¶á‡¶≤ ‡¶°‡ßç‡¶∞‡¶™‡¶°‡¶æ‡¶â‡¶® ‡¶ü‡¶ó‡¶≤ ‡¶¨‡¶æ‡¶ü‡¶® -->
                        <button class="px-3 py-1 rounded-full text-xs font-bold text-white transition-colors duration-200 brand-blue hover:bg-blue-700 flex items-center gap-1" onclick="toggleUserDetails('${userId}')" title="‡¶∏‡¶Æ‡ßç‡¶™‡ßÇ‡¶∞‡ßç‡¶£ ‡¶™‡ßç‡¶∞‡ßã‡¶´‡¶æ‡¶á‡¶≤ ‡¶°‡ßá‡¶ü‡¶æ ‡¶ì ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶∂‡¶®">
                            <span class="hidden sm:inline">‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶∂‡¶®</span>
                            <i class="fas fa-chevron-down ml-1" id="toggle-icon-${userId}"></i>
                        </button>
                    </td>
                `;
                usersTableBody.appendChild(mainRow);
                
                // ‡¶™‡ßç‡¶∞‡ßã‡¶´‡¶æ‡¶á‡¶≤ ‡¶¨‡¶ø‡¶∏‡ßç‡¶§‡¶æ‡¶∞‡¶ø‡¶§ ‡¶∞‡ßã (‡¶°‡ßç‡¶∞‡¶™‡¶°‡¶æ‡¶â‡¶®)
                const detailRow = document.createElement('tr');
                detailRow.id = `details-row-${userId}`;
                detailRow.classList.add('user-details-row', 'hidden');
                detailRow.innerHTML = `
                    <td colspan="6">
                        <div class="user-details-content">
                            <p class="text-gray-500">‡¶≤‡ßã‡¶°‡¶ø‡¶Ç ‡¶™‡ßç‡¶∞‡ßã‡¶´‡¶æ‡¶á‡¶≤ ‡¶°‡ßá‡¶ü‡¶æ...</p>
                        </div>
                    </td>
                `;
                usersTableBody.appendChild(detailRow);
            }
        };


        // Function to render tasks table (UPDATED for Edit button)
        const renderTasks = (tasks) => {
            tasksTableBody.innerHTML = '';
            const sortedTasks = Object.keys(tasks).map(key => ({ id: key, ...tasks[key] })).sort((a, b) => b.createdAt - a.createdAt);

            sortedTasks.forEach((task) => {
                const row = document.createElement('tr');
                const taskStatus = task.status || 'N/A';
                let statusDisplay = 'N/A';
                let statusColor = 'text-gray-600';

                if (taskStatus === 'active') {
                    statusDisplay = '‡¶∏‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º';
                    statusColor = 'text-green-600';
                } else if (taskStatus === 'completed') {
                    statusDisplay = '‡¶∏‡¶Æ‡ßç‡¶™‡ßÇ‡¶∞‡ßç‡¶£';
                    statusColor = 'text-blue-600';
                } else if (taskStatus === 'closed') {
                    statusDisplay = '‡¶¨‡¶®‡ßç‡¶ß';
                    statusColor = 'text-red-600';
                }

                // ‡¶ü‡¶æ‡¶∏‡ßç‡¶ï ‡¶è‡¶°‡¶ø‡¶ü ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶°‡ßá‡¶ü‡¶æ ‡¶™‡ßç‡¶∞‡¶∏‡ßá‡¶∏ ‡¶ï‡¶∞‡¶æ (HTML ‡¶è ‡¶™‡¶æ‡¶∏ ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø JSON ‡¶∏‡ßç‡¶ü‡ßç‡¶∞‡¶ø‡¶Ç)
                const taskForEdit = JSON.stringify({
                    id: task.id,
                    taskLink: task.taskLink,
                    taskType: task.taskType,
                    quantity: task.quantity,
                    // Check if pointsPerTask is explicitly set (not just default)
                    pointsPerTask: task.pointsPerTask
                }).replace(/"/g, '&quot;'); 

                row.innerHTML = `
                    <td class="text-sm text-gray-500 font-mono break-all">${task.id.substring(0, 10)}...</td>
                    <td class="font-medium">${task.taskType || 'N/A'}</td>
                    <td><a href="${task.taskLink}" target="_blank" class="brand-blue-text hover:underline">${task.taskLink ? task.taskLink.substring(0, 30) + '...' : 'N/A'}</a></td>
                    <td class="font-semibold text-yellow-600">${(task.pointsPerTask || 0).toLocaleString('bn-BD')}</td>
                    <td class="font-medium ${statusColor}">${statusDisplay}</td>
                    <td class="flex flex-wrap gap-2">
                        <!-- ‡¶ü‡¶æ‡¶∏‡ßç‡¶ï ‡¶è‡¶°‡¶ø‡¶ü ‡¶¨‡¶æ‡¶ü‡¶® -->
                        <button class="px-4 py-2 rounded-full text-sm font-bold text-white transition-colors duration-200 bg-indigo-500 hover:bg-indigo-600" onclick='openTaskModal(${taskForEdit})'>
                            <i class="fas fa-edit mr-1"></i> ‡¶è‡¶°‡¶ø‡¶ü
                        </button>
                        ${taskStatus === 'active' ? 
                            `<button class="px-4 py-2 rounded-full text-sm font-bold text-white transition-colors duration-200 bg-red-500 hover:bg-red-600" onclick="openAdminModal('closeTask', { taskId: '${task.id}' })">
                                <i class="fas fa-times-circle mr-1"></i> ‡¶¨‡¶®‡ßç‡¶ß ‡¶ï‡¶∞‡ßÅ‡¶®
                            </button>`
                        : `<span class="text-gray-500 text-xs italic ml-2">${statusDisplay}</span>`}
                    </td>
                `;
                tasksTableBody.appendChild(row);
            });
        };

        // Function to render proofs (No change)
        const renderProofs = (tasks) => {
            proofsGrid.innerHTML = '';
            let proofsFound = false;
            
            const proofsToRender = [];

            for (const taskId in tasks) {
                const task = tasks[taskId];
                if (task.proofs) {
                    for (const proofId in task.proofs) {
                        const proof = task.proofs[proofId];
                        
                        if (proof.status === 'pending') {
                            proofsFound = true;
                            const userData = allUsersData[proof.userId] || {};
                            proofsToRender.push({ taskId, proofId, task, proof, userData });
                        }
                    }
                }
            }
            
            proofsToRender.forEach(({ taskId, proofId, task, proof, userData }) => {
                const userDisplayName = userData.facebookName || proof.facebookName || '‡¶Ö‡¶ú‡¶æ‡¶®‡¶æ ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞‡¶ï‡¶æ‡¶∞‡ßÄ';
                const taskIconClass = getTaskTypeIcon(task.taskType);
                
                let proofDataHtml = '';
                if (proof.screenshotUrl) {
                    proofDataHtml = `
                        <div class="mt-4 pt-4 border-t border-gray-100">
                            <span class="font-medium text-gray-700 block mb-2"><i class="fas fa-image text-green-500 mr-2"></i> ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶®‡¶∂‡¶ü ‡¶™‡ßç‡¶∞‡ßÅ‡¶´:</span>
                            <img src="${proof.screenshotUrl}" alt="‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶®‡¶∂‡¶ü ‡¶™‡ßç‡¶∞‡ßÅ‡¶´" 
                                 class="w-full h-auto max-h-48 object-contain rounded-lg border border-gray-200 cursor-pointer"
                                 onclick="window.open('${proof.screenshotUrl}', '_blank')" />
                        </div>`;
                } else if (proof.facebookLink) { 
                    proofDataHtml = `
                        <p class="text-sm">
                            <span class="font-medium text-gray-700">‡¶´‡ßá‡¶∏‡¶¨‡ßÅ‡¶ï ‡¶≤‡¶ø‡¶Ç‡¶ï (‡¶™‡ßÅ‡¶∞‡ßã‡¶®‡ßã):</span> 
                            <a href="${proof.facebookLink}" target="_blank" class="brand-blue-text hover:underline break-all">${proof.facebookLink}</a>
                        </p>`;
                }
                
                const proofCard = `
                    <div class="app-card p-5">
                        <div class="flex items-center justify-between mb-4 pb-4 border-b">
                            <div class="flex items-center gap-3">
                                <i class="fas ${taskIconClass} text-2xl"></i>
                                <div>
                                    <h4 class="font-semibold text-gray-800">${userDisplayName}</h4>
                                    <p class="text-sm text-gray-500 font-mono break-all">
                                        ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶Ü‡¶á‡¶°‡¶ø: ${proof.userId.substring(0, 10)}...
                                    </p>
                                </div>
                            </div>
                        </div>
                        <div class="space-y-3 mb-6">
                            <p class="text-sm">
                                <span class="font-medium text-gray-700">‡¶ü‡¶æ‡¶∏‡ßç‡¶ï ‡¶™‡ßç‡¶∞‡¶ï‡¶æ‡¶∞:</span> 
                                <span class="font-semibold text-gray-900">${task.taskType}</span>
                            </p>
                            <p class="text-sm">
                                <span class="font-medium text-gray-700">‡¶ü‡¶æ‡¶∏‡ßç‡¶ï ‡¶≤‡¶ø‡¶Ç‡¶ï:</span> 
                                <a href="${task.taskLink}" target="_blank" class="brand-blue-text hover:underline break-all">${task.taskLink}</a>
                            </p>
                            <p class="text-sm">
                                <span class="font-medium text-gray-700">‡¶™‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶ü:</span> 
                                <span class="font-semibold text-green-600">+${(task.pointsPerTask).toLocaleString('bn-BD')}</span>
                            </p>
                            ${proofDataHtml} 
                        </div>
                        <div class="flex gap-4">
                            <button class="flex-1 brand-blue text-white py-2.5 rounded-lg font-bold hover:brightness-110 transition duration-200" onclick="openAdminModal('approveProof', { taskId: '${taskId}', proofId: '${proofId}', userId: '${proof.userId}', points: ${task.pointsPerTask} })">
                                <i class="fas fa-thumbs-up mr-2"></i> ‡¶Ö‡¶®‡ßÅ‡¶Æ‡ßã‡¶¶‡¶®
                            </button>
                            <button class="flex-1 bg-red-500 text-white py-2.5 rounded-lg font-bold hover:bg-red-600 transition duration-200" onclick="openAdminModal('rejectProof', { taskId: '${taskId}', proofId: '${proofId}', userId: '${proof.userId}' })">
                                <i class="fas fa-times-circle mr-2"></i> ‡¶¨‡¶æ‡¶§‡¶ø‡¶≤
                            </button>
                        </div>
                    </div>
                `;
                proofsGrid.insertAdjacentHTML('beforeend', proofCard);
            });
            
            if (!proofsFound) {
                proofsGrid.innerHTML = '<div class="col-span-full text-center py-12 text-gray-500 text-lg">üéâ ‡¶ï‡ßã‡¶®‡ßã ‡¶®‡¶§‡ßÅ‡¶® ‡¶™‡ßç‡¶∞‡ßÅ‡¶´ ‡¶®‡ßá‡¶á‡•§</div>';
            }
        };

        // Function to render reports (No change)
        const renderReports = (reports) => {
            reportsGrid.innerHTML = '';
            let reportsFound = false;
            
            const reportsToRender = Object.keys(reports)
                .map(key => ({ id: key, ...reports[key] }))
                .filter(report => report.status === 'pending')
                .sort((a, b) => a.submittedAt - b.submittedAt); 

            reportsToRender.forEach((report) => {
                reportsFound = true;
                const typeColor = getReportTypeColor(report.type);
                const typeDisplay = getReportTypeDisplay(report.type);
                
                const reportCard = `
                    <div class="report-card app-card p-5 ${report.type}">
                        <div class="flex justify-between items-center mb-4 pb-3 border-b border-gray-100">
                            <span class="px-3 py-1 text-xs font-bold rounded-full text-white ${typeColor}">
                                ${typeDisplay}
                            </span>
                            <span class="text-xs text-gray-500">${new Date(report.submittedAt).toLocaleDateString('bn-BD')}</span>
                        </div>
                        <h4 class="text-lg font-bold text-gray-800 mb-2">${report.title}</h4>
                        <p class="text-sm text-gray-600 mb-4">${report.details}</p>

                        <div class="space-y-1 text-sm text-gray-700 mb-4">
                            <p><strong>‡¶á‡¶â‡¶ú‡¶æ‡¶∞:</strong> ${report.userName || 'N/A'}</p>
                            <p class="text-xs"><strong>‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ID:</strong> ${report.userId.substring(0, 10)}...</p>
                            ${report.screenshotUrl ? 
                                `<a href="${report.screenshotUrl}" target="_blank" class="brand-blue-text hover:underline text-xs block mt-1">
                                    <i class="fas fa-image mr-1"></i> ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶®‡¶∂‡¶ü ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®
                                </a>`
                            : ''}
                        </div>
                        
                        <div class="flex gap-3">
                            <button class="flex-1 bg-green-500 text-white font-bold py-2.5 rounded-lg hover:bg-green-600 transition" 
                                onclick="openAdminModal('approveReport', { reportId: '${report.id}', userId: '${report.userId}', userName: '${report.userName || 'N/A'}', title: '${report.title}' })">
                                <i class="fas fa-check-circle mr-2"></i> ‡¶Ö‡¶®‡ßÅ‡¶Æ‡ßã‡¶¶‡¶®
                            </button>
                            <button class="flex-1 bg-red-500 text-white font-bold py-2.5 rounded-lg hover:bg-red-600 transition" 
                                onclick="openAdminModal('rejectReport', { reportId: '${report.id}' })">
                                <i class="fas fa-times-circle mr-2"></i> ‡¶¨‡¶æ‡¶§‡¶ø‡¶≤
                            </button>
                        </div>
                    </div>
                `;
                reportsGrid.insertAdjacentHTML('beforeend', reportCard);
            });

            if (!reportsFound) {
                reportsGrid.innerHTML = '<div class="col-span-full text-center py-12 text-gray-500 text-lg">‚úÖ ‡¶ï‡ßã‡¶®‡ßã ‡¶®‡¶§‡ßÅ‡¶® ‡¶∞‡¶ø‡¶™‡ßã‡¶∞‡ßç‡¶ü ‡¶®‡ßá‡¶á‡•§</div>';
            }
        };
        
        /** ‡¶Ö‡¶®‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶Ø ‡¶∏‡¶π‡¶æ‡¶Ø‡¶º‡¶ï ‡¶´‡¶æ‡¶Ç‡¶∂‡¶® (No change) */
        const getTaskTypeIcon = (type) => {
            switch(type.toLowerCase()) {
                case 'react': return 'fa-thumbs-up text-blue-600';
                case 'comment': return 'fa-comment text-indigo-600';
                case 'share': return 'fa-share text-cyan-600';
                case 'follow': return 'fa-user-plus text-purple-600';
                case 'groupjoin': return 'fa-users text-teal-600'; 
                default: return 'fa-list-check text-gray-600';
            }
        };
        const getReportTypeColor = (type) => {
            switch(type.toLowerCase()) {
                case 'bug': return 'bg-red-500'; case 'suggestion': return 'bg-blue-500';
                case 'security': return 'bg-green-500'; default: return 'bg-gray-500';
            }
        };
        const getReportTypeDisplay = (type) => {
            switch(type.toLowerCase()) {
                case 'bug': return '‡¶¨‡¶æ‡¶ó/‡¶§‡ßç‡¶∞‡ßÅ‡¶ü‡¶ø'; case 'suggestion': return '‡¶™‡¶∞‡¶æ‡¶Æ‡¶∞‡ßç‡¶∂';
                case 'security': return '‡¶®‡¶ø‡¶∞‡¶æ‡¶™‡¶§‡ßç‡¶§‡¶æ'; default: return '‡¶Ö‡¶®‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶Ø';
            }
        };


        // ‡¶Æ‡ßç‡¶Ø‡¶æ‡¶®‡ßÅ‡¶Ø‡¶º‡¶æ‡¶≤ ‡¶∏‡¶æ‡¶∏‡¶™‡ßá‡¶®‡¶∂‡¶® ‡¶π‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶°‡¶≤‡¶æ‡¶∞ (No change)
        window.handleManualSuspension = async (uId, durationMinutes, reasonMessage) => {
            showNotification(`‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ID ${uId.substring(0, 8)}... ‡¶ï‡ßá ‡¶∏‡¶æ‡¶∏‡¶™‡ßá‡¶®‡ßç‡¶° ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶™‡ßç‡¶∞‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º‡¶æ ‡¶ö‡¶≤‡¶õ‡ßá...`, 'info', 3000);
            const suspendUntil = Date.now() + (durationMinutes * 60 * 1000); 
            try {
                const suspensionRef = ref(rtdb, `users/${uId}/suspension`);
                await set(suspensionRef, {
                    suspended: true, suspendUntil: suspendUntil, reason: reasonMessage,
                    issuedBy: currentUserId, issuedAt: Date.now()
                });
                showNotification(`‡¶∏‡¶´‡¶≤! ‡¶á‡¶â‡¶ú‡¶æ‡¶∞‡¶ï‡ßá ${durationMinutes} ‡¶Æ‡¶ø‡¶®‡¶ø‡¶ü‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶∏‡¶æ‡¶∏‡¶™‡ßá‡¶®‡ßç‡¶° ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá‡•§`, 'success', 8000);
            } catch (error) {
                console.error("Error setting manual suspension data:", error);
                showNotification('‡¶Æ‡ßç‡¶Ø‡¶æ‡¶®‡ßÅ‡¶Ø‡¶º‡¶æ‡¶≤ ‡¶∏‡¶æ‡¶∏‡¶™‡ßá‡¶®‡¶∂‡¶® ‡¶°‡ßá‡¶ü‡¶æ‡¶¨‡ßá‡¶ú‡ßá ‡¶≤‡¶ø‡¶ñ‡¶§‡ßá ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶π‡¶ö‡ßç‡¶õ‡ßá‡•§', 'error');
            }
        };

        // ‡¶™‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶ü ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶ú‡¶æ‡¶∏‡ßç‡¶ü‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶´‡¶æ‡¶Ç‡¶∂‡¶® (No change)
        window.handlePointAdjustment = async (uId, uName, amount, reason) => {
            showNotification(`${uName} ‡¶è‡¶∞ ‡¶™‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶ü ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶®‡ßá‡¶∞ ‡¶™‡ßç‡¶∞‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º‡¶æ ‡¶ö‡¶≤‡¶õ‡ßá...`, 'info', 3000);
            const userRef = ref(rtdb, `users/${uId}`);
            const logRef = ref(rtdb, `pointAdjustments/${uId}`); 
            
            try {
                const userUpdateResult = await runTransaction(userRef, (currentData) => {
                    if (currentData) { currentData.points = (currentData.points || 0) + amount; }
                    return currentData;
                });

                if (!userUpdateResult.committed) { throw new Error("User point update transaction failed."); }
                
                const logEntry = {
                    adjustedBy: currentUserId, adjustedAt: Date.now(), adjustmentAmount: amount,
                    reason: reason, newPoints: userUpdateResult.snapshot.val().points, userName: uName 
                };
                push(logRef, logEntry); 

                const actionText = amount > 0 ? '‡¶Ø‡ßã‡¶ó' : '‡¶¨‡¶æ‡¶¶';
                showNotification(`‡¶∏‡¶´‡¶≤! ${uName} ‡¶è‡¶∞ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶•‡ßá‡¶ï‡ßá ${(Math.abs(amount)).toLocaleString('bn-BD')} ‡¶™‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶ü ${actionText} ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá‡•§ ‡¶¨‡¶∞‡ßç‡¶§‡¶Æ‡¶æ‡¶® ‡¶™‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶ü: ${userUpdateResult.snapshot.val().points.toLocaleString('bn-BD')}`, 'success', 10000);

            } catch (error) {
                console.error("Error adjusting user points:", error);
                showNotification('‡¶™‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶ü ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶ú‡¶æ‡¶∏‡ßç‡¶ü ‡¶ï‡¶∞‡¶§‡ßá ‡¶¨‡ßç‡¶Ø‡¶∞‡ßç‡¶•: ‡¶°‡ßá‡¶ü‡¶æ‡¶¨‡ßá‡¶ú ‡¶§‡ßç‡¶∞‡ßÅ‡¶ü‡¶ø‡•§', 'error');
            }
        };


        // ‡¶∏‡¶æ‡¶∏‡¶™‡ßá‡¶®‡¶∂‡¶® ‡¶™‡ßç‡¶∞‡¶§‡ßç‡¶Ø‡¶æ‡¶π‡¶æ‡¶∞‡ßá‡¶∞ ‡¶π‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶°‡¶≤‡¶æ‡¶∞ (No change)
        window.handleUnsuspendUser = async (uId) => {
            showNotification(`‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ID ${uId.substring(0, 8)}... ‡¶è‡¶∞ ‡¶∏‡¶æ‡¶∏‡¶™‡ßá‡¶®‡¶∂‡¶® ‡¶™‡ßç‡¶∞‡¶§‡ßç‡¶Ø‡¶æ‡¶π‡¶æ‡¶∞‡ßá‡¶∞ ‡¶™‡ßç‡¶∞‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º‡¶æ ‡¶ö‡¶≤‡¶õ‡ßá...`, 'info', 3000);
            try {
                const suspensionRef = ref(rtdb, `users/${uId}/suspension`);
                await update(suspensionRef, {
                    suspended: false, suspendUntil: 0, reason: null, 
                    revokedBy: currentUserId, revokedAt: Date.now() 
                });
                showNotification(`‡¶∏‡¶´‡¶≤! ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ID ${uId.substring(0, 8)}... ‡¶è‡¶∞ ‡¶∏‡¶æ‡¶∏‡¶™‡ßá‡¶®‡¶∂‡¶® ‡¶™‡ßç‡¶∞‡¶§‡ßç‡¶Ø‡¶æ‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá‡•§`, 'success', 8000);
            } catch (error) {
                console.error("Error revoking suspension data:", error);
                showNotification('‡¶∏‡¶æ‡¶∏‡¶™‡ßá‡¶®‡¶∂‡¶® ‡¶™‡ßç‡¶∞‡¶§‡ßç‡¶Ø‡¶æ‡¶π‡¶æ‡¶∞‡ßá‡¶∞ ‡¶°‡ßá‡¶ü‡¶æ‡¶¨‡ßá‡¶ú‡ßá ‡¶≤‡¶ø‡¶ñ‡¶§‡ßá ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶π‡¶ö‡ßç‡¶õ‡ßá‡•§', 'error');
            }
        };


        // ‡¶Ö‡¶®‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶Ø ‡¶ó‡ßç‡¶≤‡ßã‡¶¨‡¶æ‡¶≤ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶∂‡¶® ‡¶´‡¶æ‡¶Ç‡¶∂‡¶® (No change)
        window.toggleVerification = (userId, isVerified) => {
            const userRef = ref(rtdb, `users/${userId}`);
            update(userRef, { isVerified: !isVerified })
                .then(() => {
                    // ‡¶∏‡¶´‡¶≤ ‡¶π‡¶≤‡ßá ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶°‡¶ø‡¶ü‡ßá‡¶á‡¶≤‡¶∏ ‡¶°‡ßç‡¶∞‡¶™‡¶°‡¶æ‡¶â‡¶® ‡¶¨‡¶®‡ßç‡¶ß ‡¶ï‡¶∞‡¶æ
                    toggleUserDetails(userId); 
                    showNotification('‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞‡¶ï‡¶æ‡¶∞‡ßÄ‡¶∞ ‡¶≠‡ßá‡¶∞‡¶ø‡¶´‡¶ø‡¶ï‡ßá‡¶∂‡¶® ‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∏ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá‡•§', 'info');
                })
                .catch(error => showNotification('‡¶≠‡ßá‡¶∞‡¶ø‡¶´‡¶ø‡¶ï‡ßá‡¶∂‡¶® ‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∏ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡¶§‡ßá ‡¶¨‡ßç‡¶Ø‡¶∞‡ßç‡¶•‡•§', 'error'));
        };

        window.handleCloseTask = (taskId) => {
            showNotification("‡¶ï‡¶æ‡¶ú‡¶ü‡¶ø ‡¶¨‡¶®‡ßç‡¶ß ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶™‡ßç‡¶∞‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º‡¶æ ‡¶ö‡¶≤‡¶õ‡ßá...", 'info');
            const taskRef = ref(rtdb, `tasks/${taskId}`);
            update(taskRef, { status: 'closed' })
                .then(() => showNotification('‡¶ï‡¶æ‡¶ú ‡¶∏‡ßç‡¶•‡¶æ‡¶Ø‡¶º‡ßÄ‡¶≠‡¶æ‡¶¨‡ßá ‡¶¨‡¶®‡ßç‡¶ß ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá‡•§', 'success'))
                .catch(error => showNotification('‡¶ï‡¶æ‡¶ú ‡¶¨‡¶®‡ßç‡¶ß ‡¶ï‡¶∞‡¶§‡ßá ‡¶¨‡ßç‡¶Ø‡¶∞‡ßç‡¶•‡•§', 'error'));
        };
        
        window.handleApproveProof = async (taskId, proofId, userId, pointsToAdd) => {
            showNotification("‡¶Ö‡¶®‡ßÅ‡¶Æ‡ßã‡¶¶‡¶® ‡¶™‡ßç‡¶∞‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º‡¶æ ‡¶ö‡¶≤‡¶õ‡ßá...", 'info');
            const APPROVE_trust_CHANGE = 5; 
            if (!currentUserId) { showNotification('‡¶§‡ßç‡¶∞‡ßÅ‡¶ü‡¶ø: ‡¶è‡¶°‡¶Æ‡¶ø‡¶® ‡¶Ü‡¶á‡¶°‡¶ø ‡¶™‡¶æ‡¶ì‡¶Ø‡¶º‡¶æ ‡¶Ø‡¶æ‡¶Ø‡¶º‡¶®‡¶ø‡•§', 'error'); return; }
            const proofRef = ref(rtdb, `tasks/${taskId}/proofs/${proofId}`);
            const userRef = ref(rtdb, `users/${userId}`);
            const taskRef = ref(rtdb, `tasks/${taskId}`);
            
            try {
                const snapshot = await get(proofRef);
                const currentProof = snapshot.val();
                if (!currentProof || currentProof.status !== 'pending') { showNotification('‡¶è‡¶á ‡¶™‡ßç‡¶∞‡ßÅ‡¶´‡¶ü‡¶ø ‡¶á‡¶§‡¶ø‡¶Æ‡¶ß‡ßç‡¶Ø‡ßá‡¶á ‡¶™‡ßç‡¶∞‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º‡¶æ ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá‡•§', 'error'); return; }

                await update(proofRef, { status: 'approved', reviewedBy: currentUserId, reviewedAt: Date.now() });
                
                const userUpdatePromise = runTransaction(userRef, (currentData) => {
                    if (currentData) {
                        const newPoints = (currentData.points || 0) + pointsToAdd;
                        const newTasksCompleted = (currentData.tasksCompleted || 0) + 1;
                        const newtrustScore = (currentData.trustScore || 0) + APPROVE_trust_CHANGE;
                        currentData.points = newPoints;
                        currentData.tasksCompleted = newTasksCompleted;
                        currentData.trustScore = Math.min(100, Math.max(0, newtrustScore)); 
                        currentData.completedTasks = currentData.completedTasks || {};
                        currentData.completedTasks[taskId] = 'approved'; 
                    }
                    return currentData;
                });
                
                const taskUpdatePromise = runTransaction(taskRef, (currentData) => {
                    if (currentData) {
                        currentData.completedCount = (currentData.completedCount || 0) + 1;
                        if (currentData.quantity && currentData.completedCount >= currentData.quantity) { currentData.status = 'completed'; }
                    }
                    return currentData;
                });

                const [userResult] = await Promise.all([userUpdatePromise, taskUpdatePromise]);
                
                if (userResult.committed) {
                    const finaltrustScore = userResult.snapshot.val().trustScore;
                    showNotification(`‡¶™‡ßç‡¶∞‡ßÅ‡¶´ ‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶Ö‡¶®‡ßÅ‡¶Æ‡ßã‡¶¶‡¶ø‡¶§ ‡¶π‡ßü‡ßá‡¶õ‡ßá (+${pointsToAdd} ‡¶™‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶ü)‡•§ ‡¶®‡¶§‡ßÅ‡¶® trustScore: ${finaltrustScore}`, 'success');
                } else { showNotification('‡¶™‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶ü ‡¶è‡¶¨‡¶Ç ‡¶ü‡¶æ‡¶∏‡ßç‡¶ï ‡¶°‡ßá‡¶ü‡¶æ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶¨‡ßç‡¶Ø‡¶∞‡ßç‡¶• ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá‡•§', 'error'); }
            } catch (error) {
                console.error("Error approving proof:", error);
                showNotification(`‡¶™‡ßç‡¶∞‡ßÅ‡¶´ ‡¶Ö‡¶®‡ßÅ‡¶Æ‡ßã‡¶¶‡¶® ‡¶ï‡¶∞‡¶§‡ßá ‡¶¨‡ßç‡¶Ø‡¶∞‡ßç‡¶•: ${error.message || '‡¶Ö‡¶ú‡¶æ‡¶®‡¶æ ‡¶§‡ßç‡¶∞‡ßÅ‡¶ü‡¶ø'}‡•§`, 'error');
            }
        };

        window.handleRejectProof = async (taskId, proofId, userId, rejectionReason) => {
            showNotification("‡¶¨‡¶æ‡¶§‡¶ø‡¶≤ ‡¶™‡ßç‡¶∞‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º‡¶æ ‡¶ö‡¶≤‡¶õ‡ßá...", 'info');
            const REJECT_trust_CHANGE = -10; 
            if (!currentUserId) { showNotification('‡¶§‡ßç‡¶∞‡ßÅ‡¶ü‡¶ø: ‡¶è‡¶°‡¶Æ‡¶ø‡¶® ‡¶Ü‡¶á‡¶°‡¶ø ‡¶™‡¶æ‡¶ì‡¶Ø‡¶º‡¶æ ‡¶Ø‡¶æ‡¶Ø‡¶º‡¶®‡¶ø‡•§', 'error'); return; }
            const proofRef = ref(rtdb, `tasks/${taskId}/proofs/${proofId}`);
            const userRef = ref(rtdb, `users/${userId}`);
            
            try {
                const snapshot = await get(proofRef);
                const currentProof = snapshot.val();
                if (!currentProof || currentProof.status !== 'pending') { showNotification('‡¶è‡¶á ‡¶™‡ßç‡¶∞‡ßÅ‡¶´‡¶ü‡¶ø ‡¶á‡¶§‡¶ø‡¶Æ‡¶ß‡ßç‡¶Ø‡ßá‡¶á ‡¶™‡ßç‡¶∞‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º‡¶æ ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá‡•§', 'error'); return; }
                
                await update(proofRef, { 
                    status: 'rejected', reviewedBy: currentUserId, reviewedAt: Date.now(), rejectionReason: rejectionReason 
                });
                
                const userResult = await runTransaction(userRef, (currentData) => {
                    if (currentData) {
                        currentData.tasksRejected = (currentData.tasksRejected || 0) + 1;
                        currentData.completedTasks = currentData.completedTasks || {};
                        delete currentData.completedTasks[taskId]; 
                        
                        const newtrustScore = (currentData.trustScore || 0) + REJECT_trust_CHANGE;
                        currentData.trustScore = Math.min(100, Math.max(0, newtrustScore));
                        
                        const currentSuspensionUntil = currentData.suspension?.suspendUntil || 0;
                        let suspendMinutes = 0;
                        let reasonMessage = '';
                        
                        if (currentData.trustScore <= 40) { suspendMinutes = 24 * 60; reasonMessage = '‡¶ü‡ßç‡¶∞‡¶æ‡¶∏‡ßç‡¶ü ‡¶∏‡ßç‡¶ï‡ßã‡¶∞ ‡ß™‡ß¶ ‡¶¨‡¶æ ‡¶§‡¶æ‡¶∞ ‡¶®‡¶ø‡¶ö‡ßá: ‡ßß ‡¶¶‡¶ø‡¶®‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶∏‡¶æ‡¶∏‡¶™‡ßá‡¶®‡¶∂‡¶®‡•§'; } 
                        else if (currentData.trustScore <= 50) { suspendMinutes = 3 * 60; reasonMessage = '‡¶ü‡ßç‡¶∞‡¶æ‡¶∏‡ßç‡¶ü ‡¶∏‡ßç‡¶ï‡ßã‡¶∞ ‡ß´‡ß¶ ‡¶¨‡¶æ ‡¶§‡¶æ‡¶∞ ‡¶®‡¶ø‡¶ö‡ßá: ‡ß© ‡¶ò‡¶®‡ßç‡¶ü‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶∏‡¶æ‡¶∏‡¶™‡ßá‡¶®‡¶∂‡¶®‡•§'; } 
                        else if (currentData.trustScore <= 60) { suspendMinutes = 60; reasonMessage = '‡¶ü‡ßç‡¶∞‡¶æ‡¶∏‡ßç‡¶ü ‡¶∏‡ßç‡¶ï‡ßã‡¶∞ ‡ß¨‡ß¶ ‡¶¨‡¶æ ‡¶§‡¶æ‡¶∞ ‡¶®‡¶ø‡¶ö‡ßá: ‡ßß ‡¶ò‡¶®‡ßç‡¶ü‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶∏‡¶æ‡¶∏‡¶™‡ßá‡¶®‡¶∂‡¶®‡•§'; } 
                        else if (currentData.trustScore <= 70) { suspendMinutes = 30; reasonMessage = '‡¶ü‡ßç‡¶∞‡¶æ‡¶∏‡ßç‡¶ü ‡¶∏‡ßç‡¶ï‡ßã‡¶∞ ‡ß≠‡ß¶ ‡¶¨‡¶æ ‡¶§‡¶æ‡¶∞ ‡¶®‡¶ø‡¶ö‡ßá: ‡ß©‡ß¶ ‡¶Æ‡¶ø‡¶®‡¶ø‡¶ü‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶∏‡¶æ‡¶∏‡¶™‡ßá‡¶®‡¶∂‡¶®‡•§'; }
                        
                        if (suspendMinutes > 0) {
                            const suspendUntil = Date.now() + (suspendMinutes * 60 * 1000);
                            if (suspendUntil > currentSuspensionUntil) {
                                currentData.suspension = {
                                    suspended: true, suspendUntil: suspendUntil, reason: reasonMessage,
                                    issuedBy: currentUserId, issuedAt: Date.now()
                                };
                            }
                        }
                    }
                    return currentData;
                });
                
                if (userResult.committed) {
                    const finalUserData = userResult.snapshot.val();
                    const finaltrustScore = finalUserData.trustScore;
                    let notificationMessage = `‡¶™‡ßç‡¶∞‡ßÅ‡¶´ ‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶¨‡¶æ‡¶§‡¶ø‡¶≤ ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá‡•§ ‡¶®‡¶§‡ßÅ‡¶® trustScore: ${finaltrustScore}`;
                    if (finalUserData.suspension && finalUserData.suspension.suspended) { notificationMessage += ` **‡¶á‡¶â‡¶ú‡¶æ‡¶∞‡¶ï‡ßá ‡¶∏‡¶æ‡¶∏‡¶™‡ßá‡¶®‡ßç‡¶° ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá‡•§**`; }
                    showNotification(notificationMessage, 'info');
                } else { showNotification('‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞‡¶ï‡¶æ‡¶∞‡ßÄ‡¶∞ ‡¶°‡ßá‡¶ü‡¶æ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶¨‡ßç‡¶Ø‡¶∞‡ßç‡¶• ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá‡•§', 'error'); }
            } catch (error) {
                console.error("Error rejecting proof:", error);
                showNotification(`‡¶™‡ßç‡¶∞‡ßÅ‡¶´ ‡¶¨‡¶æ‡¶§‡¶ø‡¶≤ ‡¶ï‡¶∞‡¶§‡ßá ‡¶¨‡ßç‡¶Ø‡¶∞‡ßç‡¶•: ${error.message || '‡¶Ö‡¶ú‡¶æ‡¶®‡¶æ ‡¶§‡ßç‡¶∞‡ßÅ‡¶ü‡¶ø'}‡•§`, 'error');
            }
        };

        window.handleApproveReport = async (reportId, userIdToReward, rewardPoints, reviewComment) => {
            showNotification(`‡¶∞‡¶ø‡¶™‡ßã‡¶∞‡ßç‡¶ü ID ${reportId.substring(0, 8)}... ‡¶è‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶™‡ßÅ‡¶∞‡¶∏‡ßç‡¶ï‡¶æ‡¶∞ ‡¶™‡ßç‡¶∞‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º‡¶æ ‡¶ö‡¶≤‡¶õ‡ßá...`, 'info');
            const reportRef = ref(rtdb, `reports/${reportId}`);
            const userRef = ref(rtdb, `users/${userIdToReward}`);

            try {
                const userUpdateResult = await runTransaction(userRef, (currentData) => {
                    if (currentData) {
                        currentData.points = (currentData.points || 0) + rewardPoints;
                        currentData.reportsApproved = (currentData.reportsApproved || 0) + 1;
                    }
                    return currentData;
                });
                if (!userUpdateResult.committed) { throw new Error("User point update transaction failed."); }

                await update(reportRef, {
                    status: 'approved', rewardPoints: rewardPoints, reviewedBy: currentUserId,
                    reviewedAt: Date.now(), reviewComment: reviewComment 
                });
                showNotification(`‡¶∏‡¶´‡¶≤! ‡¶á‡¶â‡¶ú‡¶æ‡¶∞‡¶ï‡ßá ${rewardPoints} ‡¶™‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶ü ‡¶¶‡ßá‡¶ì‡¶Ø‡¶º‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá ‡¶è‡¶¨‡¶Ç ‡¶∞‡¶ø‡¶™‡ßã‡¶∞‡ßç‡¶ü‡¶ü‡¶ø ‡¶Ü‡¶∞‡ßç‡¶ï‡¶æ‡¶á‡¶≠ ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá‡•§`, 'success');
            } catch (error) {
                console.error("Error rewarding report:", error);
                showNotification(`‡¶™‡ßÅ‡¶∞‡¶∏‡ßç‡¶ï‡¶æ‡¶∞ ‡¶¶‡¶ø‡¶§‡ßá ‡¶¨‡ßç‡¶Ø‡¶∞‡ßç‡¶•: ${error.message || '‡¶Ö‡¶ú‡¶æ‡¶®‡¶æ ‡¶§‡ßç‡¶∞‡ßÅ‡¶ü‡¶ø'}‡•§`, 'error');
            }
        };
        
        window.handleRejectReport = async (reportId, reviewComment) => {
            showNotification(`‡¶∞‡¶ø‡¶™‡ßã‡¶∞‡ßç‡¶ü ID ${reportId.substring(0, 8)}... ‡¶¨‡¶æ‡¶§‡¶ø‡¶≤ ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶™‡ßç‡¶∞‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º‡¶æ ‡¶ö‡¶≤‡¶õ‡ßá...`, 'info');
            const reportRef = ref(rtdb, `reports/${reportId}`);
            try {
                await update(reportRef, {
                    status: 'rejected', reviewedBy: currentUserId, reviewedAt: Date.now(),
                    reviewComment: reviewComment, rewardPoints: 0 
                });
                showNotification(`‡¶∏‡¶´‡¶≤! ‡¶∞‡¶ø‡¶™‡ßã‡¶∞‡ßç‡¶ü ID ${reportId.substring(0, 8)}... ‡¶¨‡¶æ‡¶§‡¶ø‡¶≤ ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá‡•§ ‡¶¨‡¶æ‡¶§‡¶ø‡¶≤‡ßá‡¶∞ ‡¶ï‡¶æ‡¶∞‡¶£ ‡¶∞‡ßá‡¶ï‡¶∞‡ßç‡¶° ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá‡•§`, 'success');
            } catch (error) {
                console.error("Error rejecting report:", error);
                showNotification(`‡¶∞‡¶ø‡¶™‡ßã‡¶∞‡ßç‡¶ü ‡¶¨‡¶æ‡¶§‡¶ø‡¶≤ ‡¶ï‡¶∞‡¶§‡ßá ‡¶¨‡ßç‡¶Ø‡¶∞‡ßç‡¶•: ${error.message || '‡¶Ö‡¶ú‡¶æ‡¶®‡¶æ ‡¶§‡ßç‡¶∞‡ßÅ‡¶ü‡¶ø'}‡•§`, 'error');
            }
        };


        // Tab switching logic (No change)
        tabs.forEach(tab => {
            tab.addEventListener('click', () => {
                tabs.forEach(t => {
                    t.classList.remove('bg-blue-600', 'text-white');
                    t.classList.add('bg-gray-200', 'text-gray-700');
                });
                tabContents.forEach(tc => tc.classList.add('hidden'));

                const tabName = tab.dataset.tab;
                document.getElementById(tabName).classList.remove('hidden');
                tab.classList.remove('bg-gray-200', 'text-gray-700');
                tab.classList.add('bg-blue-600', 'text-white');
                
                if (tabName === 'settings') {
                    loadControlSettings(); 
                }
            });
        });

        // ‡¶á‡¶≠‡ßá‡¶®‡ßç‡¶ü ‡¶≤‡¶ø‡¶∏‡ßá‡¶®‡¶æ‡¶∞ ‡¶∏‡ßá‡¶ü ‡¶ï‡¶∞‡¶æ
        saveReferralSettingsBtn.addEventListener('click', handleSaveReferralSettings);
        saveProductPointsBtn.addEventListener('click', handleSaveProductPoints);
        // üî• ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶ø‡¶§: ‡¶è‡¶ñ‡¶® ‡¶Ü‡¶∞ saveGlobalNoticeBtn ‡¶®‡ßá‡¶á, ‡¶§‡¶æ‡¶∞ ‡¶¨‡¶¶‡¶≤‡ßá form submit ‡¶Ü‡¶õ‡ßá
        // saveGlobalNoticeBtn.addEventListener('click', handleSaveGlobalNotice);


        // Expose global functions for button clicks
        window.openAdminModal = openAdminModal;
        window.handleApproveProof = handleApproveProof;
        window.handleRejectProof = handleRejectProof;
        window.handleApproveReport = handleApproveReport;
        window.handleRejectReport = handleRejectReport;
        window.handleUnsuspendUser = handleUnsuspendUser; 
        window.handlePointAdjustment = handlePointAdjustment; 
        window.handleProfileUpdate = handleProfileUpdate; 
        window.toggleUserDetails = toggleUserDetails;
        // üî• ‡¶®‡¶§‡ßÅ‡¶® ‡¶ó‡ßç‡¶≤‡ßã‡¶¨‡¶æ‡¶≤ ‡¶´‡¶æ‡¶Ç‡¶∂‡¶®‡¶ó‡ßÅ‡¶≤‡ßã
        window.openNoticeModal = openNoticeModal;
        window.closeNoticeModal = closeNoticeModal;
        window.handleToggleNoticeStatus = handleToggleNoticeStatus;
        window.handleDeleteNotice = handleDeleteNotice;
    </script>
</body>
</html>

